2025-11-07 08:25:10,019 - linien_server.autolock.autolock - ERROR - Error while handling new spectrum
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/autolock.py", line 212, in react_to_new_spectrum
    return self.algorithm.handle_new_spectrum(combined_error_signal)
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/robust.py", line 106, in handle_new_spectrum
    description, final_wait_time, time_scale = calculate_autolock_instructions(
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/robust.py", line 185, in calculate_autolock_instructions
    round(np.mean([get_time_scale(spectrum, target_idxs) for spectrum in spectra]))
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/robust.py", line 185, in <listcomp>
    round(np.mean([get_time_scale(spectrum, target_idxs) for spectrum in spectra]))
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/utils.py", line 131, in get_time_scale
    return np.abs(np.argmin(part) - np.argmax(part))
  File "<__array_function__ internals>", line 5, in argmin
  File "/usr/lib/python3/dist-packages/numpy/core/fromnumeric.py", line 1276, in argmin
    return _wrapfunc(a, 'argmin', axis=axis, out=out)
  File "/usr/lib/python3/dist-packages/numpy/core/fromnumeric.py", line 57, in _wrapfunc
    return bound(*args, **kwds)
ValueError: attempt to get argmin of an empty sequence
2025-11-07 08:35:56,866 - linien_server.cli - INFO - Stopping Linien server
2025-11-07 08:35:56,978 - linien_server.cli - INFO - Stopped Linien server
2025-11-07 08:36:00,286 - linien_server.cli - DEBUG - Copied linien-server.service to /etc/systemd/system
2025-11-07 08:36:00,287 - linien_server.cli - INFO - Starting Linien server
2025-11-07 08:36:00,355 - linien_server.cli - INFO - Started Linien server
2025-11-07 08:36:17,119 - linien_server.parameters - INFO - Restoring parameters from /root/.local/share/linien/parameters.json
2025-11-07 08:36:17,123 - linien_server.parameters - INFO - Restored parameters from /root/.local/share/linien/parameters.json
2025-11-07 08:36:17,129 - linien_common.influxdb - INFO - Saved InfluxDB credentials to /root/.local/share/linien/influxdb_credentials.json
2025-11-07 08:36:17,380 - linien_server.acquisition - INFO - Using fpgautil to deploy gateware.
2025-11-07 08:36:17,549 - linien_server.server - DEBUG - Ping  1
2025-11-07 08:36:17,561 - linien_server.mdio_tool - INFO - Disabling ethernet blinking with mdio-tool at /usr/local/lib/python3.10/dist-packages/linien_server/mdio-tool
2025-11-07 08:36:17,588 - linien_server.server - INFO - Starting server.
2025-11-07 08:36:18,330 - linien_server.cli - DEBUG - Copied linien-server.service to /etc/systemd/system
2025-11-07 08:36:18,332 - linien_server.cli - INFO - Starting Linien server
2025-11-07 08:36:18,379 - linien_server.cli - INFO - Started Linien server
2025-11-07 08:36:18,558 - linien_server.server - DEBUG - Ping  2
2025-11-07 08:36:19,569 - linien_server.server - DEBUG - Ping  3
2025-11-07 08:36:19,594 - linien_server.server - DEBUG - Further pings will be suppressed
2025-11-07 08:36:41,677 - linien_server.autolock.autolock - DEBUG - Initialize Autolock
2025-11-07 08:36:41,712 - linien_server.autolock.autolock - DEBUG - Start the autolock
2025-11-07 08:36:41,734 - linien_server.autolock.autolock - DEBUG - (x0, x1) = (800,1000)
2025-11-07 08:36:41,760 - linien_server.autolock.autolock - DEBUG - Start autolock with mode 1
2025-11-07 08:36:41,839 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-07 08:36:41,841 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-07 08:36:41,843 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-07 08:36:41,942 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-07 08:36:41,973 - linien_server.autolock.robust - ERROR - Not enough spectra collected:2 of 5
2025-11-07 08:36:42,174 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-07 08:36:42,177 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-07 08:36:42,179 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-07 08:36:42,277 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-07 08:36:42,307 - linien_server.autolock.robust - ERROR - Not enough spectra collected:3 of 5
2025-11-07 08:36:42,560 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-07 08:36:42,562 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-07 08:36:42,565 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-07 08:36:42,663 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-07 08:36:42,691 - linien_server.autolock.robust - ERROR - Not enough spectra collected:4 of 5
2025-11-07 08:36:42,987 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-07 08:36:42,991 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-07 08:36:42,992 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-07 08:36:43,086 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-07 08:36:43,115 - linien_server.autolock.robust - DEBUG - enough spectra!, calculate
2025-11-07 08:36:43,120 - linien_server.autolock.robust - DEBUG - Saved new robust_spectra.npy and target_idxs.npy
2025-11-07 08:36:43,285 - linien_server.autolock.autolock - ERROR - Error while handling new spectrum
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/autolock.py", line 212, in react_to_new_spectrum
    return self.algorithm.handle_new_spectrum(combined_error_signal)
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/robust.py", line 106, in handle_new_spectrum
    description, final_wait_time, time_scale = calculate_autolock_instructions(
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/robust.py", line 185, in calculate_autolock_instructions
    round(np.mean([get_time_scale(spectrum, target_idxs) for spectrum in spectra]))
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/robust.py", line 185, in <listcomp>
    round(np.mean([get_time_scale(spectrum, target_idxs) for spectrum in spectra]))
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/utils.py", line 131, in get_time_scale
    return np.abs(np.argmin(part) - np.argmax(part))
  File "<__array_function__ internals>", line 5, in argmin
  File "/usr/lib/python3/dist-packages/numpy/core/fromnumeric.py", line 1276, in argmin
    return _wrapfunc(a, 'argmin', axis=axis, out=out)
  File "/usr/lib/python3/dist-packages/numpy/core/fromnumeric.py", line 57, in _wrapfunc
    return bound(*args, **kwds)
ValueError: attempt to get argmin of an empty sequence
2025-11-07 08:38:41,655 - linien_server.cli - INFO - Stopping Linien server
2025-11-07 08:38:41,762 - linien_server.cli - INFO - Stopped Linien server
2025-11-07 08:38:44,857 - linien_server.cli - DEBUG - Copied linien-server.service to /etc/systemd/system
2025-11-07 08:38:44,858 - linien_server.cli - INFO - Starting Linien server
2025-11-07 08:38:44,928 - linien_server.cli - INFO - Started Linien server
2025-11-07 08:39:01,096 - linien_server.parameters - INFO - Restoring parameters from /root/.local/share/linien/parameters.json
2025-11-07 08:39:01,102 - linien_server.parameters - INFO - Restored parameters from /root/.local/share/linien/parameters.json
2025-11-07 08:39:01,105 - linien_common.influxdb - INFO - Saved InfluxDB credentials to /root/.local/share/linien/influxdb_credentials.json
2025-11-07 08:39:01,296 - linien_server.acquisition - INFO - Using fpgautil to deploy gateware.
2025-11-07 08:39:01,426 - linien_server.server - DEBUG - Ping  1
2025-11-07 08:39:01,479 - linien_server.mdio_tool - INFO - Disabling ethernet blinking with mdio-tool at /usr/local/lib/python3.10/dist-packages/linien_server/mdio-tool
2025-11-07 08:39:01,523 - linien_server.server - INFO - Starting server.
2025-11-07 08:39:02,453 - linien_server.server - DEBUG - Ping  2
2025-11-07 08:39:03,467 - linien_server.server - DEBUG - Ping  3
2025-11-07 08:39:03,489 - linien_server.server - DEBUG - Further pings will be suppressed
2025-11-07 08:39:34,853 - linien_server.autolock.autolock - DEBUG - Initialize Autolock
2025-11-07 08:39:34,878 - linien_server.autolock.autolock - DEBUG - Start the autolock
2025-11-07 08:39:34,905 - linien_server.autolock.autolock - DEBUG - (x0, x1) = (800,1000)
2025-11-07 08:39:34,931 - linien_server.autolock.autolock - DEBUG - Start autolock with mode 1
2025-11-07 08:39:35,157 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-07 08:39:35,159 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-07 08:39:35,161 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-07 08:39:35,257 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-07 08:39:35,285 - linien_server.autolock.robust - ERROR - Not enough spectra collected:2 of 5
2025-11-07 08:39:35,541 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-07 08:39:35,543 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-07 08:39:35,545 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-07 08:39:35,639 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-07 08:39:35,667 - linien_server.autolock.robust - ERROR - Not enough spectra collected:3 of 5
2025-11-07 08:39:35,942 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-07 08:39:35,946 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-07 08:39:35,948 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-07 08:39:36,044 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-07 08:39:36,076 - linien_server.autolock.robust - ERROR - Not enough spectra collected:4 of 5
2025-11-07 08:39:36,340 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-07 08:39:36,342 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-07 08:39:36,345 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-07 08:39:36,440 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-07 08:39:36,468 - linien_server.autolock.robust - DEBUG - enough spectra!, calculate
2025-11-07 08:39:36,473 - linien_server.autolock.robust - DEBUG - Saved new robust_spectra.npy and target_idxs.npy
2025-11-07 08:39:36,638 - linien_server.autolock.autolock - ERROR - Error while handling new spectrum
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/autolock.py", line 212, in react_to_new_spectrum
    return self.algorithm.handle_new_spectrum(combined_error_signal)
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/robust.py", line 106, in handle_new_spectrum
    description, final_wait_time, time_scale = calculate_autolock_instructions(
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/robust.py", line 185, in calculate_autolock_instructions
    round(np.mean([get_time_scale(spectrum, target_idxs) for spectrum in spectra]))
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/robust.py", line 185, in <listcomp>
    round(np.mean([get_time_scale(spectrum, target_idxs) for spectrum in spectra]))
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/utils.py", line 131, in get_time_scale
    return np.abs(np.argmin(part) - np.argmax(part))
  File "<__array_function__ internals>", line 5, in argmin
  File "/usr/lib/python3/dist-packages/numpy/core/fromnumeric.py", line 1276, in argmin
    return _wrapfunc(a, 'argmin', axis=axis, out=out)
  File "/usr/lib/python3/dist-packages/numpy/core/fromnumeric.py", line 57, in _wrapfunc
    return bound(*args, **kwds)
ValueError: attempt to get argmin of an empty sequence
2025-11-07 08:44:27,892 - linien_server.autolock.autolock - DEBUG - Initialize Autolock
2025-11-07 08:44:27,919 - linien_server.autolock.autolock - DEBUG - Start the autolock
2025-11-07 08:44:27,937 - linien_server.autolock.autolock - DEBUG - (x0, x1) = (1450,1600)
2025-11-07 08:44:28,001 - linien_server.autolock.autolock - DEBUG - Start autolock with mode 1
2025-11-07 08:44:28,450 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-07 08:44:28,452 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-07 08:44:28,454 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-07 08:44:28,554 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-07 08:44:28,582 - linien_server.autolock.robust - ERROR - Not enough spectra collected:2 of 5
2025-11-07 08:44:28,789 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-07 08:44:28,791 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-07 08:44:28,794 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-07 08:44:28,894 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-07 08:44:28,922 - linien_server.autolock.robust - ERROR - Not enough spectra collected:3 of 5
2025-11-07 08:44:29,180 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-07 08:44:29,182 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-07 08:44:29,184 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-07 08:44:29,283 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-07 08:44:29,312 - linien_server.autolock.robust - ERROR - Not enough spectra collected:4 of 5
2025-11-07 08:44:29,571 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-07 08:44:29,574 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-07 08:44:29,576 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-07 08:44:29,675 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-07 08:44:29,704 - linien_server.autolock.robust - DEBUG - enough spectra!, calculate
2025-11-07 08:44:29,709 - linien_server.autolock.robust - DEBUG - Saved new robust_spectra.npy and target_idxs.npy
2025-11-07 08:44:29,874 - linien_server.autolock.autolock - ERROR - Error while handling new spectrum
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/autolock.py", line 212, in react_to_new_spectrum
    return self.algorithm.handle_new_spectrum(combined_error_signal)
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/robust.py", line 106, in handle_new_spectrum
    description, final_wait_time, time_scale = calculate_autolock_instructions(
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/robust.py", line 185, in calculate_autolock_instructions
    round(np.mean([get_time_scale(spectrum, target_idxs) for spectrum in spectra]))
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/robust.py", line 185, in <listcomp>
    round(np.mean([get_time_scale(spectrum, target_idxs) for spectrum in spectra]))
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/utils.py", line 131, in get_time_scale
    return np.abs(np.argmin(part) - np.argmax(part))
  File "<__array_function__ internals>", line 5, in argmin
  File "/usr/lib/python3/dist-packages/numpy/core/fromnumeric.py", line 1276, in argmin
    return _wrapfunc(a, 'argmin', axis=axis, out=out)
  File "/usr/lib/python3/dist-packages/numpy/core/fromnumeric.py", line 57, in _wrapfunc
    return bound(*args, **kwds)
ValueError: attempt to get argmin of an empty sequence
2025-11-07 09:25:37,793 - linien_server.autolock.autolock - DEBUG - Initialize Autolock
2025-11-07 09:25:37,814 - linien_server.autolock.autolock - DEBUG - Start the autolock
2025-11-07 09:25:37,848 - linien_server.autolock.autolock - DEBUG - (x0, x1) = (1350,1500)
2025-11-07 09:25:37,861 - linien_server.autolock.autolock - DEBUG - Start autolock with mode 1
2025-11-07 09:25:38,251 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-07 09:25:38,253 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-07 09:25:38,255 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-07 09:25:38,351 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-07 09:25:38,379 - linien_server.autolock.robust - ERROR - Not enough spectra collected:2 of 5
2025-11-07 09:25:38,643 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-07 09:25:38,645 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-07 09:25:38,647 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-07 09:25:38,742 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-07 09:25:38,770 - linien_server.autolock.robust - ERROR - Not enough spectra collected:3 of 5
2025-11-07 09:25:39,036 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-07 09:25:39,038 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-07 09:25:39,040 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-07 09:25:39,136 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-07 09:25:39,164 - linien_server.autolock.robust - ERROR - Not enough spectra collected:4 of 5
2025-11-07 09:25:39,431 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-07 09:25:39,433 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-07 09:25:39,435 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-07 09:25:39,531 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-07 09:25:39,559 - linien_server.autolock.robust - DEBUG - enough spectra!, calculate
2025-11-07 09:25:39,564 - linien_server.autolock.robust - DEBUG - Saved new robust_spectra.npy and target_idxs.npy
2025-11-07 09:25:39,729 - linien_server.autolock.autolock - ERROR - Error while handling new spectrum
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/autolock.py", line 212, in react_to_new_spectrum
    return self.algorithm.handle_new_spectrum(combined_error_signal)
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/robust.py", line 106, in handle_new_spectrum
    description, final_wait_time, time_scale = calculate_autolock_instructions(
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/robust.py", line 185, in calculate_autolock_instructions
    round(np.mean([get_time_scale(spectrum, target_idxs) for spectrum in spectra]))
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/robust.py", line 185, in <listcomp>
    round(np.mean([get_time_scale(spectrum, target_idxs) for spectrum in spectra]))
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/utils.py", line 131, in get_time_scale
    return np.abs(np.argmin(part) - np.argmax(part))
  File "<__array_function__ internals>", line 5, in argmin
  File "/usr/lib/python3/dist-packages/numpy/core/fromnumeric.py", line 1276, in argmin
    return _wrapfunc(a, 'argmin', axis=axis, out=out)
  File "/usr/lib/python3/dist-packages/numpy/core/fromnumeric.py", line 57, in _wrapfunc
    return bound(*args, **kwds)
ValueError: attempt to get argmin of an empty sequence
2025-11-07 09:33:23,578 - linien_server.autolock.autolock - DEBUG - Initialize Autolock
2025-11-07 09:33:23,579 - linien_server.autolock.autolock - DEBUG - Start the autolock
2025-11-07 09:33:23,581 - linien_server.autolock.autolock - DEBUG - (x0, x1) = (850,1000)
2025-11-07 09:33:23,601 - linien_server.autolock.autolock - DEBUG - Start autolock with mode 1
2025-11-07 09:33:23,677 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-07 09:33:23,681 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-07 09:33:23,685 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-07 09:33:23,781 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-07 09:33:23,809 - linien_server.autolock.robust - ERROR - Not enough spectra collected:2 of 5
2025-11-07 09:33:24,071 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-07 09:33:24,074 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-07 09:33:24,076 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-07 09:33:24,170 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-07 09:33:24,198 - linien_server.autolock.robust - ERROR - Not enough spectra collected:3 of 5
2025-11-07 09:33:24,468 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-07 09:33:24,471 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-07 09:33:24,473 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-07 09:33:24,568 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-07 09:33:24,596 - linien_server.autolock.robust - ERROR - Not enough spectra collected:4 of 5
2025-11-07 09:33:24,910 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-07 09:33:24,912 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-07 09:33:24,915 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-07 09:33:25,014 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-07 09:33:25,043 - linien_server.autolock.robust - DEBUG - enough spectra!, calculate
2025-11-07 09:33:25,048 - linien_server.autolock.robust - DEBUG - Saved new robust_spectra.npy and target_idxs.npy
2025-11-07 09:33:25,213 - linien_server.autolock.autolock - ERROR - Error while handling new spectrum
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/autolock.py", line 212, in react_to_new_spectrum
    return self.algorithm.handle_new_spectrum(combined_error_signal)
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/robust.py", line 106, in handle_new_spectrum
    description, final_wait_time, time_scale = calculate_autolock_instructions(
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/robust.py", line 185, in calculate_autolock_instructions
    round(np.mean([get_time_scale(spectrum, target_idxs) for spectrum in spectra]))
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/robust.py", line 185, in <listcomp>
    round(np.mean([get_time_scale(spectrum, target_idxs) for spectrum in spectra]))
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/utils.py", line 131, in get_time_scale
    return np.abs(np.argmin(part) - np.argmax(part))
  File "<__array_function__ internals>", line 5, in argmin
  File "/usr/lib/python3/dist-packages/numpy/core/fromnumeric.py", line 1276, in argmin
    return _wrapfunc(a, 'argmin', axis=axis, out=out)
  File "/usr/lib/python3/dist-packages/numpy/core/fromnumeric.py", line 57, in _wrapfunc
    return bound(*args, **kwds)
ValueError: attempt to get argmin of an empty sequence
2025-11-07 09:55:07,204 - linien_server.autolock.autolock - DEBUG - Initialize Autolock
2025-11-07 09:55:07,229 - linien_server.autolock.autolock - DEBUG - Start the autolock
2025-11-07 09:55:07,246 - linien_server.autolock.autolock - DEBUG - (x0, x1) = (850,950)
2025-11-07 09:55:07,268 - linien_server.autolock.autolock - DEBUG - Start autolock with mode 1
2025-11-07 09:55:07,321 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-07 09:55:07,324 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-07 09:55:07,326 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-07 09:55:07,426 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-07 09:55:07,454 - linien_server.autolock.robust - ERROR - Not enough spectra collected:2 of 5
2025-11-07 09:55:07,712 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-07 09:55:07,714 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-07 09:55:07,717 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-07 09:55:07,811 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-07 09:55:07,839 - linien_server.autolock.robust - ERROR - Not enough spectra collected:3 of 5
2025-11-07 09:55:08,103 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-07 09:55:08,106 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-07 09:55:08,108 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-07 09:55:08,207 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-07 09:55:08,236 - linien_server.autolock.robust - ERROR - Not enough spectra collected:4 of 5
2025-11-07 09:55:08,488 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-07 09:55:08,490 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-07 09:55:08,491 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-07 09:55:08,587 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-07 09:55:08,615 - linien_server.autolock.robust - DEBUG - enough spectra!, calculate
2025-11-07 09:55:08,620 - linien_server.autolock.robust - DEBUG - Saved new robust_spectra.npy and target_idxs.npy
2025-11-07 09:55:08,785 - linien_server.autolock.autolock - ERROR - Error while handling new spectrum
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/autolock.py", line 212, in react_to_new_spectrum
    return self.algorithm.handle_new_spectrum(combined_error_signal)
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/robust.py", line 106, in handle_new_spectrum
    description, final_wait_time, time_scale = calculate_autolock_instructions(
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/robust.py", line 185, in calculate_autolock_instructions
    round(np.mean([get_time_scale(spectrum, target_idxs) for spectrum in spectra]))
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/robust.py", line 185, in <listcomp>
    round(np.mean([get_time_scale(spectrum, target_idxs) for spectrum in spectra]))
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/utils.py", line 131, in get_time_scale
    return np.abs(np.argmin(part) - np.argmax(part))
  File "<__array_function__ internals>", line 5, in argmin
  File "/usr/lib/python3/dist-packages/numpy/core/fromnumeric.py", line 1276, in argmin
    return _wrapfunc(a, 'argmin', axis=axis, out=out)
  File "/usr/lib/python3/dist-packages/numpy/core/fromnumeric.py", line 57, in _wrapfunc
    return bound(*args, **kwds)
ValueError: attempt to get argmin of an empty sequence
2025-11-07 09:57:49,332 - linien_server.autolock.autolock - DEBUG - Initialize Autolock
2025-11-07 09:57:49,357 - linien_server.autolock.autolock - DEBUG - Start the autolock
2025-11-07 09:57:49,379 - linien_server.autolock.autolock - DEBUG - (x0, x1) = (1400,1550)
2025-11-07 09:57:49,425 - linien_server.autolock.autolock - DEBUG - Start autolock with mode 1
2025-11-07 09:57:49,500 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-07 09:57:49,504 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-07 09:57:49,507 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-07 09:57:49,609 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-07 09:57:49,638 - linien_server.autolock.robust - ERROR - Not enough spectra collected:2 of 5
2025-11-07 09:57:49,891 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-07 09:57:49,894 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-07 09:57:49,895 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-07 09:57:49,994 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-07 09:57:50,023 - linien_server.autolock.robust - ERROR - Not enough spectra collected:3 of 5
2025-11-07 09:57:50,280 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-07 09:57:50,283 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-07 09:57:50,285 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-07 09:57:50,384 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-07 09:57:50,412 - linien_server.autolock.robust - ERROR - Not enough spectra collected:4 of 5
2025-11-07 09:57:50,676 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-07 09:57:50,678 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-07 09:57:50,681 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-07 09:57:50,776 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-07 09:57:50,804 - linien_server.autolock.robust - DEBUG - enough spectra!, calculate
2025-11-07 09:57:50,809 - linien_server.autolock.robust - DEBUG - Saved new robust_spectra.npy and target_idxs.npy
2025-11-07 09:57:50,974 - linien_server.autolock.autolock - ERROR - Error while handling new spectrum
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/autolock.py", line 212, in react_to_new_spectrum
    return self.algorithm.handle_new_spectrum(combined_error_signal)
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/robust.py", line 106, in handle_new_spectrum
    description, final_wait_time, time_scale = calculate_autolock_instructions(
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/robust.py", line 185, in calculate_autolock_instructions
    round(np.mean([get_time_scale(spectrum, target_idxs) for spectrum in spectra]))
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/robust.py", line 185, in <listcomp>
    round(np.mean([get_time_scale(spectrum, target_idxs) for spectrum in spectra]))
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/utils.py", line 131, in get_time_scale
    return np.abs(np.argmin(part) - np.argmax(part))
  File "<__array_function__ internals>", line 5, in argmin
  File "/usr/lib/python3/dist-packages/numpy/core/fromnumeric.py", line 1276, in argmin
    return _wrapfunc(a, 'argmin', axis=axis, out=out)
  File "/usr/lib/python3/dist-packages/numpy/core/fromnumeric.py", line 57, in _wrapfunc
    return bound(*args, **kwds)
ValueError: attempt to get argmin of an empty sequence
2025-11-07 10:32:21,954 - linien_server.autolock.autolock - DEBUG - Initialize Autolock
2025-11-07 10:32:21,979 - linien_server.autolock.autolock - DEBUG - Start the autolock
2025-11-07 10:32:22,006 - linien_server.autolock.autolock - DEBUG - (x0, x1) = (800,950)
2025-11-07 10:32:22,042 - linien_server.autolock.autolock - DEBUG - Start autolock with mode 1
2025-11-07 10:32:22,249 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-07 10:32:22,251 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-07 10:32:22,252 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-07 10:32:22,349 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-07 10:32:22,377 - linien_server.autolock.robust - ERROR - Not enough spectra collected:2 of 5
2025-11-07 10:32:22,582 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-07 10:32:22,584 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-07 10:32:22,587 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-07 10:32:22,681 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-07 10:32:22,709 - linien_server.autolock.robust - ERROR - Not enough spectra collected:3 of 5
2025-11-07 10:32:22,978 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-07 10:32:22,982 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-07 10:32:22,985 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-07 10:32:23,081 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-07 10:32:23,108 - linien_server.autolock.robust - ERROR - Not enough spectra collected:4 of 5
2025-11-07 10:32:23,376 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-07 10:32:23,379 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-07 10:32:23,381 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-07 10:32:23,476 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-07 10:32:23,504 - linien_server.autolock.robust - DEBUG - enough spectra!, calculate
2025-11-07 10:32:23,509 - linien_server.autolock.robust - DEBUG - Saved new robust_spectra.npy and target_idxs.npy
2025-11-07 10:32:23,675 - linien_server.autolock.autolock - ERROR - Error while handling new spectrum
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/autolock.py", line 212, in react_to_new_spectrum
    return self.algorithm.handle_new_spectrum(combined_error_signal)
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/robust.py", line 106, in handle_new_spectrum
    description, final_wait_time, time_scale = calculate_autolock_instructions(
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/robust.py", line 185, in calculate_autolock_instructions
    round(np.mean([get_time_scale(spectrum, target_idxs) for spectrum in spectra]))
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/robust.py", line 185, in <listcomp>
    round(np.mean([get_time_scale(spectrum, target_idxs) for spectrum in spectra]))
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/utils.py", line 131, in get_time_scale
    return np.abs(np.argmin(part) - np.argmax(part))
  File "<__array_function__ internals>", line 5, in argmin
  File "/usr/lib/python3/dist-packages/numpy/core/fromnumeric.py", line 1276, in argmin
    return _wrapfunc(a, 'argmin', axis=axis, out=out)
  File "/usr/lib/python3/dist-packages/numpy/core/fromnumeric.py", line 57, in _wrapfunc
    return bound(*args, **kwds)
ValueError: attempt to get argmin of an empty sequence
2025-11-07 10:54:49,619 - linien_server.autolock.autolock - DEBUG - Initialize Autolock
2025-11-07 10:54:49,624 - linien_server.autolock.autolock - DEBUG - Start the autolock
2025-11-07 10:54:49,625 - linien_server.autolock.autolock - DEBUG - (x0, x1) = (1450,1550)
2025-11-07 10:54:49,629 - linien_server.autolock.autolock - DEBUG - Start autolock with mode 1
2025-11-07 10:54:49,805 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-07 10:54:49,808 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-07 10:54:49,810 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-07 10:54:49,908 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-07 10:54:49,937 - linien_server.autolock.robust - ERROR - Not enough spectra collected:2 of 5
2025-11-07 10:54:49,993 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-07 10:54:49,994 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-07 10:54:49,995 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-07 10:54:50,096 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-07 10:54:50,124 - linien_server.autolock.robust - ERROR - Not enough spectra collected:3 of 5
2025-11-07 10:54:50,180 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-07 10:54:50,181 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-07 10:54:50,183 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-07 10:54:50,284 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-07 10:54:50,313 - linien_server.autolock.robust - ERROR - Not enough spectra collected:4 of 5
2025-11-07 10:54:50,368 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-07 10:54:50,370 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-07 10:54:50,371 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-07 10:54:50,472 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-07 10:54:50,501 - linien_server.autolock.robust - DEBUG - enough spectra!, calculate
2025-11-07 10:54:50,507 - linien_server.autolock.robust - DEBUG - Saved new robust_spectra.npy and target_idxs.npy
2025-11-07 10:54:50,676 - linien_server.autolock.robust - DEBUG - x scale is 42
2025-11-07 10:54:50,857 - linien_server.autolock.robust - DEBUG - Try out tolerance 0.95
2025-11-07 10:54:50,860 - linien_server.autolock.robust - DEBUG - final wait time is 1 samples
2025-11-07 10:54:51,027 - linien_server.autolock.robust - DEBUG - Try out tolerance 0.9
2025-11-07 10:54:51,032 - linien_server.autolock.robust - DEBUG - final wait time is 21 samples
2025-11-07 10:54:51,198 - linien_server.autolock.robust - DEBUG - Try out tolerance 0.85
2025-11-07 10:54:51,203 - linien_server.autolock.robust - DEBUG - final wait time is 24 samples
2025-11-07 10:54:51,360 - linien_server.autolock.robust - DEBUG - Try out tolerance 0.8
2025-11-07 10:54:51,366 - linien_server.autolock.robust - DEBUG - final wait time is 27 samples
2025-11-07 10:54:51,514 - linien_server.autolock.robust - DEBUG - Description is [(914, -786), (379, 510)]
2025-11-07 10:54:51,515 - linien_server.autolock.robust - DEBUG - Calculation of autolock description took 1.012136459350586
2025-11-07 10:54:51,576 - linien_server.server - ERROR - incorrect data received for lock state, ignoring!
2025-11-07 10:54:51,679 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-07 10:54:51,685 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-07 10:54:51,687 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-07 10:54:51,690 - linien_server.autolock.autolock - DEBUG - after lock
2025-11-07 12:22:06,524 - linien_server.autolock.autolock - DEBUG - Initialize Autolock
2025-11-07 12:22:06,529 - linien_server.autolock.autolock - DEBUG - Start the autolock
2025-11-07 12:22:06,531 - linien_server.autolock.autolock - DEBUG - (x0, x1) = (1000,1200)
2025-11-07 12:22:06,535 - linien_server.autolock.autolock - DEBUG - Start autolock with mode 1
2025-11-07 12:22:06,742 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-07 12:22:06,745 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-07 12:22:06,747 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-07 12:22:06,843 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-07 12:22:06,871 - linien_server.autolock.robust - ERROR - Not enough spectra collected:2 of 5
2025-11-07 12:22:06,926 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-07 12:22:06,928 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-07 12:22:06,929 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-07 12:22:07,025 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-07 12:22:07,053 - linien_server.autolock.robust - ERROR - Not enough spectra collected:3 of 5
2025-11-07 12:22:07,108 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-07 12:22:07,110 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-07 12:22:07,111 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-07 12:22:07,206 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-07 12:22:07,234 - linien_server.autolock.robust - ERROR - Not enough spectra collected:4 of 5
2025-11-07 12:22:07,290 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-07 12:22:07,291 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-07 12:22:07,292 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-07 12:22:07,388 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-07 12:22:07,416 - linien_server.autolock.robust - DEBUG - enough spectra!, calculate
2025-11-07 12:22:07,421 - linien_server.autolock.robust - DEBUG - Saved new robust_spectra.npy and target_idxs.npy
2025-11-07 12:22:07,586 - linien_server.autolock.autolock - ERROR - Error while handling new spectrum
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/autolock.py", line 212, in react_to_new_spectrum
    return self.algorithm.handle_new_spectrum(combined_error_signal)
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/robust.py", line 106, in handle_new_spectrum
    description, final_wait_time, time_scale = calculate_autolock_instructions(
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/robust.py", line 185, in calculate_autolock_instructions
    round(np.mean([get_time_scale(spectrum, target_idxs) for spectrum in spectra]))
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/robust.py", line 185, in <listcomp>
    round(np.mean([get_time_scale(spectrum, target_idxs) for spectrum in spectra]))
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/utils.py", line 131, in get_time_scale
    return np.abs(np.argmin(part) - np.argmax(part))
  File "<__array_function__ internals>", line 5, in argmin
  File "/usr/lib/python3/dist-packages/numpy/core/fromnumeric.py", line 1276, in argmin
    return _wrapfunc(a, 'argmin', axis=axis, out=out)
  File "/usr/lib/python3/dist-packages/numpy/core/fromnumeric.py", line 57, in _wrapfunc
    return bound(*args, **kwds)
ValueError: attempt to get argmin of an empty sequence
2025-11-07 12:34:52,974 - linien_server.autolock.autolock - DEBUG - Initialize Autolock
2025-11-07 12:34:52,986 - linien_server.autolock.autolock - DEBUG - Start the autolock
2025-11-07 12:34:52,989 - linien_server.autolock.autolock - DEBUG - (x0, x1) = (1650,1800)
2025-11-07 12:34:52,995 - linien_server.autolock.autolock - DEBUG - Start autolock with mode 1
2025-11-07 12:34:53,197 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-07 12:34:53,200 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-07 12:34:53,202 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-07 12:34:53,303 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-07 12:34:53,331 - linien_server.autolock.robust - ERROR - Not enough spectra collected:2 of 5
2025-11-07 12:34:53,468 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-07 12:34:53,470 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-07 12:34:53,472 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-07 12:34:53,571 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-07 12:34:53,600 - linien_server.autolock.robust - ERROR - Not enough spectra collected:3 of 5
2025-11-07 12:34:53,737 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-07 12:34:53,740 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-07 12:34:53,742 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-07 12:34:53,843 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-07 12:34:53,871 - linien_server.autolock.robust - ERROR - Not enough spectra collected:4 of 5
2025-11-07 12:34:53,927 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-07 12:34:53,928 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-07 12:34:53,930 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-07 12:34:54,035 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-07 12:34:54,065 - linien_server.autolock.robust - DEBUG - enough spectra!, calculate
2025-11-07 12:34:54,070 - linien_server.autolock.robust - DEBUG - Saved new robust_spectra.npy and target_idxs.npy
2025-11-07 12:34:54,236 - linien_server.autolock.autolock - ERROR - Error while handling new spectrum
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/autolock.py", line 212, in react_to_new_spectrum
    return self.algorithm.handle_new_spectrum(combined_error_signal)
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/robust.py", line 106, in handle_new_spectrum
    description, final_wait_time, time_scale = calculate_autolock_instructions(
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/robust.py", line 185, in calculate_autolock_instructions
    round(np.mean([get_time_scale(spectrum, target_idxs) for spectrum in spectra]))
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/robust.py", line 185, in <listcomp>
    round(np.mean([get_time_scale(spectrum, target_idxs) for spectrum in spectra]))
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/utils.py", line 131, in get_time_scale
    return np.abs(np.argmin(part) - np.argmax(part))
  File "<__array_function__ internals>", line 5, in argmin
  File "/usr/lib/python3/dist-packages/numpy/core/fromnumeric.py", line 1276, in argmin
    return _wrapfunc(a, 'argmin', axis=axis, out=out)
  File "/usr/lib/python3/dist-packages/numpy/core/fromnumeric.py", line 57, in _wrapfunc
    return bound(*args, **kwds)
ValueError: attempt to get argmin of an empty sequence
2025-11-07 14:03:25,910 - linien_server.cli - INFO - Stopping Linien server
2025-11-07 14:03:26,173 - linien_server.cli - INFO - Stopped Linien server
2025-11-07 14:03:29,473 - linien_server.cli - DEBUG - Copied linien-server.service to /etc/systemd/system
2025-11-07 14:03:29,474 - linien_server.cli - INFO - Starting Linien server
2025-11-07 14:03:29,543 - linien_server.cli - INFO - Started Linien server
2025-11-07 14:03:38,571 - linien_server.cli - DEBUG - Copied linien-server.service to /etc/systemd/system
2025-11-07 14:03:38,574 - linien_server.cli - INFO - Starting Linien server
2025-11-07 14:03:38,642 - linien_server.cli - INFO - Started Linien server
2025-11-07 14:03:49,750 - linien_server.parameters - INFO - Restoring parameters from /root/.local/share/linien/parameters.json
2025-11-07 14:03:49,756 - linien_server.parameters - INFO - Restored parameters from /root/.local/share/linien/parameters.json
2025-11-07 14:03:49,760 - linien_common.influxdb - INFO - Saved InfluxDB credentials to /root/.local/share/linien/influxdb_credentials.json
2025-11-07 14:03:50,009 - linien_server.acquisition - INFO - Using fpgautil to deploy gateware.
2025-11-07 14:03:50,267 - linien_server.server - DEBUG - Ping  1
2025-11-07 14:03:50,316 - linien_server.mdio_tool - INFO - Disabling ethernet blinking with mdio-tool at /usr/local/lib/python3.10/dist-packages/linien_server/mdio-tool
2025-11-07 14:03:50,360 - linien_server.server - INFO - Starting server.
2025-11-07 14:03:51,274 - linien_server.server - DEBUG - Ping  2
2025-11-07 14:03:52,316 - linien_server.server - DEBUG - Ping  3
2025-11-07 14:03:52,330 - linien_server.server - DEBUG - Further pings will be suppressed
2025-11-07 14:06:09,771 - linien_server.autolock.autolock - DEBUG - Initialize Autolock
2025-11-07 14:06:09,773 - linien_server.autolock.autolock - DEBUG - Start the autolock
2025-11-07 14:06:09,774 - linien_server.autolock.autolock - DEBUG - (x0, x1) = (1450,1550)
2025-11-07 14:06:09,779 - linien_server.autolock.autolock - DEBUG - Start autolock with mode 1
2025-11-07 14:06:10,149 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-07 14:06:10,151 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-07 14:06:10,154 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-07 14:06:10,253 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-07 14:06:10,300 - linien_server.autolock.robust - ERROR - Not enough spectra collected:2 of 5
2025-11-07 14:06:10,545 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-07 14:06:10,547 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-07 14:06:10,552 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-07 14:06:10,651 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-07 14:06:10,680 - linien_server.autolock.robust - ERROR - Not enough spectra collected:3 of 5
2025-11-07 14:06:10,930 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-07 14:06:10,933 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-07 14:06:10,934 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-07 14:06:11,034 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-07 14:06:11,062 - linien_server.autolock.robust - ERROR - Not enough spectra collected:4 of 5
2025-11-07 14:06:11,324 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-07 14:06:11,327 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-07 14:06:11,329 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-07 14:06:11,429 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-07 14:06:11,457 - linien_server.autolock.robust - DEBUG - enough spectra!, calculate
2025-11-07 14:06:11,462 - linien_server.autolock.robust - DEBUG - Saved new robust_spectra.npy and target_idxs.npy
2025-11-07 14:06:11,627 - linien_server.autolock.autolock - ERROR - Error while handling new spectrum
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/autolock.py", line 212, in react_to_new_spectrum
    return self.algorithm.handle_new_spectrum(combined_error_signal)
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/robust.py", line 109, in handle_new_spectrum
    description, final_wait_time, time_scale = calculate_autolock_instructions_v2(
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/robust.py", line 272, in calculate_autolock_instructions_v2
    round(np.mean([get_time_scale(spectrum, target_idxs) for spectrum in spectra]))
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/robust.py", line 272, in <listcomp>
    round(np.mean([get_time_scale(spectrum, target_idxs) for spectrum in spectra]))
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/utils.py", line 131, in get_time_scale
    return np.abs(np.argmin(part) - np.argmax(part))
  File "<__array_function__ internals>", line 5, in argmin
  File "/usr/lib/python3/dist-packages/numpy/core/fromnumeric.py", line 1276, in argmin
    return _wrapfunc(a, 'argmin', axis=axis, out=out)
  File "/usr/lib/python3/dist-packages/numpy/core/fromnumeric.py", line 57, in _wrapfunc
    return bound(*args, **kwds)
ValueError: attempt to get argmin of an empty sequence
2025-11-07 14:07:02,648 - linien_server.autolock.autolock - DEBUG - Initialize Autolock
2025-11-07 14:07:02,671 - linien_server.autolock.autolock - DEBUG - Start the autolock
2025-11-07 14:07:02,673 - linien_server.autolock.autolock - DEBUG - (x0, x1) = (1400,1600)
2025-11-07 14:07:02,693 - linien_server.autolock.autolock - DEBUG - Start autolock with mode 1
2025-11-07 14:07:02,748 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-07 14:07:02,750 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-07 14:07:02,752 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-07 14:07:02,852 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-07 14:07:02,880 - linien_server.autolock.robust - ERROR - Not enough spectra collected:2 of 5
2025-11-07 14:07:03,143 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-07 14:07:03,146 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-07 14:07:03,148 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-07 14:07:03,243 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-07 14:07:03,271 - linien_server.autolock.robust - ERROR - Not enough spectra collected:3 of 5
2025-11-07 14:07:03,536 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-07 14:07:03,538 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-07 14:07:03,540 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-07 14:07:03,636 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-07 14:07:03,664 - linien_server.autolock.robust - ERROR - Not enough spectra collected:4 of 5
2025-11-07 14:07:03,919 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-07 14:07:03,924 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-07 14:07:03,927 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-07 14:07:04,023 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-07 14:07:04,051 - linien_server.autolock.robust - DEBUG - enough spectra!, calculate
2025-11-07 14:07:04,056 - linien_server.autolock.robust - DEBUG - Saved new robust_spectra.npy and target_idxs.npy
2025-11-07 14:07:04,221 - linien_server.autolock.autolock - ERROR - Error while handling new spectrum
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/autolock.py", line 212, in react_to_new_spectrum
    return self.algorithm.handle_new_spectrum(combined_error_signal)
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/robust.py", line 109, in handle_new_spectrum
    description, final_wait_time, time_scale = calculate_autolock_instructions_v2(
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/robust.py", line 272, in calculate_autolock_instructions_v2
    round(np.mean([get_time_scale(spectrum, target_idxs) for spectrum in spectra]))
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/robust.py", line 272, in <listcomp>
    round(np.mean([get_time_scale(spectrum, target_idxs) for spectrum in spectra]))
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/utils.py", line 131, in get_time_scale
    return np.abs(np.argmin(part) - np.argmax(part))
  File "<__array_function__ internals>", line 5, in argmin
  File "/usr/lib/python3/dist-packages/numpy/core/fromnumeric.py", line 1276, in argmin
    return _wrapfunc(a, 'argmin', axis=axis, out=out)
  File "/usr/lib/python3/dist-packages/numpy/core/fromnumeric.py", line 57, in _wrapfunc
    return bound(*args, **kwds)
ValueError: attempt to get argmin of an empty sequence
2025-11-07 14:21:20,796 - linien_server.cli - INFO - Stopping Linien server
2025-11-07 14:21:20,916 - linien_server.cli - INFO - Stopped Linien server
2025-11-07 14:21:24,123 - linien_server.cli - DEBUG - Copied linien-server.service to /etc/systemd/system
2025-11-07 14:21:24,124 - linien_server.cli - INFO - Starting Linien server
2025-11-07 14:21:24,194 - linien_server.cli - INFO - Started Linien server
2025-11-07 14:21:34,681 - linien_server.cli - DEBUG - Copied linien-server.service to /etc/systemd/system
2025-11-07 14:21:34,686 - linien_server.cli - INFO - Starting Linien server
2025-11-07 14:21:34,740 - linien_server.cli - INFO - Started Linien server
2025-11-07 14:21:43,100 - linien_server.parameters - INFO - Restoring parameters from /root/.local/share/linien/parameters.json
2025-11-07 14:21:43,106 - linien_server.parameters - INFO - Restored parameters from /root/.local/share/linien/parameters.json
2025-11-07 14:21:43,110 - linien_common.influxdb - INFO - Saved InfluxDB credentials to /root/.local/share/linien/influxdb_credentials.json
2025-11-07 14:21:43,343 - linien_server.acquisition - INFO - Using fpgautil to deploy gateware.
2025-11-07 14:21:43,574 - linien_server.server - DEBUG - Ping  1
2025-11-07 14:21:43,615 - linien_server.mdio_tool - INFO - Disabling ethernet blinking with mdio-tool at /usr/local/lib/python3.10/dist-packages/linien_server/mdio-tool
2025-11-07 14:21:43,634 - linien_server.server - INFO - Starting server.
2025-11-07 14:21:44,595 - linien_server.server - DEBUG - Ping  2
2025-11-07 14:21:45,620 - linien_server.server - DEBUG - Ping  3
2025-11-07 14:21:45,632 - linien_server.server - DEBUG - Further pings will be suppressed
2025-11-07 14:22:05,906 - linien_server.autolock.autolock - DEBUG - Initialize Autolock
2025-11-07 14:22:05,932 - linien_server.autolock.autolock - DEBUG - Start the autolock
2025-11-07 14:22:05,944 - linien_server.autolock.autolock - DEBUG - (x0, x1) = (1750,2000)
2025-11-07 14:22:05,973 - linien_server.autolock.autolock - DEBUG - Start autolock with mode 1
2025-11-07 14:22:06,377 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-07 14:22:06,379 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-07 14:22:06,382 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-07 14:22:06,484 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-07 14:22:06,520 - linien_server.autolock.robust - ERROR - Not enough spectra collected:2 of 5
2025-11-07 14:22:06,768 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-07 14:22:06,771 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-07 14:22:06,773 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-07 14:22:06,874 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-07 14:22:06,903 - linien_server.autolock.robust - ERROR - Not enough spectra collected:3 of 5
2025-11-07 14:22:07,157 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-07 14:22:07,160 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-07 14:22:07,163 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-07 14:22:07,263 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-07 14:22:07,292 - linien_server.autolock.robust - ERROR - Not enough spectra collected:4 of 5
2025-11-07 14:22:07,549 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-07 14:22:07,551 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-07 14:22:07,554 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-07 14:22:07,654 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-07 14:22:07,683 - linien_server.autolock.robust - DEBUG - enough spectra!, calculate
2025-11-07 14:22:07,688 - linien_server.autolock.robust - DEBUG - Saved new robust_spectra.npy and target_idxs.npy
2025-11-07 14:22:07,853 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-07 14:22:07,856 - linien_server.autolock.utils - DEBUG - Spectrum: [ 0 -1 -1  0  0]...[-6 -5 -5 -6 -6]
2025-11-07 14:22:07,857 - linien_server.autolock.utils - DEBUG - Target indices: [1875, 1920]
2025-11-07 14:22:07,859 - linien_server.autolock.autolock - ERROR - Error while handling new spectrum
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/autolock.py", line 212, in react_to_new_spectrum
    return self.algorithm.handle_new_spectrum(combined_error_signal)
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/robust.py", line 109, in handle_new_spectrum
    description, final_wait_time, time_scale = calculate_autolock_instructions_v2(
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/robust.py", line 272, in calculate_autolock_instructions_v2
    round(np.mean([get_time_scale(spectrum, target_idxs) for spectrum in spectra]))
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/robust.py", line 272, in <listcomp>
    round(np.mean([get_time_scale(spectrum, target_idxs) for spectrum in spectra]))
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/utils.py", line 137, in get_time_scale
    return np.abs(np.argmin(part) - np.argmax(part))
  File "<__array_function__ internals>", line 5, in argmin
  File "/usr/lib/python3/dist-packages/numpy/core/fromnumeric.py", line 1276, in argmin
    return _wrapfunc(a, 'argmin', axis=axis, out=out)
  File "/usr/lib/python3/dist-packages/numpy/core/fromnumeric.py", line 57, in _wrapfunc
    return bound(*args, **kwds)
ValueError: attempt to get argmin of an empty sequence
2025-11-07 14:27:08,179 - linien_server.cli - INFO - Stopping Linien server
2025-11-07 14:27:08,304 - linien_server.cli - INFO - Stopped Linien server
2025-11-07 14:27:11,615 - linien_server.cli - DEBUG - Copied linien-server.service to /etc/systemd/system
2025-11-07 14:27:11,616 - linien_server.cli - INFO - Starting Linien server
2025-11-07 14:27:11,686 - linien_server.cli - INFO - Started Linien server
2025-11-07 14:27:20,139 - linien_server.cli - DEBUG - Copied linien-server.service to /etc/systemd/system
2025-11-07 14:27:20,141 - linien_server.cli - INFO - Starting Linien server
2025-11-07 14:27:20,207 - linien_server.cli - INFO - Started Linien server
2025-11-07 14:27:57,709 - linien_server.cli - DEBUG - Copied linien-server.service to /etc/systemd/system
2025-11-07 14:27:57,711 - linien_server.cli - INFO - Starting Linien server
2025-11-07 14:27:57,771 - linien_server.cli - INFO - Started Linien server
2025-11-07 14:29:11,442 - linien_server.cli - INFO - Stopping Linien server
2025-11-07 14:29:11,494 - linien_server.cli - INFO - Stopped Linien server
2025-11-07 14:29:14,589 - linien_server.cli - DEBUG - Copied linien-server.service to /etc/systemd/system
2025-11-07 14:29:14,591 - linien_server.cli - INFO - Starting Linien server
2025-11-07 14:29:14,656 - linien_server.cli - INFO - Started Linien server
2025-11-07 14:29:23,974 - linien_server.cli - DEBUG - Copied linien-server.service to /etc/systemd/system
2025-11-07 14:29:23,975 - linien_server.cli - INFO - Starting Linien server
2025-11-07 14:29:24,033 - linien_server.cli - INFO - Started Linien server
2025-11-07 14:31:53,983 - linien_server.cli - INFO - Stopping Linien server
2025-11-07 14:31:54,034 - linien_server.cli - INFO - Stopped Linien server
2025-11-07 14:31:57,183 - linien_server.cli - DEBUG - Copied linien-server.service to /etc/systemd/system
2025-11-07 14:31:57,185 - linien_server.cli - INFO - Starting Linien server
2025-11-07 14:31:57,249 - linien_server.cli - INFO - Started Linien server
2025-11-07 14:32:07,447 - linien_server.cli - DEBUG - Copied linien-server.service to /etc/systemd/system
2025-11-07 14:32:07,449 - linien_server.cli - INFO - Starting Linien server
2025-11-07 14:32:07,534 - linien_server.cli - INFO - Started Linien server
2025-11-07 14:32:14,314 - linien_server.parameters - INFO - Restoring parameters from /root/.local/share/linien/parameters.json
2025-11-07 14:32:14,318 - linien_server.parameters - INFO - Restored parameters from /root/.local/share/linien/parameters.json
2025-11-07 14:32:14,322 - linien_common.influxdb - INFO - Saved InfluxDB credentials to /root/.local/share/linien/influxdb_credentials.json
2025-11-07 14:32:14,512 - linien_server.acquisition - INFO - Using fpgautil to deploy gateware.
2025-11-07 14:32:14,648 - linien_server.server - DEBUG - Ping  1
2025-11-07 14:32:14,691 - linien_server.mdio_tool - INFO - Disabling ethernet blinking with mdio-tool at /usr/local/lib/python3.10/dist-packages/linien_server/mdio-tool
2025-11-07 14:32:14,718 - linien_server.server - INFO - Starting server.
2025-11-07 14:32:15,672 - linien_server.server - DEBUG - Ping  2
2025-11-07 14:32:16,704 - linien_server.server - DEBUG - Ping  3
2025-11-07 14:32:16,718 - linien_server.server - DEBUG - Further pings will be suppressed
2025-11-07 14:32:40,363 - linien_server.autolock.autolock - DEBUG - Initialize Autolock
2025-11-07 14:32:40,377 - linien_server.autolock.autolock - DEBUG - Start the autolock
2025-11-07 14:32:40,381 - linien_server.autolock.autolock - DEBUG - (x0, x1) = (1500,1900)
2025-11-07 14:32:40,387 - linien_server.autolock.autolock - DEBUG - Start autolock with mode 1
2025-11-07 14:32:40,774 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-07 14:32:40,777 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-07 14:32:40,779 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-07 14:32:40,875 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-07 14:32:40,904 - linien_server.autolock.robust - ERROR - Not enough spectra collected:2 of 5
2025-11-07 14:32:41,105 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-07 14:32:41,107 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-07 14:32:41,109 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-07 14:32:41,205 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-07 14:32:41,233 - linien_server.autolock.robust - ERROR - Not enough spectra collected:3 of 5
2025-11-07 14:32:41,496 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-07 14:32:41,498 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-07 14:32:41,500 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-07 14:32:41,598 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-07 14:32:41,626 - linien_server.autolock.robust - ERROR - Not enough spectra collected:4 of 5
2025-11-07 14:32:41,880 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-07 14:32:41,882 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-07 14:32:41,884 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-07 14:32:41,980 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-07 14:32:42,008 - linien_server.autolock.robust - DEBUG - enough spectra!, calculate
2025-11-07 14:32:42,014 - linien_server.autolock.robust - DEBUG - Saved new robust_spectra.npy and target_idxs.npy
2025-11-07 14:32:42,179 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-07 14:32:42,180 - linien_server.autolock.utils - DEBUG - Spectrum length:1691
2025-11-07 14:32:42,183 - linien_server.autolock.utils - DEBUG - Spectrum: [2 2 2 2 2]...[-3 -3 -2 -2 -2]
2025-11-07 14:32:42,184 - linien_server.autolock.utils - DEBUG - Target indices: [1678, 1732]
2025-11-07 14:32:42,185 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-07 14:32:42,186 - linien_server.autolock.utils - DEBUG - Spectrum length:1691
2025-11-07 14:32:42,189 - linien_server.autolock.utils - DEBUG - Spectrum: [4 4 4 4 4]...[-38 -39 -38 -35 -32]
2025-11-07 14:32:42,190 - linien_server.autolock.utils - DEBUG - Target indices: [1678, 1732]
2025-11-07 14:32:42,191 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-07 14:32:42,192 - linien_server.autolock.utils - DEBUG - Spectrum length:1691
2025-11-07 14:32:42,195 - linien_server.autolock.utils - DEBUG - Spectrum: [2 4 4 5 4]...[-39 -39 -36 -35 -35]
2025-11-07 14:32:42,196 - linien_server.autolock.utils - DEBUG - Target indices: [1678, 1732]
2025-11-07 14:32:42,198 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-07 14:32:42,199 - linien_server.autolock.utils - DEBUG - Spectrum length:1691
2025-11-07 14:32:42,201 - linien_server.autolock.utils - DEBUG - Spectrum: [5 5 4 4 4]...[-37 -36 -36 -36 -33]
2025-11-07 14:32:42,203 - linien_server.autolock.utils - DEBUG - Target indices: [1678, 1732]
2025-11-07 14:32:42,204 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-07 14:32:42,205 - linien_server.autolock.utils - DEBUG - Spectrum length:1691
2025-11-07 14:32:42,208 - linien_server.autolock.utils - DEBUG - Spectrum: [4 4 4 4 4]...[-38 -38 -39 -36 -34]
2025-11-07 14:32:42,209 - linien_server.autolock.utils - DEBUG - Target indices: [1678, 1732]
2025-11-07 14:32:42,210 - linien_server.autolock.robust - DEBUG - x scale is 8
2025-11-07 14:32:42,250 - linien_server.autolock.robust - DEBUG - shift prepared spectrum by 2 samples to the left to match the original spectrum
2025-11-07 14:32:42,363 - linien_server.autolock.robust - DEBUG - Detected peaks with (position, height): [(1680, -24), (1549, -46), (1381, 374), (1326, -340), (309, 2), (282, -5), (25, 18)]
2025-11-11 07:37:17,458 - linien_server.cli - INFO - Stopping Linien server
2025-11-11 07:37:17,526 - linien_server.cli - INFO - Stopped Linien server
2025-11-11 07:37:20,524 - linien_server.cli - DEBUG - Copied linien-server.service to /etc/systemd/system
2025-11-11 07:37:20,526 - linien_server.cli - INFO - Starting Linien server
2025-11-11 07:37:20,594 - linien_server.cli - INFO - Started Linien server
2025-11-11 07:37:40,391 - linien_server.parameters - INFO - Restoring parameters from /root/.local/share/linien/parameters.json
2025-11-11 07:37:40,398 - linien_server.parameters - INFO - Restored parameters from /root/.local/share/linien/parameters.json
2025-11-11 07:37:40,403 - linien_common.influxdb - INFO - Saved InfluxDB credentials to /root/.local/share/linien/influxdb_credentials.json
2025-11-11 07:37:41,266 - linien_server.acquisition - INFO - Using fpgautil to deploy gateware.
2025-11-11 07:37:41,522 - linien_server.server - DEBUG - Ping  1
2025-11-11 07:37:41,587 - linien_server.mdio_tool - INFO - Disabling ethernet blinking with mdio-tool at /usr/local/lib/python3.10/dist-packages/linien_server/mdio-tool
2025-11-11 07:37:41,648 - linien_server.server - INFO - Starting server.
2025-11-11 07:37:42,553 - linien_server.server - DEBUG - Ping  2
2025-11-11 07:37:43,563 - linien_server.server - DEBUG - Ping  3
2025-11-11 07:37:43,580 - linien_server.server - DEBUG - Further pings will be suppressed
2025-11-11 07:44:21,315 - linien_server.autolock.autolock - DEBUG - Initialize Autolock
2025-11-11 07:44:21,330 - linien_server.autolock.autolock - DEBUG - Start the autolock
2025-11-11 07:44:21,333 - linien_server.autolock.autolock - DEBUG - (x0, x1) = (1400,1600)
2025-11-11 07:44:21,339 - linien_server.autolock.autolock - DEBUG - Start autolock with mode 1
2025-11-11 07:44:21,735 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-11 07:44:21,739 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-11 07:44:21,741 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-11 07:44:21,840 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-11 07:44:21,888 - linien_server.autolock.robust - ERROR - Not enough spectra collected:2 of 5
2025-11-11 07:44:22,131 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-11 07:44:22,134 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-11 07:44:22,136 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-11 07:44:22,235 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-11 07:44:22,265 - linien_server.autolock.robust - ERROR - Not enough spectra collected:3 of 5
2025-11-11 07:44:22,534 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-11 07:44:22,538 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-11 07:44:22,540 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-11 07:44:22,635 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-11 07:44:22,663 - linien_server.autolock.robust - ERROR - Not enough spectra collected:4 of 5
2025-11-11 07:44:22,969 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-11 07:44:22,971 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-11 07:44:22,974 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-11 07:44:23,069 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-11 07:44:23,097 - linien_server.autolock.robust - DEBUG - enough spectra!, calculate
2025-11-11 07:44:23,099 - linien_server.autolock.robust - DEBUG - Entered in calculate_autolock_instructions_v2
2025-11-11 07:44:23,104 - linien_server.autolock.robust - DEBUG - Saved new robust_spectra.npy and target_idxs.npy
2025-11-11 07:44:23,273 - linien_server.autolock.robust - DEBUG - Saved new robust_spectra_cropped.npy
2025-11-11 07:44:23,274 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-11 07:44:23,276 - linien_server.autolock.utils - DEBUG - Spectrum length:199
2025-11-11 07:44:23,278 - linien_server.autolock.utils - DEBUG - Spectrum: [-11 -11 -11 -11 -11]...[-11 -11 -11 -11 -11]
2025-11-11 07:44:23,280 - linien_server.autolock.utils - DEBUG - Target indices: [1431, 1471]
2025-11-11 07:44:23,281 - linien_server.autolock.autolock - ERROR - Error while handling new spectrum
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/autolock.py", line 212, in react_to_new_spectrum
    return self.algorithm.handle_new_spectrum(combined_error_signal)
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/robust.py", line 109, in handle_new_spectrum
    description, final_wait_time, time_scale = calculate_autolock_instructions_v2(
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/robust.py", line 275, in calculate_autolock_instructions_v2
    round(np.mean([get_time_scale(spectrum, target_idxs) for spectrum in spectra]))
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/robust.py", line 275, in <listcomp>
    round(np.mean([get_time_scale(spectrum, target_idxs) for spectrum in spectra]))
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/utils.py", line 138, in get_time_scale
    return np.abs(np.argmin(part) - np.argmax(part))
  File "<__array_function__ internals>", line 5, in argmin
  File "/usr/lib/python3/dist-packages/numpy/core/fromnumeric.py", line 1276, in argmin
    return _wrapfunc(a, 'argmin', axis=axis, out=out)
  File "/usr/lib/python3/dist-packages/numpy/core/fromnumeric.py", line 57, in _wrapfunc
    return bound(*args, **kwds)
ValueError: attempt to get argmin of an empty sequence
2025-11-11 08:08:00,290 - linien_server.autolock.autolock - DEBUG - Initialize Autolock
2025-11-11 08:08:00,310 - linien_server.autolock.autolock - DEBUG - Start the autolock
2025-11-11 08:08:00,333 - linien_server.autolock.autolock - DEBUG - (x0, x1) = (1400,1600)
2025-11-11 08:08:00,368 - linien_server.autolock.autolock - DEBUG - Start autolock with mode 1
2025-11-11 08:08:00,614 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-11 08:08:00,617 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-11 08:08:00,619 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-11 08:08:00,717 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-11 08:08:00,746 - linien_server.autolock.robust - ERROR - Not enough spectra collected:2 of 5
2025-11-11 08:08:01,005 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-11 08:08:01,007 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-11 08:08:01,009 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-11 08:08:01,107 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-11 08:08:01,136 - linien_server.autolock.robust - ERROR - Not enough spectra collected:3 of 5
2025-11-11 08:08:01,390 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-11 08:08:01,394 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-11 08:08:01,396 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-11 08:08:01,495 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-11 08:08:01,527 - linien_server.autolock.robust - ERROR - Not enough spectra collected:4 of 5
2025-11-11 08:08:01,722 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-11 08:08:01,725 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-11 08:08:01,727 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-11 08:08:01,825 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-11 08:08:01,854 - linien_server.autolock.robust - DEBUG - enough spectra!, calculate
2025-11-11 08:08:01,856 - linien_server.autolock.robust - DEBUG - Entered in calculate_autolock_instructions_v2
2025-11-11 08:08:01,861 - linien_server.autolock.robust - DEBUG - Saved new robust_spectra.npy and target_idxs.npy
2025-11-11 08:08:02,028 - linien_server.autolock.robust - DEBUG - Saved new robust_spectra_cropped.npy
2025-11-11 08:08:02,030 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-11 08:08:02,031 - linien_server.autolock.utils - DEBUG - Spectrum length:2012
2025-11-11 08:08:02,034 - linien_server.autolock.utils - DEBUG - Spectrum: [-1 -1 -1 -1 -1]...[1 0 0 0 0]
2025-11-11 08:08:02,035 - linien_server.autolock.utils - DEBUG - Target indices: [1447, 1487]
2025-11-11 08:08:02,036 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-11 08:08:02,037 - linien_server.autolock.utils - DEBUG - Spectrum length:2012
2025-11-11 08:08:02,041 - linien_server.autolock.utils - DEBUG - Spectrum: [-3 -1 -1 -1 -1]...[0 0 0 0 0]
2025-11-11 08:08:02,043 - linien_server.autolock.utils - DEBUG - Target indices: [1447, 1487]
2025-11-11 08:08:02,044 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-11 08:08:02,047 - linien_server.autolock.utils - DEBUG - Spectrum length:2012
2025-11-11 08:08:02,051 - linien_server.autolock.utils - DEBUG - Spectrum: [0 0 0 0 0]...[0 0 0 0 0]
2025-11-11 08:08:02,053 - linien_server.autolock.utils - DEBUG - Target indices: [1447, 1487]
2025-11-11 08:08:02,055 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-11 08:08:02,056 - linien_server.autolock.utils - DEBUG - Spectrum length:2012
2025-11-11 08:08:02,059 - linien_server.autolock.utils - DEBUG - Spectrum: [-3  0  0  0  0]...[1 1 1 0 1]
2025-11-11 08:08:02,060 - linien_server.autolock.utils - DEBUG - Target indices: [1447, 1487]
2025-11-11 08:08:02,061 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-11 08:08:02,062 - linien_server.autolock.utils - DEBUG - Spectrum length:2012
2025-11-11 08:08:02,065 - linien_server.autolock.utils - DEBUG - Spectrum: [-4  0  0  0  0]...[ 0 -1  0  0 -1]
2025-11-11 08:08:02,067 - linien_server.autolock.utils - DEBUG - Target indices: [1447, 1487]
2025-11-11 08:08:02,068 - linien_server.autolock.robust - DEBUG - x scale is 36
2025-11-11 08:08:02,120 - linien_server.autolock.robust - DEBUG - shift prepared spectrum by 16 samples to the left to match the original spectrum
2025-11-11 08:08:02,223 - linien_server.autolock.robust - DEBUG - Detected peaks with (position, height): [(1474, -962), (1425, 783), (1235, -161), (1063, 1348), (1008, -1248)]
2025-11-11 08:08:02,964 - linien_server.autolock.robust - DEBUG - Determined lock regions: [(1436, 1970), (1434, 1951), (1432, 1963), (1431, 1955), (1431, 1965)]
2025-11-11 08:08:02,966 - linien_server.autolock.robust - DEBUG - Try out tolerance 0.95
2025-11-11 08:08:02,968 - linien_server.autolock.robust - DEBUG - Original peaks: [(1474, -962), (1425, 783), (1235, -161), (1063, 1348), (1008, -1248)]
2025-11-11 08:08:02,969 - linien_server.autolock.robust - DEBUG - Filtered peaks: [(1474, -913.9), (1425, 743.8499999999999), (1235, -152.95), (1063, 1280.6), (1008, -1185.6)]
2025-11-11 08:08:02,970 - linien_server.autolock.robust - DEBUG - Discarded peaks: [(1474, -962), (1425, 783), (1235, -161), (1063, 1348), (1008, -1248)]
2025-11-11 08:08:02,972 - linien_server.autolock.robust - DEBUG - Target peak index in prepared spectrum: 1474
2025-11-11 08:08:02,974 - linien_server.autolock.robust - DEBUG - final wait time is 6 samples
2025-11-11 08:08:02,975 - linien_server.autolock.robust - DEBUG - Generated description: [(907, -1185), (49, 1280), (154, -152), (171, 743), (44, -913)]
2025-11-11 08:08:03,010 - linien_server.autolock.robust - DEBUG - Lock position found at index 1475 for current spectrum
2025-11-11 08:08:03,144 - linien_server.autolock.robust - DEBUG - Try out tolerance 0.9
2025-11-11 08:08:03,146 - linien_server.autolock.robust - DEBUG - Original peaks: [(1474, -962), (1425, 783), (1235, -161), (1063, 1348), (1008, -1248)]
2025-11-11 08:08:03,147 - linien_server.autolock.robust - DEBUG - Filtered peaks: [(1474, -865.8000000000001), (1425, 704.7), (1235, -144.9), (1063, 1213.2), (1008, -1123.2)]
2025-11-11 08:08:03,148 - linien_server.autolock.robust - DEBUG - Discarded peaks: [(1474, -962), (1425, 783), (1235, -161), (1063, 1348), (1008, -1248)]
2025-11-11 08:08:03,150 - linien_server.autolock.robust - DEBUG - Target peak index in prepared spectrum: 1474
2025-11-11 08:08:03,152 - linien_server.autolock.robust - DEBUG - final wait time is 8 samples
2025-11-11 08:08:03,153 - linien_server.autolock.robust - DEBUG - Generated description: [(907, -1123), (49, 1213), (154, -144), (171, 704), (44, -865)]
2025-11-11 08:08:03,188 - linien_server.autolock.robust - DEBUG - Lock position found at index 1475 for current spectrum
2025-11-11 08:08:03,218 - linien_server.autolock.robust - DEBUG - Lock position found at index 1514 for current spectrum
2025-11-11 08:08:03,249 - linien_server.autolock.robust - DEBUG - Lock position found at index 1512 for current spectrum
2025-11-11 08:08:03,282 - linien_server.autolock.robust - DEBUG - Lock position found at index 1515 for current spectrum
2025-11-11 08:08:03,314 - linien_server.autolock.robust - DEBUG - Lock position found at index 1512 for current spectrum
2025-11-11 08:08:03,315 - linien_server.autolock.robust - DEBUG - Description is [(907, -1123), (49, 1213), (154, -144), (171, 704), (44, -865)]
2025-11-11 08:08:03,317 - linien_server.autolock.robust - DEBUG - Calculation of autolock description took 1.4610612392425537
2025-11-11 08:08:03,377 - linien_server.server - ERROR - incorrect data received for lock state, ignoring!
2025-11-11 08:08:03,746 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-11 08:08:03,749 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-11 08:08:03,750 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-11 08:08:03,752 - linien_server.autolock.autolock - DEBUG - after lock
2025-11-11 08:10:32,579 - linien_server.autolock.autolock - DEBUG - Initialize Autolock
2025-11-11 08:10:32,604 - linien_server.autolock.autolock - DEBUG - Start the autolock
2025-11-11 08:10:32,627 - linien_server.autolock.autolock - DEBUG - (x0, x1) = (1300,1500)
2025-11-11 08:10:32,668 - linien_server.autolock.autolock - DEBUG - Start autolock with mode 1
2025-11-11 08:10:32,840 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-11 08:10:32,842 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-11 08:10:32,843 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-11 08:10:32,943 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-11 08:10:32,971 - linien_server.autolock.robust - ERROR - Not enough spectra collected:2 of 5
2025-11-11 08:10:33,228 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-11 08:10:33,231 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-11 08:10:33,233 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-11 08:10:33,328 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-11 08:10:33,356 - linien_server.autolock.robust - ERROR - Not enough spectra collected:3 of 5
2025-11-11 08:10:33,624 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-11 08:10:33,628 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-11 08:10:33,630 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-11 08:10:33,725 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-11 08:10:33,754 - linien_server.autolock.robust - ERROR - Not enough spectra collected:4 of 5
2025-11-11 08:10:33,962 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-11 08:10:33,964 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-11 08:10:33,966 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-11 08:10:34,061 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-11 08:10:34,090 - linien_server.autolock.robust - DEBUG - enough spectra!, calculate
2025-11-11 08:10:34,091 - linien_server.autolock.robust - DEBUG - Entered in calculate_autolock_instructions_v2
2025-11-11 08:10:34,096 - linien_server.autolock.robust - DEBUG - Saved new robust_spectra.npy and target_idxs.npy
2025-11-11 08:10:34,263 - linien_server.autolock.robust - DEBUG - Saved new robust_spectra_cropped.npy
2025-11-11 08:10:34,264 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-11 08:10:34,266 - linien_server.autolock.utils - DEBUG - Spectrum length:1668
2025-11-11 08:10:34,269 - linien_server.autolock.utils - DEBUG - Spectrum: [-3 -3 -2 -2 -3]...[1 1 1 1 1]
2025-11-11 08:10:34,270 - linien_server.autolock.utils - DEBUG - Target indices: [1309, 1354]
2025-11-11 08:10:34,271 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-11 08:10:34,272 - linien_server.autolock.utils - DEBUG - Spectrum length:1668
2025-11-11 08:10:34,275 - linien_server.autolock.utils - DEBUG - Spectrum: [-2 -2 -2 -2 -2]...[-2 -2 -2 -2 -2]
2025-11-11 08:10:34,276 - linien_server.autolock.utils - DEBUG - Target indices: [1309, 1354]
2025-11-11 08:10:34,277 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-11 08:10:34,279 - linien_server.autolock.utils - DEBUG - Spectrum length:1668
2025-11-11 08:10:34,283 - linien_server.autolock.utils - DEBUG - Spectrum: [-2 -2 -2 -2 -2]...[-3 -2 -2 -2 -2]
2025-11-11 08:10:34,285 - linien_server.autolock.utils - DEBUG - Target indices: [1309, 1354]
2025-11-11 08:10:34,288 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-11 08:10:34,290 - linien_server.autolock.utils - DEBUG - Spectrum length:1668
2025-11-11 08:10:34,293 - linien_server.autolock.utils - DEBUG - Spectrum: [-2 -1 -1 -1 -1]...[-2 -2 -1 -2 -2]
2025-11-11 08:10:34,294 - linien_server.autolock.utils - DEBUG - Target indices: [1309, 1354]
2025-11-11 08:10:34,296 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-11 08:10:34,297 - linien_server.autolock.utils - DEBUG - Spectrum length:1668
2025-11-11 08:10:34,299 - linien_server.autolock.utils - DEBUG - Spectrum: [-1 -1 -1 -1 -1]...[-2 -2 -1 -2 -2]
2025-11-11 08:10:34,301 - linien_server.autolock.utils - DEBUG - Target indices: [1309, 1354]
2025-11-11 08:10:34,302 - linien_server.autolock.robust - DEBUG - x scale is 33
2025-11-11 08:10:34,341 - linien_server.autolock.robust - DEBUG - shift prepared spectrum by 15 samples to the left to match the original spectrum
2025-11-11 08:10:34,431 - linien_server.autolock.robust - DEBUG - Detected peaks with (position, height): [(1324, -72), (1054, -887), (1006, 756), (896, -142), (645, 1234), (591, -1146)]
2025-11-11 08:10:34,540 - linien_server.autolock.robust - DEBUG - Determined lock regions: [(1293, 1328), (1293, 1405), (1293, 1405), (1293, 1405), (1293, 1405)]
2025-11-11 08:10:34,541 - linien_server.autolock.robust - DEBUG - Try out tolerance 0.95
2025-11-11 08:10:34,543 - linien_server.autolock.robust - DEBUG - Original peaks: [(1324, -72), (1054, -887), (1006, 756), (896, -142), (645, 1234), (591, -1146)]
2025-11-11 08:10:34,545 - linien_server.autolock.robust - DEBUG - Filtered peaks: [(1324, -68.39999999999999), (1054, -842.65), (1006, 718.1999999999999), (896, -134.9), (645, 1172.3), (591, -1088.7)]
2025-11-11 08:10:34,546 - linien_server.autolock.robust - DEBUG - Discarded peaks: [(1324, -72), (1054, -887), (1006, 756), (896, -142), (645, 1234), (591, -1146)]
2025-11-11 08:10:34,548 - linien_server.autolock.robust - DEBUG - Target peak index in prepared spectrum: 1324
2025-11-11 08:10:34,576 - linien_server.autolock.robust - DEBUG - final wait time is 295 samples
2025-11-11 08:10:34,578 - linien_server.autolock.robust - DEBUG - Generated description: [(531, -1088), (48, 1172), (225, -134), (99, 718), (43, -842), (243, -68)]
2025-11-11 08:10:34,608 - linien_server.autolock.robust - DEBUG - Lock position found at index 1588 for current spectrum
2025-11-11 08:10:34,696 - linien_server.autolock.robust - DEBUG - Lock position found at index 1904 for current spectrum
2025-11-11 08:10:34,728 - linien_server.autolock.robust - DEBUG - Try out tolerance 0.9
2025-11-11 08:10:34,730 - linien_server.autolock.robust - DEBUG - Original peaks: [(1324, -72), (1054, -887), (1006, 756), (896, -142), (645, 1234), (591, -1146)]
2025-11-11 08:10:34,732 - linien_server.autolock.robust - DEBUG - Filtered peaks: [(1324, -64.8), (1054, -798.3000000000001), (1006, 680.4), (896, -127.8), (645, 1110.6000000000001), (591, -1031.4)]
2025-11-11 08:10:34,733 - linien_server.autolock.robust - DEBUG - Discarded peaks: [(1324, -72), (1054, -887), (1006, 756), (896, -142), (645, 1234), (591, -1146)]
2025-11-11 08:10:34,735 - linien_server.autolock.robust - DEBUG - Target peak index in prepared spectrum: 1324
2025-11-11 08:10:34,763 - linien_server.autolock.robust - DEBUG - final wait time is 295 samples
2025-11-11 08:10:34,765 - linien_server.autolock.robust - DEBUG - Generated description: [(531, -1031), (48, 1110), (225, -127), (99, 680), (43, -798), (243, -64)]
2025-11-11 08:10:34,799 - linien_server.autolock.robust - DEBUG - Lock position found at index 1585 for current spectrum
2025-11-11 08:10:34,831 - linien_server.autolock.robust - DEBUG - Lock position found at index 1902 for current spectrum
2025-11-11 08:10:34,861 - linien_server.autolock.robust - DEBUG - Lock position found at index 1903 for current spectrum
2025-11-11 08:10:34,892 - linien_server.autolock.robust - DEBUG - Lock position found at index 1901 for current spectrum
2025-11-11 08:10:34,922 - linien_server.autolock.robust - DEBUG - Lock position found at index 1902 for current spectrum
2025-11-11 08:10:34,923 - linien_server.autolock.robust - DEBUG - Try out tolerance 0.85
2025-11-11 08:10:34,925 - linien_server.autolock.robust - DEBUG - Original peaks: [(1324, -72), (1054, -887), (1006, 756), (896, -142), (645, 1234), (591, -1146)]
2025-11-11 08:10:34,927 - linien_server.autolock.robust - DEBUG - Filtered peaks: [(1324, -61.199999999999996), (1054, -753.9499999999999), (1006, 642.6), (896, -120.7), (645, 1048.8999999999999), (591, -974.1)]
2025-11-11 08:10:34,928 - linien_server.autolock.robust - DEBUG - Discarded peaks: [(1324, -72), (1054, -887), (1006, 756), (896, -142), (645, 1234), (591, -1146)]
2025-11-11 08:10:34,930 - linien_server.autolock.robust - DEBUG - Target peak index in prepared spectrum: 1324
2025-11-11 08:10:34,959 - linien_server.autolock.robust - DEBUG - final wait time is 295 samples
2025-11-11 08:10:34,961 - linien_server.autolock.robust - DEBUG - Generated description: [(531, -974), (48, 1048), (225, -120), (99, 642), (43, -753), (243, -61)]
2025-11-11 08:10:34,991 - linien_server.autolock.robust - DEBUG - Lock position found at index 1584 for current spectrum
2025-11-11 08:10:35,021 - linien_server.autolock.robust - DEBUG - Lock position found at index 1900 for current spectrum
2025-11-11 08:10:35,052 - linien_server.autolock.robust - DEBUG - Lock position found at index 1901 for current spectrum
2025-11-11 08:10:35,083 - linien_server.autolock.robust - DEBUG - Lock position found at index 1900 for current spectrum
2025-11-11 08:10:35,115 - linien_server.autolock.robust - DEBUG - Lock position found at index 1900 for current spectrum
2025-11-11 08:10:35,117 - linien_server.autolock.robust - DEBUG - Try out tolerance 0.8
2025-11-11 08:10:35,119 - linien_server.autolock.robust - DEBUG - Original peaks: [(1324, -72), (1054, -887), (1006, 756), (896, -142), (645, 1234), (591, -1146)]
2025-11-11 08:10:35,121 - linien_server.autolock.robust - DEBUG - Filtered peaks: [(1324, -57.6), (1054, -709.6), (1006, 604.8000000000001), (896, -113.60000000000001), (645, 987.2), (591, -916.8000000000001)]
2025-11-11 08:10:35,122 - linien_server.autolock.robust - DEBUG - Discarded peaks: [(1324, -72), (1054, -887), (1006, 756), (896, -142), (645, 1234), (591, -1146)]
2025-11-11 08:10:35,124 - linien_server.autolock.robust - DEBUG - Target peak index in prepared spectrum: 1324
2025-11-11 08:10:35,154 - linien_server.autolock.robust - DEBUG - final wait time is 295 samples
2025-11-11 08:10:35,155 - linien_server.autolock.robust - DEBUG - Generated description: [(531, -916), (48, 987), (225, -113), (99, 604), (43, -709), (243, -57)]
2025-11-11 08:10:35,186 - linien_server.autolock.robust - DEBUG - Lock position found at index 1582 for current spectrum
2025-11-11 08:10:35,216 - linien_server.autolock.robust - DEBUG - Lock position found at index 1899 for current spectrum
2025-11-11 08:10:35,247 - linien_server.autolock.robust - DEBUG - Lock position found at index 1900 for current spectrum
2025-11-11 08:10:35,277 - linien_server.autolock.robust - DEBUG - Lock position found at index 1898 for current spectrum
2025-11-11 08:10:35,308 - linien_server.autolock.robust - DEBUG - Lock position found at index 1899 for current spectrum
2025-11-11 08:10:35,309 - linien_server.autolock.robust - DEBUG - Try out tolerance 0.75
2025-11-11 08:10:35,311 - linien_server.autolock.robust - DEBUG - Original peaks: [(1324, -72), (1054, -887), (1006, 756), (896, -142), (645, 1234), (591, -1146)]
2025-11-11 08:10:35,312 - linien_server.autolock.robust - DEBUG - Filtered peaks: [(1324, -54.0), (1054, -665.25), (1006, 567.0), (896, -106.5), (645, 925.5), (591, -859.5)]
2025-11-11 08:10:35,314 - linien_server.autolock.robust - DEBUG - Discarded peaks: [(1324, -72), (1054, -887), (1006, 756), (896, -142), (645, 1234), (591, -1146)]
2025-11-11 08:10:35,315 - linien_server.autolock.robust - DEBUG - Target peak index in prepared spectrum: 1324
2025-11-11 08:10:35,346 - linien_server.autolock.robust - DEBUG - final wait time is 295 samples
2025-11-11 08:10:35,347 - linien_server.autolock.robust - DEBUG - Generated description: [(531, -859), (48, 925), (225, -106), (99, 567), (43, -665), (243, -54)]
2025-11-11 08:10:35,377 - linien_server.autolock.robust - DEBUG - Lock position found at index 1581 for current spectrum
2025-11-11 08:10:35,407 - linien_server.autolock.robust - DEBUG - Lock position found at index 1898 for current spectrum
2025-11-11 08:10:35,438 - linien_server.autolock.robust - DEBUG - Lock position found at index 1899 for current spectrum
2025-11-11 08:10:35,468 - linien_server.autolock.robust - DEBUG - Lock position found at index 1897 for current spectrum
2025-11-11 08:10:35,499 - linien_server.autolock.robust - DEBUG - Lock position found at index 1898 for current spectrum
2025-11-11 08:10:35,501 - linien_server.autolock.robust - DEBUG - Try out tolerance 0.7
2025-11-11 08:10:35,505 - linien_server.autolock.robust - DEBUG - Original peaks: [(1324, -72), (1054, -887), (1006, 756), (896, -142), (645, 1234), (591, -1146)]
2025-11-11 08:10:35,506 - linien_server.autolock.robust - DEBUG - Filtered peaks: [(1324, -50.4), (1054, -620.9), (1006, 529.1999999999999), (896, -99.39999999999999), (645, 863.8), (591, -802.1999999999999)]
2025-11-11 08:10:35,508 - linien_server.autolock.robust - DEBUG - Discarded peaks: [(1324, -72), (1054, -887), (1006, 756), (896, -142), (645, 1234), (591, -1146)]
2025-11-11 08:10:35,510 - linien_server.autolock.robust - DEBUG - Target peak index in prepared spectrum: 1324
2025-11-11 08:10:35,539 - linien_server.autolock.robust - DEBUG - final wait time is 295 samples
2025-11-11 08:10:35,541 - linien_server.autolock.robust - DEBUG - Generated description: [(531, -802), (48, 863), (225, -99), (99, 529), (43, -620), (243, -50)]
2025-11-11 08:10:35,571 - linien_server.autolock.robust - DEBUG - Lock position found at index 1580 for current spectrum
2025-11-11 08:10:35,601 - linien_server.autolock.robust - DEBUG - Lock position found at index 1897 for current spectrum
2025-11-11 08:10:35,631 - linien_server.autolock.robust - DEBUG - Lock position found at index 1897 for current spectrum
2025-11-11 08:10:35,661 - linien_server.autolock.robust - DEBUG - Lock position found at index 1896 for current spectrum
2025-11-11 08:10:35,692 - linien_server.autolock.robust - DEBUG - Lock position found at index 1896 for current spectrum
2025-11-11 08:10:35,693 - linien_server.autolock.robust - DEBUG - Try out tolerance 0.65
2025-11-11 08:10:35,695 - linien_server.autolock.robust - DEBUG - Original peaks: [(1324, -72), (1054, -887), (1006, 756), (896, -142), (645, 1234), (591, -1146)]
2025-11-11 08:10:35,697 - linien_server.autolock.robust - DEBUG - Filtered peaks: [(1324, -46.800000000000004), (1054, -576.5500000000001), (1006, 491.40000000000003), (896, -92.3), (645, 802.1), (591, -744.9)]
2025-11-11 08:10:35,698 - linien_server.autolock.robust - DEBUG - Discarded peaks: [(1324, -72), (1054, -887), (1006, 756), (896, -142), (645, 1234), (591, -1146)]
2025-11-11 08:10:35,700 - linien_server.autolock.robust - DEBUG - Target peak index in prepared spectrum: 1324
2025-11-11 08:10:35,729 - linien_server.autolock.robust - DEBUG - final wait time is 295 samples
2025-11-11 08:10:35,731 - linien_server.autolock.robust - DEBUG - Generated description: [(531, -744), (48, 802), (225, -92), (99, 491), (43, -576), (243, -46)]
2025-11-11 08:10:35,761 - linien_server.autolock.robust - DEBUG - Lock position found at index 1579 for current spectrum
2025-11-11 08:10:35,791 - linien_server.autolock.robust - DEBUG - Lock position found at index 1896 for current spectrum
2025-11-11 08:10:35,827 - linien_server.autolock.robust - DEBUG - Lock position found at index 1896 for current spectrum
2025-11-11 08:10:35,857 - linien_server.autolock.robust - DEBUG - Lock position found at index 1895 for current spectrum
2025-11-11 08:10:35,889 - linien_server.autolock.robust - DEBUG - Lock position found at index 1895 for current spectrum
2025-11-11 08:10:35,892 - linien_server.autolock.robust - DEBUG - Try out tolerance 0.6
2025-11-11 08:10:35,895 - linien_server.autolock.robust - DEBUG - Original peaks: [(1324, -72), (1054, -887), (1006, 756), (896, -142), (645, 1234), (591, -1146)]
2025-11-11 08:10:35,897 - linien_server.autolock.robust - DEBUG - Filtered peaks: [(1324, -43.199999999999996), (1054, -532.1999999999999), (1006, 453.59999999999997), (896, -85.2), (645, 740.4), (591, -687.6)]
2025-11-11 08:10:35,898 - linien_server.autolock.robust - DEBUG - Discarded peaks: [(1324, -72), (1054, -887), (1006, 756), (896, -142), (645, 1234), (591, -1146)]
2025-11-11 08:10:35,900 - linien_server.autolock.robust - DEBUG - Target peak index in prepared spectrum: 1324
2025-11-11 08:10:35,930 - linien_server.autolock.robust - DEBUG - final wait time is 295 samples
2025-11-11 08:10:35,932 - linien_server.autolock.robust - DEBUG - Generated description: [(531, -687), (48, 740), (225, -85), (99, 453), (43, -532), (243, -43)]
2025-11-11 08:10:35,962 - linien_server.autolock.robust - DEBUG - Lock position found at index 1578 for current spectrum
2025-11-11 08:10:35,992 - linien_server.autolock.robust - DEBUG - Lock position found at index 1895 for current spectrum
2025-11-11 08:10:36,022 - linien_server.autolock.robust - DEBUG - Lock position found at index 1895 for current spectrum
2025-11-11 08:10:36,052 - linien_server.autolock.robust - DEBUG - Lock position found at index 1894 for current spectrum
2025-11-11 08:10:36,083 - linien_server.autolock.robust - DEBUG - Lock position found at index 1894 for current spectrum
2025-11-11 08:10:36,084 - linien_server.autolock.robust - DEBUG - Try out tolerance 0.55
2025-11-11 08:10:36,086 - linien_server.autolock.robust - DEBUG - Original peaks: [(1324, -72), (1054, -887), (1006, 756), (896, -142), (645, 1234), (591, -1146)]
2025-11-11 08:10:36,088 - linien_server.autolock.robust - DEBUG - Filtered peaks: [(1324, -39.6), (1054, -487.85), (1006, 415.8), (896, -78.10000000000001), (645, 678.7), (591, -630.3000000000001)]
2025-11-11 08:10:36,089 - linien_server.autolock.robust - DEBUG - Discarded peaks: [(1324, -72), (1054, -887), (1006, 756), (896, -142), (645, 1234), (591, -1146)]
2025-11-11 08:10:36,091 - linien_server.autolock.robust - DEBUG - Target peak index in prepared spectrum: 1324
2025-11-11 08:10:36,121 - linien_server.autolock.robust - DEBUG - final wait time is 295 samples
2025-11-11 08:10:36,122 - linien_server.autolock.robust - DEBUG - Generated description: [(531, -630), (48, 678), (225, -78), (99, 415), (43, -487), (243, -39)]
2025-11-11 08:10:36,152 - linien_server.autolock.robust - DEBUG - Lock position found at index 1577 for current spectrum
2025-11-11 08:10:36,183 - linien_server.autolock.robust - DEBUG - Lock position found at index 1894 for current spectrum
2025-11-11 08:10:36,214 - linien_server.autolock.robust - DEBUG - Lock position found at index 1894 for current spectrum
2025-11-11 08:10:36,246 - linien_server.autolock.robust - DEBUG - Lock position found at index 1893 for current spectrum
2025-11-11 08:10:36,277 - linien_server.autolock.robust - DEBUG - Lock position found at index 1893 for current spectrum
2025-11-11 08:10:36,278 - linien_server.autolock.robust - DEBUG - Try out tolerance 0.5
2025-11-11 08:10:36,280 - linien_server.autolock.robust - DEBUG - Original peaks: [(1324, -72), (1054, -887), (1006, 756), (896, -142), (645, 1234), (591, -1146)]
2025-11-11 08:10:36,281 - linien_server.autolock.robust - DEBUG - Filtered peaks: [(1054, -443.5), (1006, 378.0), (896, -71.0), (645, 617.0), (591, -573.0)]
2025-11-11 08:10:36,283 - linien_server.autolock.robust - DEBUG - Discarded peaks: [(1324, -72), (1054, -887), (1006, 756), (896, -142), (645, 1234), (591, -1146)]
2025-11-11 08:10:36,284 - linien_server.autolock.robust - DEBUG - Target peak index in prepared spectrum: 1324
2025-11-11 08:10:36,286 - linien_server.autolock.robust - DEBUG - final wait time is 1 samples
2025-11-11 08:10:36,287 - linien_server.autolock.robust - DEBUG - Generated description: [(531, -573), (48, 617), (225, -71), (99, 378), (43, -443)]
2025-11-11 08:10:36,314 - linien_server.autolock.robust - DEBUG - Lock position found at index 1038 for current spectrum
2025-11-11 08:10:36,341 - linien_server.autolock.robust - DEBUG - Lock position found at index 1355 for current spectrum
2025-11-11 08:10:36,369 - linien_server.autolock.robust - DEBUG - Lock position found at index 1356 for current spectrum
2025-11-11 08:10:36,396 - linien_server.autolock.robust - DEBUG - Lock position found at index 1354 for current spectrum
2025-11-11 08:10:36,423 - linien_server.autolock.robust - DEBUG - Lock position found at index 1354 for current spectrum
2025-11-11 08:10:36,424 - linien_server.autolock.autolock - ERROR - Error while handling new spectrum
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/autolock.py", line 212, in react_to_new_spectrum
    return self.algorithm.handle_new_spectrum(combined_error_signal)
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/robust.py", line 109, in handle_new_spectrum
    description, final_wait_time, time_scale = calculate_autolock_instructions_v2(
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/robust.py", line 364, in calculate_autolock_instructions_v2
    raise UnableToFindDescription()
linien_server.autolock.robust.UnableToFindDescription
2025-11-11 08:20:45,048 - linien_server.cli - INFO - Stopping Linien server
2025-11-11 08:20:45,186 - linien_server.cli - INFO - Stopped Linien server
2025-11-11 08:20:48,368 - linien_server.cli - DEBUG - Copied linien-server.service to /etc/systemd/system
2025-11-11 08:20:48,370 - linien_server.cli - INFO - Starting Linien server
2025-11-11 08:20:48,435 - linien_server.cli - INFO - Started Linien server
2025-11-11 08:20:58,808 - linien_server.cli - DEBUG - Copied linien-server.service to /etc/systemd/system
2025-11-11 08:20:58,810 - linien_server.cli - INFO - Starting Linien server
2025-11-11 08:20:58,872 - linien_server.cli - INFO - Started Linien server
2025-11-11 08:21:07,303 - linien_server.parameters - INFO - Restoring parameters from /root/.local/share/linien/parameters.json
2025-11-11 08:21:07,309 - linien_server.parameters - INFO - Restored parameters from /root/.local/share/linien/parameters.json
2025-11-11 08:21:07,314 - linien_common.influxdb - INFO - Saved InfluxDB credentials to /root/.local/share/linien/influxdb_credentials.json
2025-11-11 08:21:07,541 - linien_server.acquisition - INFO - Using fpgautil to deploy gateware.
2025-11-11 08:21:07,709 - linien_server.server - DEBUG - Ping  1
2025-11-11 08:21:07,765 - linien_server.mdio_tool - INFO - Disabling ethernet blinking with mdio-tool at /usr/local/lib/python3.10/dist-packages/linien_server/mdio-tool
2025-11-11 08:21:07,807 - linien_server.server - INFO - Starting server.
2025-11-11 08:21:08,749 - linien_server.server - DEBUG - Ping  2
2025-11-11 08:21:09,776 - linien_server.server - DEBUG - Ping  3
2025-11-11 08:21:09,782 - linien_server.server - DEBUG - Further pings will be suppressed
2025-11-11 08:21:33,499 - linien_server.autolock.autolock - DEBUG - Initialize Autolock
2025-11-11 08:21:33,500 - linien_server.autolock.autolock - DEBUG - Start the autolock
2025-11-11 08:21:33,501 - linien_server.autolock.autolock - DEBUG - (x0, x1) = (1150,1350)
2025-11-11 08:21:33,506 - linien_server.autolock.autolock - DEBUG - Start autolock with mode 1
2025-11-11 08:21:33,879 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-11 08:21:33,881 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-11 08:21:33,882 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-11 08:21:33,983 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-11 08:21:34,031 - linien_server.autolock.robust - ERROR - Not enough spectra collected:2 of 5
2025-11-11 08:21:34,274 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-11 08:21:34,276 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-11 08:21:34,279 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-11 08:21:34,379 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-11 08:21:34,408 - linien_server.autolock.robust - ERROR - Not enough spectra collected:3 of 5
2025-11-11 08:21:34,672 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-11 08:21:34,674 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-11 08:21:34,676 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-11 08:21:34,776 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-11 08:21:34,805 - linien_server.autolock.robust - ERROR - Not enough spectra collected:4 of 5
2025-11-11 08:21:35,061 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-11 08:21:35,063 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-11 08:21:35,065 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-11 08:21:35,165 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-11 08:21:35,193 - linien_server.autolock.robust - DEBUG - enough spectra!, calculate
2025-11-11 08:21:35,195 - linien_server.autolock.robust - DEBUG - Entered in calculate_autolock_instructions_v2
2025-11-11 08:21:35,200 - linien_server.autolock.robust - DEBUG - Saved new robust_spectra.npy and target_idxs.npy
2025-11-11 08:21:35,201 - linien_server.autolock.utils - DEBUG - Entered in crop_spectra_to_same_view
2025-11-11 08:21:35,366 - linien_server.autolock.utils - DEBUG - Shifts calculated for cropping: [22, -2, 1, -2, -3]
2025-11-11 08:21:35,370 - linien_server.autolock.robust - DEBUG - Saved new robust_spectra_cropped.npy
2025-11-11 08:21:35,371 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-11 08:21:35,372 - linien_server.autolock.utils - DEBUG - Spectrum length:2023
2025-11-11 08:21:35,375 - linien_server.autolock.utils - DEBUG - Spectrum: [-2 -1 -1 -1 -2]...[3 3 3 3 3]
2025-11-11 08:21:35,376 - linien_server.autolock.utils - DEBUG - Target indices: [1211, 1246]
2025-11-11 08:21:35,378 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-11 08:21:35,380 - linien_server.autolock.utils - DEBUG - Spectrum length:2023
2025-11-11 08:21:35,384 - linien_server.autolock.utils - DEBUG - Spectrum: [ 0  0  0 -1 -1]...[3 3 3 3 3]
2025-11-11 08:21:35,385 - linien_server.autolock.utils - DEBUG - Target indices: [1211, 1246]
2025-11-11 08:21:35,388 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-11 08:21:35,389 - linien_server.autolock.utils - DEBUG - Spectrum length:2023
2025-11-11 08:21:35,393 - linien_server.autolock.utils - DEBUG - Spectrum: [ 0 -1 -1 -1 -1]...[3 3 3 3 3]
2025-11-11 08:21:35,394 - linien_server.autolock.utils - DEBUG - Target indices: [1211, 1246]
2025-11-11 08:21:35,395 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-11 08:21:35,397 - linien_server.autolock.utils - DEBUG - Spectrum length:2023
2025-11-11 08:21:35,399 - linien_server.autolock.utils - DEBUG - Spectrum: [-1 -1  0 -1 -1]...[3 3 3 3 3]
2025-11-11 08:21:35,400 - linien_server.autolock.utils - DEBUG - Target indices: [1211, 1246]
2025-11-11 08:21:35,402 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-11 08:21:35,403 - linien_server.autolock.utils - DEBUG - Spectrum length:2023
2025-11-11 08:21:35,406 - linien_server.autolock.utils - DEBUG - Spectrum: [-2 -1 -1 -1 -1]...[3 3 3 3 3]
2025-11-11 08:21:35,407 - linien_server.autolock.utils - DEBUG - Target indices: [1211, 1246]
2025-11-11 08:21:35,409 - linien_server.autolock.robust - DEBUG - x scale is 29
2025-11-11 08:21:35,460 - linien_server.autolock.robust - DEBUG - shift prepared spectrum by 13 samples to the left to match the original spectrum
2025-11-11 08:21:35,547 - linien_server.autolock.robust - DEBUG - Detected peaks with (position, height): [(1224, -172), (1198, 676), (1023, -110), (842, 1091), (787, -1022)]
2025-11-11 08:21:35,971 - linien_server.autolock.robust - DEBUG - Determined lock regions: [(1207, 1241), (1160, 1503), (1160, 1503), (1158, 1503), (1162, 1503)]
2025-11-11 08:21:35,973 - linien_server.autolock.robust - DEBUG - Try out tolerance 0.95
2025-11-11 08:21:35,975 - linien_server.autolock.robust - DEBUG - Original peaks: [(1224, -172), (1198, 676), (1023, -110), (842, 1091), (787, -1022)]
2025-11-11 08:21:35,976 - linien_server.autolock.robust - DEBUG - Filtered peaks: [(1224, -163.4), (1198, 642.1999999999999), (1023, -104.5), (842, 1036.45), (787, -970.9)]
2025-11-11 08:21:35,977 - linien_server.autolock.robust - DEBUG - Discarded peaks: [(1224, -172), (1198, 676), (1023, -110), (842, 1091), (787, -1022)]
2025-11-11 08:21:35,979 - linien_server.autolock.robust - DEBUG - Target peak index in prepared spectrum: 1224
2025-11-11 08:21:35,980 - linien_server.autolock.robust - DEBUG - final wait time is 1 samples
2025-11-11 08:21:35,982 - linien_server.autolock.robust - DEBUG - Generated description: [(708, -970), (49, 1036), (162, -104), (157, 642), (23, -163)]
2025-11-11 08:21:36,013 - linien_server.autolock.robust - DEBUG - Lock position found at index 1225 for current spectrum
2025-11-11 08:21:36,151 - linien_server.autolock.robust - DEBUG - Try out tolerance 0.9
2025-11-11 08:21:36,153 - linien_server.autolock.robust - DEBUG - Original peaks: [(1224, -172), (1198, 676), (1023, -110), (842, 1091), (787, -1022)]
2025-11-11 08:21:36,156 - linien_server.autolock.robust - DEBUG - Filtered peaks: [(1224, -154.8), (1198, 608.4), (1023, -99.0), (842, 981.9), (787, -919.8000000000001)]
2025-11-11 08:21:36,159 - linien_server.autolock.robust - DEBUG - Discarded peaks: [(1224, -172), (1198, 676), (1023, -110), (842, 1091), (787, -1022)]
2025-11-11 08:21:36,161 - linien_server.autolock.robust - DEBUG - Target peak index in prepared spectrum: 1224
2025-11-11 08:21:36,162 - linien_server.autolock.robust - DEBUG - final wait time is 1 samples
2025-11-11 08:21:36,163 - linien_server.autolock.robust - DEBUG - Generated description: [(708, -919), (49, 981), (162, -99), (157, 608), (23, -154)]
2025-11-11 08:21:36,195 - linien_server.autolock.robust - DEBUG - Lock position found at index 1225 for current spectrum
2025-11-11 08:21:36,290 - linien_server.autolock.robust - DEBUG - Lock position found at index 1245 for current spectrum
2025-11-11 08:21:36,324 - linien_server.autolock.robust - DEBUG - Try out tolerance 0.85
2025-11-11 08:21:36,326 - linien_server.autolock.robust - DEBUG - Original peaks: [(1224, -172), (1198, 676), (1023, -110), (842, 1091), (787, -1022)]
2025-11-11 08:21:36,328 - linien_server.autolock.robust - DEBUG - Filtered peaks: [(1224, -146.2), (1198, 574.6), (1023, -93.5), (842, 927.35), (787, -868.6999999999999)]
2025-11-11 08:21:36,329 - linien_server.autolock.robust - DEBUG - Discarded peaks: [(1224, -172), (1198, 676), (1023, -110), (842, 1091), (787, -1022)]
2025-11-11 08:21:36,331 - linien_server.autolock.robust - DEBUG - Target peak index in prepared spectrum: 1224
2025-11-11 08:21:36,333 - linien_server.autolock.robust - DEBUG - final wait time is 1 samples
2025-11-11 08:21:36,334 - linien_server.autolock.robust - DEBUG - Generated description: [(708, -868), (49, 927), (162, -93), (157, 574), (23, -146)]
2025-11-11 08:21:36,365 - linien_server.autolock.robust - DEBUG - Lock position found at index 1225 for current spectrum
2025-11-11 08:21:36,461 - linien_server.autolock.robust - DEBUG - Lock position found at index 1245 for current spectrum
2025-11-11 08:21:36,499 - linien_server.autolock.robust - DEBUG - Try out tolerance 0.8
2025-11-11 08:21:36,502 - linien_server.autolock.robust - DEBUG - Original peaks: [(1224, -172), (1198, 676), (1023, -110), (842, 1091), (787, -1022)]
2025-11-11 08:21:36,504 - linien_server.autolock.robust - DEBUG - Filtered peaks: [(1224, -137.6), (1198, 540.8000000000001), (1023, -88.0), (842, 872.8000000000001), (787, -817.6)]
2025-11-11 08:21:36,505 - linien_server.autolock.robust - DEBUG - Discarded peaks: [(1224, -172), (1198, 676), (1023, -110), (842, 1091), (787, -1022)]
2025-11-11 08:21:36,507 - linien_server.autolock.robust - DEBUG - Target peak index in prepared spectrum: 1224
2025-11-11 08:21:36,508 - linien_server.autolock.robust - DEBUG - final wait time is 1 samples
2025-11-11 08:21:36,510 - linien_server.autolock.robust - DEBUG - Generated description: [(708, -817), (49, 872), (162, -88), (157, 540), (23, -137)]
2025-11-11 08:21:36,541 - linien_server.autolock.robust - DEBUG - Lock position found at index 1225 for current spectrum
2025-11-11 08:21:36,569 - linien_server.autolock.robust - DEBUG - Lock position found at index 1246 for current spectrum
2025-11-11 08:21:36,635 - linien_server.autolock.robust - DEBUG - Lock position found at index 1245 for current spectrum
2025-11-11 08:21:36,670 - linien_server.autolock.robust - DEBUG - Try out tolerance 0.75
2025-11-11 08:21:36,673 - linien_server.autolock.robust - DEBUG - Original peaks: [(1224, -172), (1198, 676), (1023, -110), (842, 1091), (787, -1022)]
2025-11-11 08:21:36,674 - linien_server.autolock.robust - DEBUG - Filtered peaks: [(1224, -129.0), (1198, 507.0), (1023, -82.5), (842, 818.25), (787, -766.5)]
2025-11-11 08:21:36,676 - linien_server.autolock.robust - DEBUG - Discarded peaks: [(1224, -172), (1198, 676), (1023, -110), (842, 1091), (787, -1022)]
2025-11-11 08:21:36,677 - linien_server.autolock.robust - DEBUG - Target peak index in prepared spectrum: 1224
2025-11-11 08:21:36,679 - linien_server.autolock.robust - DEBUG - final wait time is 1 samples
2025-11-11 08:21:36,680 - linien_server.autolock.robust - DEBUG - Generated description: [(708, -766), (49, 818), (162, -82), (157, 507), (23, -129)]
2025-11-11 08:21:36,712 - linien_server.autolock.robust - DEBUG - Lock position found at index 1225 for current spectrum
2025-11-11 08:21:36,740 - linien_server.autolock.robust - DEBUG - Lock position found at index 1246 for current spectrum
2025-11-11 08:21:36,767 - linien_server.autolock.robust - DEBUG - Lock position found at index 1247 for current spectrum
2025-11-11 08:21:36,796 - linien_server.autolock.robust - DEBUG - Lock position found at index 1245 for current spectrum
2025-11-11 08:21:36,825 - linien_server.autolock.robust - DEBUG - Lock position found at index 1246 for current spectrum
2025-11-11 08:21:36,828 - linien_server.autolock.robust - DEBUG - Description is [(708, -766), (49, 818), (162, -82), (157, 507), (23, -129)]
2025-11-11 08:21:36,830 - linien_server.autolock.robust - DEBUG - Calculation of autolock description took 1.6354427337646484
2025-11-11 08:21:36,891 - linien_server.server - ERROR - incorrect data received for lock state, ignoring!
2025-11-11 08:21:37,213 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-11 08:21:37,217 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-11 08:21:37,219 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-11 08:21:37,221 - linien_server.autolock.autolock - DEBUG - after lock
2025-11-11 09:55:20,388 - linien_server.autolock.autolock - DEBUG - Initialize Autolock
2025-11-11 09:55:20,414 - linien_server.autolock.autolock - DEBUG - Start the autolock
2025-11-11 09:55:20,436 - linien_server.autolock.autolock - DEBUG - (x0, x1) = (1600,1800)
2025-11-11 09:55:20,457 - linien_server.autolock.autolock - DEBUG - Start autolock with mode 1
2025-11-11 09:55:20,634 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-11 09:55:20,636 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-11 09:55:20,637 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-11 09:55:20,733 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-11 09:55:20,763 - linien_server.autolock.robust - ERROR - Not enough spectra collected:2 of 5
2025-11-11 09:55:21,028 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-11 09:55:21,031 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-11 09:55:21,033 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-11 09:55:21,130 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-11 09:55:21,159 - linien_server.autolock.robust - ERROR - Not enough spectra collected:3 of 5
2025-11-11 09:55:21,420 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-11 09:55:21,423 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-11 09:55:21,426 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-11 09:55:21,521 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-11 09:55:21,550 - linien_server.autolock.robust - ERROR - Not enough spectra collected:4 of 5
2025-11-11 09:55:21,814 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-11 09:55:21,816 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-11 09:55:21,818 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-11 09:55:21,915 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-11 09:55:21,943 - linien_server.autolock.robust - DEBUG - enough spectra!, calculate
2025-11-11 09:55:21,944 - linien_server.autolock.robust - DEBUG - Entered in calculate_autolock_instructions_v2
2025-11-11 09:55:21,949 - linien_server.autolock.robust - DEBUG - Saved new robust_spectra.npy and target_idxs.npy
2025-11-11 09:55:21,950 - linien_server.autolock.utils - DEBUG - Entered in crop_spectra_to_same_view
2025-11-11 09:55:22,115 - linien_server.autolock.utils - DEBUG - Shifts calculated for cropping: [57, 58, 56, 59, 59]
2025-11-11 09:55:22,119 - linien_server.autolock.robust - DEBUG - Saved new robust_spectra_cropped.npy
2025-11-11 09:55:22,120 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-11 09:55:22,121 - linien_server.autolock.utils - DEBUG - Spectrum length:2045
2025-11-11 09:55:22,124 - linien_server.autolock.utils - DEBUG - Spectrum: [-6 -6 -6 -6 -6]...[-7 -7 -7 -7 -7]
2025-11-11 09:55:22,125 - linien_server.autolock.utils - DEBUG - Target indices: [1687, 1727]
2025-11-11 09:55:22,127 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-11 09:55:22,128 - linien_server.autolock.utils - DEBUG - Spectrum length:2045
2025-11-11 09:55:22,130 - linien_server.autolock.utils - DEBUG - Spectrum: [-5 -6 -6 -6 -6]...[-8 -8 -8 -8 -8]
2025-11-11 09:55:22,132 - linien_server.autolock.utils - DEBUG - Target indices: [1687, 1727]
2025-11-11 09:55:22,135 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-11 09:55:22,136 - linien_server.autolock.utils - DEBUG - Spectrum length:2045
2025-11-11 09:55:22,140 - linien_server.autolock.utils - DEBUG - Spectrum: [-7 -4 -4 -4 -4]...[-7 -7 -7 -7 -7]
2025-11-11 09:55:22,142 - linien_server.autolock.utils - DEBUG - Target indices: [1687, 1727]
2025-11-11 09:55:22,146 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-11 09:55:22,148 - linien_server.autolock.utils - DEBUG - Spectrum length:2045
2025-11-11 09:55:22,151 - linien_server.autolock.utils - DEBUG - Spectrum: [-5 -5 -5 -4 -4]...[-8 -8 -8 -8 -8]
2025-11-11 09:55:22,153 - linien_server.autolock.utils - DEBUG - Target indices: [1687, 1727]
2025-11-11 09:55:22,154 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-11 09:55:22,155 - linien_server.autolock.utils - DEBUG - Spectrum length:2045
2025-11-11 09:55:22,158 - linien_server.autolock.utils - DEBUG - Spectrum: [-5 -5 -4 -4 -5]...[-7 -8 -8 -7 -7]
2025-11-11 09:55:22,159 - linien_server.autolock.utils - DEBUG - Target indices: [1687, 1727]
2025-11-11 09:55:22,160 - linien_server.autolock.robust - DEBUG - x scale is 37
2025-11-11 09:55:22,213 - linien_server.autolock.robust - DEBUG - shift prepared spectrum by 17 samples to the left to match the original spectrum
2025-11-11 09:55:22,329 - linien_server.autolock.robust - DEBUG - Detected peaks with (position, height): [(1704, -1015), (1692, -1185), (1643, 566), (1529, -361), (1290, 1097), (1236, -1327)]
2025-11-11 09:55:22,780 - linien_server.autolock.robust - DEBUG - Determined lock regions: [(1659, 2014), (1659, 2014), (1659, 2014), (1659, 2014), (1659, 2014)]
2025-11-11 09:55:22,781 - linien_server.autolock.robust - DEBUG - Try out tolerance 0.95
2025-11-11 09:55:22,783 - linien_server.autolock.robust - DEBUG - Original peaks: [(1704, -1015), (1692, -1185), (1643, 566), (1529, -361), (1290, 1097), (1236, -1327)]
2025-11-11 09:55:22,784 - linien_server.autolock.robust - DEBUG - Filtered peaks: [(1704, -964.25), (1692, -1125.75), (1643, 537.6999999999999), (1529, -342.95), (1290, 1042.1499999999999), (1236, -1260.6499999999999)]
2025-11-11 09:55:22,786 - linien_server.autolock.robust - DEBUG - Discarded peaks: [(1704, -1015), (1692, -1185), (1643, 566), (1529, -361), (1290, 1097), (1236, -1327)]
2025-11-11 09:55:22,787 - linien_server.autolock.robust - DEBUG - Target peak index in prepared spectrum: 1704
2025-11-11 09:55:22,791 - linien_server.autolock.robust - DEBUG - final wait time is 25 samples
2025-11-11 09:55:22,792 - linien_server.autolock.robust - DEBUG - Generated description: [(1112, -1260), (48, 1042), (215, -342), (102, 537), (44, -1125), (10, -964)]
2025-11-11 09:55:22,830 - linien_server.autolock.robust - DEBUG - Lock position found at index 1722 for current spectrum
2025-11-11 09:55:22,901 - linien_server.autolock.robust - DEBUG - Lock position found at index 1781 for current spectrum
2025-11-11 09:55:22,938 - linien_server.autolock.robust - DEBUG - Lock position found at index 1777 for current spectrum
2025-11-11 09:55:22,973 - linien_server.autolock.robust - DEBUG - Lock position found at index 1777 for current spectrum
2025-11-11 09:55:22,975 - linien_server.autolock.robust - DEBUG - Try out tolerance 0.9
2025-11-11 09:55:22,977 - linien_server.autolock.robust - DEBUG - Original peaks: [(1704, -1015), (1692, -1185), (1643, 566), (1529, -361), (1290, 1097), (1236, -1327)]
2025-11-11 09:55:22,978 - linien_server.autolock.robust - DEBUG - Filtered peaks: [(1704, -913.5), (1692, -1066.5), (1643, 509.40000000000003), (1529, -324.90000000000003), (1290, 987.3000000000001), (1236, -1194.3)]
2025-11-11 09:55:22,979 - linien_server.autolock.robust - DEBUG - Discarded peaks: [(1704, -1015), (1692, -1185), (1643, 566), (1529, -361), (1290, 1097), (1236, -1327)]
2025-11-11 09:55:22,981 - linien_server.autolock.robust - DEBUG - Target peak index in prepared spectrum: 1704
2025-11-11 09:55:22,985 - linien_server.autolock.robust - DEBUG - final wait time is 26 samples
2025-11-11 09:55:22,987 - linien_server.autolock.robust - DEBUG - Generated description: [(1112, -1194), (48, 987), (215, -324), (102, 509), (44, -1066), (10, -913)]
2025-11-11 09:55:23,025 - linien_server.autolock.robust - DEBUG - Lock position found at index 1720 for current spectrum
2025-11-11 09:55:23,059 - linien_server.autolock.robust - DEBUG - Lock position found at index 1780 for current spectrum
2025-11-11 09:55:23,094 - linien_server.autolock.robust - DEBUG - Lock position found at index 1779 for current spectrum
2025-11-11 09:55:23,129 - linien_server.autolock.robust - DEBUG - Lock position found at index 1775 for current spectrum
2025-11-11 09:55:23,163 - linien_server.autolock.robust - DEBUG - Lock position found at index 1776 for current spectrum
2025-11-11 09:55:23,165 - linien_server.autolock.robust - DEBUG - Description is [(1112, -1194), (48, 987), (215, -324), (102, 509), (44, -1066), (10, -913)]
2025-11-11 09:55:23,166 - linien_server.autolock.robust - DEBUG - Calculation of autolock description took 1.2222087383270264
2025-11-11 09:55:23,227 - linien_server.server - ERROR - incorrect data received for lock state, ignoring!
2025-11-11 09:55:23,386 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-11 09:55:23,389 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-11 09:55:23,390 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-11 09:55:23,391 - linien_server.autolock.autolock - DEBUG - after lock
2025-11-11 10:02:28,542 - linien_server.cli - INFO - Stopping Linien server
2025-11-11 10:02:28,665 - linien_server.cli - INFO - Stopped Linien server
2025-11-11 10:02:31,666 - linien_server.cli - DEBUG - Copied linien-server.service to /etc/systemd/system
2025-11-11 10:02:31,668 - linien_server.cli - INFO - Starting Linien server
2025-11-11 10:02:31,735 - linien_server.cli - INFO - Started Linien server
2025-11-11 10:02:40,787 - linien_server.cli - DEBUG - Copied linien-server.service to /etc/systemd/system
2025-11-11 10:02:40,789 - linien_server.cli - INFO - Starting Linien server
2025-11-11 10:02:40,838 - linien_server.cli - INFO - Started Linien server
2025-11-11 10:02:49,847 - linien_server.parameters - INFO - Restoring parameters from /root/.local/share/linien/parameters.json
2025-11-11 10:02:49,850 - linien_server.parameters - INFO - Restored parameters from /root/.local/share/linien/parameters.json
2025-11-11 10:02:49,854 - linien_common.influxdb - INFO - Saved InfluxDB credentials to /root/.local/share/linien/influxdb_credentials.json
2025-11-11 10:02:50,042 - linien_server.acquisition - INFO - Using fpgautil to deploy gateware.
2025-11-11 10:02:50,172 - linien_server.server - DEBUG - Ping  1
2025-11-11 10:02:50,193 - linien_server.mdio_tool - INFO - Disabling ethernet blinking with mdio-tool at /usr/local/lib/python3.10/dist-packages/linien_server/mdio-tool
2025-11-11 10:02:50,267 - linien_server.server - INFO - Starting server.
2025-11-11 10:02:51,196 - linien_server.server - DEBUG - Ping  2
2025-11-11 10:02:52,207 - linien_server.server - DEBUG - Ping  3
2025-11-11 10:02:52,225 - linien_server.server - DEBUG - Further pings will be suppressed
2025-11-11 10:03:09,067 - linien_server.autolock.autolock - DEBUG - Initialize Autolock
2025-11-11 10:03:09,082 - linien_server.autolock.autolock - DEBUG - Start the autolock
2025-11-11 10:03:09,104 - linien_server.autolock.autolock - DEBUG - (x0, x1) = (1350,1500)
2025-11-11 10:03:09,145 - linien_server.autolock.autolock - DEBUG - Start autolock with mode 1
2025-11-11 10:03:09,365 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-11 10:03:09,368 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-11 10:03:09,370 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-11 10:03:09,470 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-11 10:03:09,501 - linien_server.autolock.robust - ERROR - Not enough spectra collected:2 of 5
2025-11-11 10:03:09,697 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-11 10:03:09,699 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-11 10:03:09,701 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-11 10:03:09,802 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-11 10:03:09,830 - linien_server.autolock.robust - ERROR - Not enough spectra collected:3 of 5
2025-11-11 10:03:10,083 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-11 10:03:10,087 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-11 10:03:10,089 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-11 10:03:10,189 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-11 10:03:10,217 - linien_server.autolock.robust - ERROR - Not enough spectra collected:4 of 5
2025-11-11 10:03:10,476 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-11 10:03:10,478 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-11 10:03:10,480 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-11 10:03:10,580 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-11 10:03:10,609 - linien_server.autolock.robust - DEBUG - enough spectra!, calculate
2025-11-11 10:03:10,610 - linien_server.autolock.robust - DEBUG - Entered in calculate_autolock_instructions_v2
2025-11-11 10:03:10,615 - linien_server.autolock.robust - DEBUG - Saved new robust_spectra.npy and target_idxs.npy
2025-11-11 10:03:10,617 - linien_server.autolock.utils - DEBUG - Entered in crop_spectra_to_same_view
2025-11-11 10:03:10,651 - linien_server.autolock.utils - DEBUG - correlation max: f32743
2025-11-11 10:03:10,652 - linien_server.autolock.utils - DEBUG - correlation argmax: f729
2025-11-11 10:03:10,654 - linien_server.autolock.utils - DEBUG - s - s_jitter: [0 0 0 0 0]
2025-11-11 10:03:10,689 - linien_server.autolock.utils - DEBUG - correlation max: f254367
2025-11-11 10:03:10,690 - linien_server.autolock.utils - DEBUG - correlation argmax: f2064
2025-11-11 10:03:10,692 - linien_server.autolock.utils - DEBUG - s - s_jitter: [-4 -5 -4 -4 -1]
2025-11-11 10:03:10,726 - linien_server.autolock.utils - DEBUG - correlation max: f254743
2025-11-11 10:03:10,728 - linien_server.autolock.utils - DEBUG - correlation argmax: f2065
2025-11-11 10:03:10,730 - linien_server.autolock.utils - DEBUG - s - s_jitter: [-4 -5 -3 -2  0]
2025-11-11 10:03:10,764 - linien_server.autolock.utils - DEBUG - correlation max: f253327
2025-11-11 10:03:10,766 - linien_server.autolock.utils - DEBUG - correlation argmax: f2067
2025-11-11 10:03:10,768 - linien_server.autolock.utils - DEBUG - s - s_jitter: [-2 -4 -3 -3  0]
2025-11-11 10:03:10,802 - linien_server.autolock.utils - DEBUG - correlation max: f252087
2025-11-11 10:03:10,803 - linien_server.autolock.utils - DEBUG - correlation argmax: f2064
2025-11-11 10:03:10,805 - linien_server.autolock.utils - DEBUG - s - s_jitter: [-4 -5 -4 -3 -1]
2025-11-11 10:03:10,807 - linien_server.autolock.utils - DEBUG - Shifts calculated for cropping: [1319, -16, -17, -19, -16]
2025-11-11 10:03:10,810 - linien_server.autolock.robust - DEBUG - Saved new robust_spectra_cropped.npy
2025-11-11 10:03:10,811 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-11 10:03:10,812 - linien_server.autolock.utils - DEBUG - Spectrum length:710
2025-11-11 10:03:10,815 - linien_server.autolock.utils - DEBUG - Spectrum: [12 13 14 15 15]...[-4 -4 -4 -4 -3]
2025-11-11 10:03:10,816 - linien_server.autolock.utils - DEBUG - Target indices: [1330, 1370]
2025-11-11 10:03:10,818 - linien_server.autolock.autolock - ERROR - Error while handling new spectrum
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/autolock.py", line 212, in react_to_new_spectrum
    return self.algorithm.handle_new_spectrum(combined_error_signal)
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/robust.py", line 109, in handle_new_spectrum
    description, final_wait_time, time_scale = calculate_autolock_instructions_v2(
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/robust.py", line 275, in calculate_autolock_instructions_v2
    round(np.mean([get_time_scale(spectrum, target_idxs) for spectrum in spectra]))
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/robust.py", line 275, in <listcomp>
    round(np.mean([get_time_scale(spectrum, target_idxs) for spectrum in spectra]))
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/utils.py", line 138, in get_time_scale
    return np.abs(np.argmin(part) - np.argmax(part))
  File "<__array_function__ internals>", line 5, in argmin
  File "/usr/lib/python3/dist-packages/numpy/core/fromnumeric.py", line 1276, in argmin
    return _wrapfunc(a, 'argmin', axis=axis, out=out)
  File "/usr/lib/python3/dist-packages/numpy/core/fromnumeric.py", line 57, in _wrapfunc
    return bound(*args, **kwds)
ValueError: attempt to get argmin of an empty sequence
2025-11-11 10:11:19,996 - linien_server.cli - INFO - Stopping Linien server
2025-11-11 10:11:20,145 - linien_server.cli - INFO - Stopped Linien server
2025-11-11 10:11:23,410 - linien_server.cli - DEBUG - Copied linien-server.service to /etc/systemd/system
2025-11-11 10:11:23,411 - linien_server.cli - INFO - Starting Linien server
2025-11-11 10:11:23,485 - linien_server.cli - INFO - Started Linien server
2025-11-11 10:11:33,605 - linien_server.cli - DEBUG - Copied linien-server.service to /etc/systemd/system
2025-11-11 10:11:33,607 - linien_server.cli - INFO - Starting Linien server
2025-11-11 10:11:33,657 - linien_server.cli - INFO - Started Linien server
2025-11-11 10:11:39,882 - linien_server.parameters - INFO - Restoring parameters from /root/.local/share/linien/parameters.json
2025-11-11 10:11:39,885 - linien_server.parameters - INFO - Restored parameters from /root/.local/share/linien/parameters.json
2025-11-11 10:11:39,889 - linien_common.influxdb - INFO - Saved InfluxDB credentials to /root/.local/share/linien/influxdb_credentials.json
2025-11-11 10:11:40,102 - linien_server.acquisition - INFO - Using fpgautil to deploy gateware.
2025-11-11 10:11:40,254 - linien_server.server - DEBUG - Ping  1
2025-11-11 10:11:40,270 - linien_server.mdio_tool - INFO - Disabling ethernet blinking with mdio-tool at /usr/local/lib/python3.10/dist-packages/linien_server/mdio-tool
2025-11-11 10:11:40,313 - linien_server.server - INFO - Starting server.
2025-11-11 10:11:41,276 - linien_server.server - DEBUG - Ping  2
2025-11-11 10:11:42,309 - linien_server.server - DEBUG - Ping  3
2025-11-11 10:11:42,333 - linien_server.server - DEBUG - Further pings will be suppressed
2025-11-11 10:11:59,421 - linien_server.autolock.autolock - DEBUG - Initialize Autolock
2025-11-11 10:11:59,445 - linien_server.autolock.autolock - DEBUG - Start the autolock
2025-11-11 10:11:59,467 - linien_server.autolock.autolock - DEBUG - (x0, x1) = (1650,1800)
2025-11-11 10:11:59,508 - linien_server.autolock.autolock - DEBUG - Start autolock with mode 1
2025-11-11 10:11:59,718 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-11 10:11:59,720 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-11 10:11:59,723 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-11 10:11:59,824 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-11 10:11:59,854 - linien_server.autolock.robust - ERROR - Not enough spectra collected:2 of 5
2025-11-11 10:12:00,115 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-11 10:12:00,117 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-11 10:12:00,119 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-11 10:12:00,216 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-11 10:12:00,244 - linien_server.autolock.robust - ERROR - Not enough spectra collected:3 of 5
2025-11-11 10:12:00,504 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-11 10:12:00,508 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-11 10:12:00,510 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-11 10:12:00,607 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-11 10:12:00,636 - linien_server.autolock.robust - ERROR - Not enough spectra collected:4 of 5
2025-11-11 10:12:00,897 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-11 10:12:00,899 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-11 10:12:00,901 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-11 10:12:00,999 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-11 10:12:01,027 - linien_server.autolock.robust - DEBUG - enough spectra!, calculate
2025-11-11 10:12:01,028 - linien_server.autolock.robust - DEBUG - Entered in calculate_autolock_instructions_v2
2025-11-11 10:12:01,033 - linien_server.autolock.robust - DEBUG - Saved new robust_spectra.npy and target_idxs.npy
2025-11-11 10:12:01,035 - linien_server.autolock.utils - DEBUG - Entered in crop_spectra_to_same_view
2025-11-11 10:12:01,069 - linien_server.autolock.utils - DEBUG - correlation max: 32726
2025-11-11 10:12:01,070 - linien_server.autolock.utils - DEBUG - correlation argmax: 1013
2025-11-11 10:12:01,072 - linien_server.autolock.utils - DEBUG - s - s_jitter: [0 0 0 0 0]
2025-11-11 10:12:01,106 - linien_server.autolock.utils - DEBUG - correlation max: 241457
2025-11-11 10:12:01,108 - linien_server.autolock.utils - DEBUG - correlation argmax: 2053
2025-11-11 10:12:01,110 - linien_server.autolock.utils - DEBUG - s - s_jitter: [-1 -1 -1  0 -1]
2025-11-11 10:12:01,144 - linien_server.autolock.utils - DEBUG - correlation max: 238268
2025-11-11 10:12:01,145 - linien_server.autolock.utils - DEBUG - correlation argmax: 2057
2025-11-11 10:12:01,147 - linien_server.autolock.utils - DEBUG - s - s_jitter: [-1 -1  0  0  0]
2025-11-11 10:12:01,182 - linien_server.autolock.utils - DEBUG - correlation max: 239635
2025-11-11 10:12:01,183 - linien_server.autolock.utils - DEBUG - correlation argmax: 2059
2025-11-11 10:12:01,185 - linien_server.autolock.utils - DEBUG - s - s_jitter: [ 0 -1 -1 -1 -1]
2025-11-11 10:12:01,219 - linien_server.autolock.utils - DEBUG - correlation max: 241081
2025-11-11 10:12:01,221 - linien_server.autolock.utils - DEBUG - correlation argmax: 2054
2025-11-11 10:12:01,223 - linien_server.autolock.utils - DEBUG - s - s_jitter: [-1  0  0  0  0]
2025-11-11 10:12:01,232 - linien_server.autolock.utils - DEBUG - Saved new correlations.npy
2025-11-11 10:12:01,233 - linien_server.autolock.utils - DEBUG - Shifts calculated for cropping: [1035, -5, -9, -11, -6]
2025-11-11 10:12:01,237 - linien_server.autolock.robust - DEBUG - Saved new robust_spectra_cropped.npy
2025-11-11 10:12:01,238 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-11 10:12:01,239 - linien_server.autolock.utils - DEBUG - Spectrum length:1002
2025-11-11 10:12:01,242 - linien_server.autolock.utils - DEBUG - Spectrum: [-9 -9 -8 -8 -9]...[-5 -5 -5 -5 -5]
2025-11-11 10:12:01,243 - linien_server.autolock.utils - DEBUG - Target indices: [1653, 1694]
2025-11-11 10:12:01,244 - linien_server.autolock.autolock - ERROR - Error while handling new spectrum
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/autolock.py", line 212, in react_to_new_spectrum
    return self.algorithm.handle_new_spectrum(combined_error_signal)
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/robust.py", line 109, in handle_new_spectrum
    description, final_wait_time, time_scale = calculate_autolock_instructions_v2(
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/robust.py", line 275, in calculate_autolock_instructions_v2
    round(np.mean([get_time_scale(spectrum, target_idxs) for spectrum in spectra]))
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/robust.py", line 275, in <listcomp>
    round(np.mean([get_time_scale(spectrum, target_idxs) for spectrum in spectra]))
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/utils.py", line 138, in get_time_scale
    return np.abs(np.argmin(part) - np.argmax(part))
  File "<__array_function__ internals>", line 5, in argmin
  File "/usr/lib/python3/dist-packages/numpy/core/fromnumeric.py", line 1276, in argmin
    return _wrapfunc(a, 'argmin', axis=axis, out=out)
  File "/usr/lib/python3/dist-packages/numpy/core/fromnumeric.py", line 57, in _wrapfunc
    return bound(*args, **kwds)
ValueError: attempt to get argmin of an empty sequence
2025-11-11 10:24:51,750 - linien_server.cli - INFO - Stopping Linien server
2025-11-11 10:24:51,887 - linien_server.cli - INFO - Stopped Linien server
2025-11-11 10:24:55,057 - linien_server.cli - DEBUG - Copied linien-server.service to /etc/systemd/system
2025-11-11 10:24:55,059 - linien_server.cli - INFO - Starting Linien server
2025-11-11 10:24:55,133 - linien_server.cli - INFO - Started Linien server
2025-11-11 10:25:11,274 - linien_server.parameters - INFO - Restoring parameters from /root/.local/share/linien/parameters.json
2025-11-11 10:25:11,277 - linien_server.parameters - INFO - Restored parameters from /root/.local/share/linien/parameters.json
2025-11-11 10:25:11,284 - linien_common.influxdb - INFO - Saved InfluxDB credentials to /root/.local/share/linien/influxdb_credentials.json
2025-11-11 10:25:11,471 - linien_server.acquisition - INFO - Using fpgautil to deploy gateware.
2025-11-11 10:25:11,606 - linien_server.server - DEBUG - Ping  1
2025-11-11 10:25:11,648 - linien_server.mdio_tool - INFO - Disabling ethernet blinking with mdio-tool at /usr/local/lib/python3.10/dist-packages/linien_server/mdio-tool
2025-11-11 10:25:11,662 - linien_server.server - INFO - Starting server.
2025-11-11 10:25:12,625 - linien_server.server - DEBUG - Ping  2
2025-11-11 10:25:13,648 - linien_server.server - DEBUG - Ping  3
2025-11-11 10:25:13,670 - linien_server.server - DEBUG - Further pings will be suppressed
2025-11-11 10:25:43,237 - linien_server.autolock.autolock - DEBUG - Initialize Autolock
2025-11-11 10:25:43,238 - linien_server.autolock.autolock - DEBUG - Start the autolock
2025-11-11 10:25:43,240 - linien_server.autolock.autolock - DEBUG - (x0, x1) = (1250,1400)
2025-11-11 10:25:43,244 - linien_server.autolock.autolock - DEBUG - Start autolock with mode 1
2025-11-11 10:25:43,551 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-11 10:25:43,554 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-11 10:25:43,556 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-11 10:25:43,657 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-11 10:25:43,686 - linien_server.autolock.robust - ERROR - Not enough spectra collected:2 of 5
2025-11-11 10:25:43,882 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-11 10:25:43,884 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-11 10:25:43,887 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-11 10:25:43,986 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-11 10:25:44,015 - linien_server.autolock.robust - ERROR - Not enough spectra collected:3 of 5
2025-11-11 10:25:44,279 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-11 10:25:44,283 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-11 10:25:44,285 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-11 10:25:44,380 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-11 10:25:44,408 - linien_server.autolock.robust - ERROR - Not enough spectra collected:4 of 5
2025-11-11 10:25:44,663 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-11 10:25:44,666 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-11 10:25:44,668 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-11 10:25:44,763 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-11 10:25:44,791 - linien_server.autolock.robust - DEBUG - enough spectra!, calculate
2025-11-11 10:25:44,792 - linien_server.autolock.robust - DEBUG - Entered in calculate_autolock_instructions_v2
2025-11-11 10:25:44,798 - linien_server.autolock.robust - DEBUG - Saved new robust_spectra.npy and target_idxs.npy
2025-11-11 10:25:44,799 - linien_server.autolock.utils - DEBUG - Entered in crop_spectra_to_same_view
2025-11-11 10:25:44,801 - linien_server.autolock.utils - DEBUG - Saved new spectrum0_in_crop.npy
2025-11-11 10:25:44,836 - linien_server.autolock.utils - DEBUG - correlation max: 32743
2025-11-11 10:25:44,837 - linien_server.autolock.utils - DEBUG - correlation argmax: 719
2025-11-11 10:25:44,839 - linien_server.autolock.utils - DEBUG - s - s_jitter: [0 0 0 0 0]
2025-11-11 10:25:44,873 - linien_server.autolock.utils - DEBUG - correlation max: 241877
2025-11-11 10:25:44,874 - linien_server.autolock.utils - DEBUG - correlation argmax: 2054
2025-11-11 10:25:44,876 - linien_server.autolock.utils - DEBUG - s - s_jitter: [0 1 1 0 0]
2025-11-11 10:25:44,911 - linien_server.autolock.utils - DEBUG - correlation max: 250063
2025-11-11 10:25:44,912 - linien_server.autolock.utils - DEBUG - correlation argmax: 2053
2025-11-11 10:25:44,914 - linien_server.autolock.utils - DEBUG - s - s_jitter: [-2  0  1  1  1]
2025-11-11 10:25:44,948 - linien_server.autolock.utils - DEBUG - correlation max: 249860
2025-11-11 10:25:44,949 - linien_server.autolock.utils - DEBUG - correlation argmax: 2052
2025-11-11 10:25:44,951 - linien_server.autolock.utils - DEBUG - s - s_jitter: [-1  2  3  2  0]
2025-11-11 10:25:44,985 - linien_server.autolock.utils - DEBUG - correlation max: 247393
2025-11-11 10:25:44,987 - linien_server.autolock.utils - DEBUG - correlation argmax: 2059
2025-11-11 10:25:44,989 - linien_server.autolock.utils - DEBUG - s - s_jitter: [-1  1  1  0  0]
2025-11-11 10:25:44,993 - linien_server.autolock.utils - DEBUG - Saved new correlations.npy
2025-11-11 10:25:44,995 - linien_server.autolock.utils - DEBUG - Shifts calculated for cropping: [1329, -6, -5, -4, -11]
2025-11-11 10:25:44,998 - linien_server.autolock.robust - DEBUG - Saved new robust_spectra_cropped.npy
2025-11-11 10:25:44,999 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-11 10:25:45,000 - linien_server.autolock.utils - DEBUG - Spectrum length:708
2025-11-11 10:25:45,003 - linien_server.autolock.utils - DEBUG - Spectrum: [-30 -30 -29 -28 -26]...[-4 -4 -4 -4 -4]
2025-11-11 10:25:45,004 - linien_server.autolock.utils - DEBUG - Target indices: [1280, 1320]
2025-11-11 10:25:45,005 - linien_server.autolock.autolock - ERROR - Error while handling new spectrum
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/autolock.py", line 212, in react_to_new_spectrum
    return self.algorithm.handle_new_spectrum(combined_error_signal)
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/robust.py", line 109, in handle_new_spectrum
    description, final_wait_time, time_scale = calculate_autolock_instructions_v2(
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/robust.py", line 275, in calculate_autolock_instructions_v2
    round(np.mean([get_time_scale(spectrum, target_idxs) for spectrum in spectra]))
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/robust.py", line 275, in <listcomp>
    round(np.mean([get_time_scale(spectrum, target_idxs) for spectrum in spectra]))
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/utils.py", line 138, in get_time_scale
    return np.abs(np.argmin(part) - np.argmax(part))
  File "<__array_function__ internals>", line 5, in argmin
  File "/usr/lib/python3/dist-packages/numpy/core/fromnumeric.py", line 1276, in argmin
    return _wrapfunc(a, 'argmin', axis=axis, out=out)
  File "/usr/lib/python3/dist-packages/numpy/core/fromnumeric.py", line 57, in _wrapfunc
    return bound(*args, **kwds)
ValueError: attempt to get argmin of an empty sequence
2025-11-11 10:36:50,533 - linien_server.cli - INFO - Stopping Linien server
2025-11-11 10:36:50,676 - linien_server.cli - INFO - Stopped Linien server
2025-11-11 10:36:53,684 - linien_server.cli - DEBUG - Copied linien-server.service to /etc/systemd/system
2025-11-11 10:36:53,685 - linien_server.cli - INFO - Starting Linien server
2025-11-11 10:36:53,755 - linien_server.cli - INFO - Started Linien server
2025-11-11 10:37:10,989 - linien_server.parameters - INFO - Restoring parameters from /root/.local/share/linien/parameters.json
2025-11-11 10:37:10,992 - linien_server.parameters - INFO - Restored parameters from /root/.local/share/linien/parameters.json
2025-11-11 10:37:10,999 - linien_common.influxdb - INFO - Saved InfluxDB credentials to /root/.local/share/linien/influxdb_credentials.json
2025-11-11 10:37:11,236 - linien_server.acquisition - INFO - Using fpgautil to deploy gateware.
2025-11-11 10:37:11,506 - linien_server.server - DEBUG - Ping  1
2025-11-11 10:37:11,519 - linien_server.mdio_tool - INFO - Disabling ethernet blinking with mdio-tool at /usr/local/lib/python3.10/dist-packages/linien_server/mdio-tool
2025-11-11 10:37:11,541 - linien_server.server - INFO - Starting server.
2025-11-11 10:37:11,703 - linien_server.cli - DEBUG - Copied linien-server.service to /etc/systemd/system
2025-11-11 10:37:11,705 - linien_server.cli - INFO - Starting Linien server
2025-11-11 10:37:11,766 - linien_server.cli - INFO - Started Linien server
2025-11-11 10:37:12,515 - linien_server.server - DEBUG - Ping  2
2025-11-11 10:37:13,543 - linien_server.server - DEBUG - Ping  3
2025-11-11 10:37:13,567 - linien_server.server - DEBUG - Further pings will be suppressed
2025-11-11 10:37:37,495 - linien_server.autolock.autolock - DEBUG - Initialize Autolock
2025-11-11 10:37:37,514 - linien_server.autolock.autolock - DEBUG - Start the autolock
2025-11-11 10:37:37,515 - linien_server.autolock.autolock - DEBUG - (x0, x1) = (1000,1200)
2025-11-11 10:37:37,520 - linien_server.autolock.autolock - DEBUG - Start autolock with mode 1
2025-11-11 10:37:37,942 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-11 10:37:37,944 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-11 10:37:37,946 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-11 10:37:38,047 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-11 10:37:38,078 - linien_server.autolock.robust - ERROR - Not enough spectra collected:2 of 5
2025-11-11 10:37:38,366 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-11 10:37:38,368 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-11 10:37:38,371 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-11 10:37:38,471 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-11 10:37:38,499 - linien_server.autolock.robust - ERROR - Not enough spectra collected:3 of 5
2025-11-11 10:37:38,757 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-11 10:37:38,761 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-11 10:37:38,763 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-11 10:37:38,865 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-11 10:37:38,893 - linien_server.autolock.robust - ERROR - Not enough spectra collected:4 of 5
2025-11-11 10:37:39,095 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-11 10:37:39,097 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-11 10:37:39,099 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-11 10:37:39,200 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-11 10:37:39,229 - linien_server.autolock.robust - DEBUG - enough spectra!, calculate
2025-11-11 10:37:39,230 - linien_server.autolock.robust - DEBUG - Entered in calculate_autolock_instructions_v2
2025-11-11 10:37:39,236 - linien_server.autolock.robust - DEBUG - Saved new robust_spectra.npy and target_idxs.npy
2025-11-11 10:37:39,237 - linien_server.autolock.utils - DEBUG - Entered in crop_spectra_to_same_view
2025-11-11 10:37:39,240 - linien_server.autolock.autolock - ERROR - Error while handling new spectrum
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/autolock.py", line 212, in react_to_new_spectrum
    return self.algorithm.handle_new_spectrum(combined_error_signal)
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/robust.py", line 109, in handle_new_spectrum
    description, final_wait_time, time_scale = calculate_autolock_instructions_v2(
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/robust.py", line 268, in calculate_autolock_instructions_v2
    spectra, crop_left = crop_spectra_to_same_view(spectra_with_jitter)
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/utils.py", line 246, in crop_spectra_to_same_view
    np.save('/root/.local/share/linien/spectrum0_in_crop.npy',np.array([spectrum],[spectra_with_jitter[0]]))
TypeError: Field elements must be 2- or 3-tuples, got 'array([-9, -5, -5, ..., -4, -3, -4], dtype=int16)'
2025-11-11 10:38:45,677 - linien_server.cli - INFO - Stopping Linien server
2025-11-11 10:38:45,786 - linien_server.cli - INFO - Stopped Linien server
2025-11-11 10:38:48,954 - linien_server.cli - DEBUG - Copied linien-server.service to /etc/systemd/system
2025-11-11 10:38:48,955 - linien_server.cli - INFO - Starting Linien server
2025-11-11 10:38:49,025 - linien_server.cli - INFO - Started Linien server
2025-11-11 10:39:06,105 - linien_server.parameters - INFO - Restoring parameters from /root/.local/share/linien/parameters.json
2025-11-11 10:39:06,111 - linien_server.parameters - INFO - Restored parameters from /root/.local/share/linien/parameters.json
2025-11-11 10:39:06,116 - linien_common.influxdb - INFO - Saved InfluxDB credentials to /root/.local/share/linien/influxdb_credentials.json
2025-11-11 10:39:06,366 - linien_server.acquisition - INFO - Using fpgautil to deploy gateware.
2025-11-11 10:39:06,537 - linien_server.server - DEBUG - Ping  1
2025-11-11 10:39:06,548 - linien_server.mdio_tool - INFO - Disabling ethernet blinking with mdio-tool at /usr/local/lib/python3.10/dist-packages/linien_server/mdio-tool
2025-11-11 10:39:06,575 - linien_server.server - INFO - Starting server.
2025-11-11 10:39:07,371 - linien_server.cli - DEBUG - Copied linien-server.service to /etc/systemd/system
2025-11-11 10:39:07,372 - linien_server.cli - INFO - Starting Linien server
2025-11-11 10:39:07,442 - linien_server.cli - INFO - Started Linien server
2025-11-11 10:39:07,545 - linien_server.server - DEBUG - Ping  2
2025-11-11 10:39:08,556 - linien_server.server - DEBUG - Ping  3
2025-11-11 10:39:08,563 - linien_server.server - DEBUG - Further pings will be suppressed
2025-11-11 10:39:29,504 - linien_server.autolock.autolock - DEBUG - Initialize Autolock
2025-11-11 10:39:29,522 - linien_server.autolock.autolock - DEBUG - Start the autolock
2025-11-11 10:39:29,534 - linien_server.autolock.autolock - DEBUG - (x0, x1) = (900,1100)
2025-11-11 10:39:29,561 - linien_server.autolock.autolock - DEBUG - Start autolock with mode 1
2025-11-11 10:39:29,969 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-11 10:39:29,971 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-11 10:39:29,974 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-11 10:39:30,074 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-11 10:39:30,104 - linien_server.autolock.robust - ERROR - Not enough spectra collected:2 of 5
2025-11-11 10:39:30,387 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-11 10:39:30,390 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-11 10:39:30,391 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-11 10:39:30,486 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-11 10:39:30,515 - linien_server.autolock.robust - ERROR - Not enough spectra collected:3 of 5
2025-11-11 10:39:30,770 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-11 10:39:30,774 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-11 10:39:30,776 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-11 10:39:30,872 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-11 10:39:30,901 - linien_server.autolock.robust - ERROR - Not enough spectra collected:4 of 5
2025-11-11 10:39:31,164 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-11 10:39:31,166 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-11 10:39:31,168 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-11 10:39:31,264 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-11 10:39:31,292 - linien_server.autolock.robust - DEBUG - enough spectra!, calculate
2025-11-11 10:39:31,293 - linien_server.autolock.robust - DEBUG - Entered in calculate_autolock_instructions_v2
2025-11-11 10:39:31,299 - linien_server.autolock.robust - DEBUG - Saved new robust_spectra.npy and target_idxs.npy
2025-11-11 10:39:31,300 - linien_server.autolock.utils - DEBUG - Entered in crop_spectra_to_same_view
2025-11-11 10:39:31,303 - linien_server.autolock.utils - DEBUG - Saved new spectrum0_in_crop.npy
2025-11-11 10:39:31,337 - linien_server.autolock.utils - DEBUG - correlation max: 32714
2025-11-11 10:39:31,338 - linien_server.autolock.utils - DEBUG - correlation argmax: 774
2025-11-11 10:39:31,341 - linien_server.autolock.utils - DEBUG - s - s_jitter: [0 0 0 0 0]
2025-11-11 10:39:31,375 - linien_server.autolock.utils - DEBUG - correlation max: 235292
2025-11-11 10:39:31,376 - linien_server.autolock.utils - DEBUG - correlation argmax: 2045
2025-11-11 10:39:31,378 - linien_server.autolock.utils - DEBUG - s - s_jitter: [-5 -6 -4 -2  0]
2025-11-11 10:39:31,412 - linien_server.autolock.utils - DEBUG - correlation max: 238141
2025-11-11 10:39:31,413 - linien_server.autolock.utils - DEBUG - correlation argmax: 2051
2025-11-11 10:39:31,415 - linien_server.autolock.utils - DEBUG - s - s_jitter: [-4 -5 -7 -6 -5]
2025-11-11 10:39:31,450 - linien_server.autolock.utils - DEBUG - correlation max: 230378
2025-11-11 10:39:31,451 - linien_server.autolock.utils - DEBUG - correlation argmax: 2048
2025-11-11 10:39:31,453 - linien_server.autolock.utils - DEBUG - s - s_jitter: [-6 -6 -4 -4 -3]
2025-11-11 10:39:31,488 - linien_server.autolock.utils - DEBUG - correlation max: 234998
2025-11-11 10:39:31,489 - linien_server.autolock.utils - DEBUG - correlation argmax: 2049
2025-11-11 10:39:31,491 - linien_server.autolock.utils - DEBUG - s - s_jitter: [ -4  -8 -10  -7  -5]
2025-11-11 10:39:31,499 - linien_server.autolock.utils - DEBUG - Saved new correlations.npy
2025-11-11 10:39:31,500 - linien_server.autolock.utils - DEBUG - Shifts calculated for cropping: [1274, 3, -3, 0, -1]
2025-11-11 10:39:31,503 - linien_server.autolock.robust - DEBUG - Saved new robust_spectra_cropped.npy
2025-11-11 10:39:31,504 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-11 10:39:31,506 - linien_server.autolock.utils - DEBUG - Spectrum length:771
2025-11-11 10:39:31,508 - linien_server.autolock.utils - DEBUG - Spectrum: [-8 -8 -8 -8 -8]...[-4 -4 -4 -4 -4]
2025-11-11 10:39:31,510 - linien_server.autolock.utils - DEBUG - Target indices: [988, 1028]
2025-11-11 10:39:31,511 - linien_server.autolock.autolock - ERROR - Error while handling new spectrum
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/autolock.py", line 212, in react_to_new_spectrum
    return self.algorithm.handle_new_spectrum(combined_error_signal)
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/robust.py", line 109, in handle_new_spectrum
    description, final_wait_time, time_scale = calculate_autolock_instructions_v2(
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/robust.py", line 275, in calculate_autolock_instructions_v2
    round(np.mean([get_time_scale(spectrum, target_idxs) for spectrum in spectra]))
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/robust.py", line 275, in <listcomp>
    round(np.mean([get_time_scale(spectrum, target_idxs) for spectrum in spectra]))
  File "/usr/local/lib/python3.10/dist-packages/linien_server/autolock/utils.py", line 138, in get_time_scale
    return np.abs(np.argmin(part) - np.argmax(part))
  File "<__array_function__ internals>", line 5, in argmin
  File "/usr/lib/python3/dist-packages/numpy/core/fromnumeric.py", line 1276, in argmin
    return _wrapfunc(a, 'argmin', axis=axis, out=out)
  File "/usr/lib/python3/dist-packages/numpy/core/fromnumeric.py", line 57, in _wrapfunc
    return bound(*args, **kwds)
ValueError: attempt to get argmin of an empty sequence
2025-11-11 10:48:19,215 - linien_server.cli - INFO - Stopping Linien server
2025-11-11 10:48:19,346 - linien_server.cli - INFO - Stopped Linien server
2025-11-11 10:48:22,500 - linien_server.cli - DEBUG - Copied linien-server.service to /etc/systemd/system
2025-11-11 10:48:22,501 - linien_server.cli - INFO - Starting Linien server
2025-11-11 10:48:22,570 - linien_server.cli - INFO - Started Linien server
2025-11-11 10:48:38,849 - linien_server.parameters - INFO - Restoring parameters from /root/.local/share/linien/parameters.json
2025-11-11 10:48:38,853 - linien_server.parameters - INFO - Restored parameters from /root/.local/share/linien/parameters.json
2025-11-11 10:48:38,856 - linien_common.influxdb - INFO - Saved InfluxDB credentials to /root/.local/share/linien/influxdb_credentials.json
2025-11-11 10:48:39,042 - linien_server.acquisition - INFO - Using fpgautil to deploy gateware.
2025-11-11 10:48:39,173 - linien_server.server - DEBUG - Ping  1
2025-11-11 10:48:39,215 - linien_server.mdio_tool - INFO - Disabling ethernet blinking with mdio-tool at /usr/local/lib/python3.10/dist-packages/linien_server/mdio-tool
2025-11-11 10:48:39,260 - linien_server.server - INFO - Starting server.
2025-11-11 10:48:40,198 - linien_server.server - DEBUG - Ping  2
2025-11-11 10:48:41,212 - linien_server.server - DEBUG - Ping  3
2025-11-11 10:48:41,230 - linien_server.server - DEBUG - Further pings will be suppressed
2025-11-11 10:49:33,280 - linien_server.autolock.autolock - DEBUG - Initialize Autolock
2025-11-11 10:49:33,302 - linien_server.autolock.autolock - DEBUG - Start the autolock
2025-11-11 10:49:33,330 - linien_server.autolock.autolock - DEBUG - (x0, x1) = (1750,1900)
2025-11-11 10:49:33,383 - linien_server.autolock.autolock - DEBUG - Start autolock with mode 1
2025-11-11 10:49:33,793 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-11 10:49:33,795 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-11 10:49:33,797 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-11 10:49:33,893 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-11 10:49:33,923 - linien_server.autolock.robust - ERROR - Not enough spectra collected:2 of 5
2025-11-11 10:49:34,125 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-11 10:49:34,127 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-11 10:49:34,129 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-11 10:49:34,225 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-11 10:49:34,252 - linien_server.autolock.robust - ERROR - Not enough spectra collected:3 of 5
2025-11-11 10:49:34,521 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-11 10:49:34,525 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-11 10:49:34,527 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-11 10:49:34,621 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-11 10:49:34,649 - linien_server.autolock.robust - ERROR - Not enough spectra collected:4 of 5
2025-11-11 10:49:34,918 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-11 10:49:34,920 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-11 10:49:34,922 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-11 10:49:35,018 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-11 10:49:35,046 - linien_server.autolock.robust - DEBUG - enough spectra!, calculate
2025-11-11 10:49:35,047 - linien_server.autolock.robust - DEBUG - Entered in calculate_autolock_instructions_v2
2025-11-11 10:49:35,052 - linien_server.autolock.robust - DEBUG - Saved new robust_spectra.npy and target_idxs.npy
2025-11-11 10:49:35,054 - linien_server.autolock.utils - DEBUG - Entered in crop_spectra_to_same_view
2025-11-11 10:49:35,186 - linien_server.autolock.utils - DEBUG - Shifts calculated for cropping: [1, -2, -3, -3, -4]
2025-11-11 10:49:35,190 - linien_server.autolock.robust - DEBUG - Saved new robust_spectra_cropped.npy
2025-11-11 10:49:35,191 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-11 10:49:35,192 - linien_server.autolock.utils - DEBUG - Spectrum length:2043
2025-11-11 10:49:35,195 - linien_server.autolock.utils - DEBUG - Spectrum: [-2 -2 -2 -2 -2]...[-10 -10 -10 -10 -10]
2025-11-11 10:49:35,196 - linien_server.autolock.utils - DEBUG - Target indices: [1745, 1774]
2025-11-11 10:49:35,198 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-11 10:49:35,199 - linien_server.autolock.utils - DEBUG - Spectrum length:2043
2025-11-11 10:49:35,201 - linien_server.autolock.utils - DEBUG - Spectrum: [-2 -1 -2 -2 -2]...[-10 -10 -10 -10 -10]
2025-11-11 10:49:35,202 - linien_server.autolock.utils - DEBUG - Target indices: [1745, 1774]
2025-11-11 10:49:35,204 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-11 10:49:35,205 - linien_server.autolock.utils - DEBUG - Spectrum length:2043
2025-11-11 10:49:35,207 - linien_server.autolock.utils - DEBUG - Spectrum: [-2 -2 -2 -3 -4]...[-10 -10 -10 -10 -10]
2025-11-11 10:49:35,209 - linien_server.autolock.utils - DEBUG - Target indices: [1745, 1774]
2025-11-11 10:49:35,210 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-11 10:49:35,211 - linien_server.autolock.utils - DEBUG - Spectrum length:2043
2025-11-11 10:49:35,213 - linien_server.autolock.utils - DEBUG - Spectrum: [-3 -3 -2 -2 -2]...[-11 -11 -11 -11 -11]
2025-11-11 10:49:35,215 - linien_server.autolock.utils - DEBUG - Target indices: [1745, 1774]
2025-11-11 10:49:35,216 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-11 10:49:35,217 - linien_server.autolock.utils - DEBUG - Spectrum length:2043
2025-11-11 10:49:35,220 - linien_server.autolock.utils - DEBUG - Spectrum: [-6 -3 -4 -4 -4]...[-10 -10 -10 -10 -10]
2025-11-11 10:49:35,221 - linien_server.autolock.utils - DEBUG - Target indices: [1745, 1774]
2025-11-11 10:49:35,222 - linien_server.autolock.robust - DEBUG - x scale is 27
2025-11-11 10:49:35,276 - linien_server.autolock.robust - DEBUG - shift prepared spectrum by 12 samples to the left to match the original spectrum
2025-11-11 10:49:35,392 - linien_server.autolock.robust - DEBUG - Detected peaks with (position, height): [(1757, 117), (1744, 365), (1634, -307), (1394, 916), (1344, -1059)]
2025-11-11 10:49:35,460 - linien_server.autolock.robust - DEBUG - Determined lock regions: [(1717, 1785), (1717, 1789), (1717, 1789), (1717, 1789), (1717, 1789)]
2025-11-11 10:49:35,461 - linien_server.autolock.robust - DEBUG - Try out tolerance 0.95
2025-11-11 10:49:35,463 - linien_server.autolock.robust - DEBUG - Original peaks: [(1757, 117), (1744, 365), (1634, -307), (1394, 916), (1344, -1059)]
2025-11-11 10:49:35,464 - linien_server.autolock.robust - DEBUG - Filtered peaks: [(1757, 111.14999999999999), (1744, 346.75), (1634, -291.65), (1394, 870.1999999999999), (1344, -1006.05)]
2025-11-11 10:49:35,466 - linien_server.autolock.robust - DEBUG - Discarded peaks: [(1757, 117), (1744, 365), (1634, -307), (1394, 916), (1344, -1059)]
2025-11-11 10:49:35,467 - linien_server.autolock.robust - DEBUG - Target peak index in prepared spectrum: 1757
2025-11-11 10:49:35,471 - linien_server.autolock.robust - DEBUG - final wait time is 32 samples
2025-11-11 10:49:35,473 - linien_server.autolock.robust - DEBUG - Generated description: [(1209, -1006), (45, 870), (216, -291), (99, 346), (11, 111)]
2025-11-11 10:49:35,518 - linien_server.autolock.robust - DEBUG - Lock position found at index 1784 for current spectrum
2025-11-11 10:49:35,553 - linien_server.autolock.robust - DEBUG - Lock position found at index 1783 for current spectrum
2025-11-11 10:49:35,588 - linien_server.autolock.robust - DEBUG - Lock position found at index 1782 for current spectrum
2025-11-11 10:49:35,624 - linien_server.autolock.robust - DEBUG - Lock position found at index 1781 for current spectrum
2025-11-11 10:49:35,661 - linien_server.autolock.robust - DEBUG - Lock position found at index 1782 for current spectrum
2025-11-11 10:49:35,663 - linien_server.autolock.robust - DEBUG - Description is [(1209, -1006), (45, 870), (216, -291), (99, 346), (11, 111)]
2025-11-11 10:49:35,665 - linien_server.autolock.robust - DEBUG - Calculation of autolock description took 0.6174309253692627
2025-11-11 10:49:35,725 - linien_server.server - ERROR - incorrect data received for lock state, ignoring!
2025-11-11 10:49:36,145 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-11 10:49:36,147 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-11 10:49:36,150 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-11 10:49:36,152 - linien_server.autolock.autolock - DEBUG - after lock
2025-11-11 10:57:44,410 - linien_server.autolock.autolock - DEBUG - Initialize Autolock
2025-11-11 10:57:44,417 - linien_server.autolock.autolock - DEBUG - Start the autolock
2025-11-11 10:57:44,418 - linien_server.autolock.autolock - DEBUG - (x0, x1) = (1500,1700)
2025-11-11 10:57:44,434 - linien_server.autolock.autolock - DEBUG - Start autolock with mode 1
2025-11-11 10:57:44,840 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-11 10:57:44,843 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-11 10:57:44,845 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-11 10:57:44,947 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-11 10:57:44,975 - linien_server.autolock.robust - ERROR - Not enough spectra collected:2 of 5
2025-11-11 10:57:45,262 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-11 10:57:45,265 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-11 10:57:45,267 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-11 10:57:45,362 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-11 10:57:45,390 - linien_server.autolock.robust - ERROR - Not enough spectra collected:3 of 5
2025-11-11 10:57:45,655 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-11 10:57:45,657 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-11 10:57:45,659 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-11 10:57:45,759 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-11 10:57:45,789 - linien_server.autolock.robust - ERROR - Not enough spectra collected:4 of 5
2025-11-11 10:57:46,054 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-11 10:57:46,056 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-11 10:57:46,059 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-11 10:57:46,159 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-11 10:57:46,188 - linien_server.autolock.robust - DEBUG - enough spectra!, calculate
2025-11-11 10:57:46,190 - linien_server.autolock.robust - DEBUG - Entered in calculate_autolock_instructions_v2
2025-11-11 10:57:46,195 - linien_server.autolock.robust - DEBUG - Saved new robust_spectra.npy and target_idxs.npy
2025-11-11 10:57:46,196 - linien_server.autolock.utils - DEBUG - Entered in crop_spectra_to_same_view
2025-11-11 10:57:46,329 - linien_server.autolock.utils - DEBUG - Shifts calculated for cropping: [1, -245, -250, -253, -252]
2025-11-11 10:57:46,332 - linien_server.autolock.robust - DEBUG - Saved new robust_spectra_cropped.npy
2025-11-11 10:57:46,334 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-11 10:57:46,335 - linien_server.autolock.utils - DEBUG - Spectrum length:1794
2025-11-11 10:57:46,338 - linien_server.autolock.utils - DEBUG - Spectrum: [3 3 3 3 3]...[-8 -8 -8 -8 -8]
2025-11-11 10:57:46,339 - linien_server.autolock.utils - DEBUG - Target indices: [1292, 1337]
2025-11-11 10:57:46,340 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-11 10:57:46,341 - linien_server.autolock.utils - DEBUG - Spectrum length:1794
2025-11-11 10:57:46,344 - linien_server.autolock.utils - DEBUG - Spectrum: [1 1 1 1 1]...[-9 -9 -9 -9 -9]
2025-11-11 10:57:46,345 - linien_server.autolock.utils - DEBUG - Target indices: [1292, 1337]
2025-11-11 10:57:46,347 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-11 10:57:46,348 - linien_server.autolock.utils - DEBUG - Spectrum length:1794
2025-11-11 10:57:46,351 - linien_server.autolock.utils - DEBUG - Spectrum: [1 1 1 1 2]...[-8 -8 -8 -8 -8]
2025-11-11 10:57:46,352 - linien_server.autolock.utils - DEBUG - Target indices: [1292, 1337]
2025-11-11 10:57:46,353 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-11 10:57:46,354 - linien_server.autolock.utils - DEBUG - Spectrum length:1794
2025-11-11 10:57:46,357 - linien_server.autolock.utils - DEBUG - Spectrum: [-9  2  2  2  2]...[-8 -8 -8 -8 -8]
2025-11-11 10:57:46,358 - linien_server.autolock.utils - DEBUG - Target indices: [1292, 1337]
2025-11-11 10:57:46,360 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-11 10:57:46,361 - linien_server.autolock.utils - DEBUG - Spectrum length:1794
2025-11-11 10:57:46,363 - linien_server.autolock.utils - DEBUG - Spectrum: [2 2 2 2 1]...[-9 -9 -9 -9 -9]
2025-11-11 10:57:46,365 - linien_server.autolock.utils - DEBUG - Target indices: [1292, 1337]
2025-11-11 10:57:46,366 - linien_server.autolock.robust - DEBUG - x scale is 37
2025-11-11 10:57:46,410 - linien_server.autolock.robust - DEBUG - shift prepared spectrum by 17 samples to the left to match the original spectrum
2025-11-11 10:57:46,503 - linien_server.autolock.robust - DEBUG - Detected peaks with (position, height): [(1311, 429), (1221, -352), (998, 1028), (951, -1273), (123, 147)]
2025-11-11 10:57:46,585 - linien_server.autolock.robust - DEBUG - Determined lock regions: [(1276, 1348), (1278, 1350), (1284, 1352), (1282, 1349), (1284, 1352)]
2025-11-11 10:57:46,586 - linien_server.autolock.robust - DEBUG - Try out tolerance 0.95
2025-11-11 10:57:46,588 - linien_server.autolock.robust - DEBUG - Original peaks: [(1311, 429), (1221, -352), (998, 1028), (951, -1273), (123, 147)]
2025-11-11 10:57:46,590 - linien_server.autolock.robust - DEBUG - Filtered peaks: [(1311, 407.54999999999995), (1221, -334.4), (998, 976.5999999999999), (951, -1209.35), (123, 139.65)]
2025-11-11 10:57:46,591 - linien_server.autolock.robust - DEBUG - Discarded peaks: [(1311, 429), (1221, -352), (998, 1028), (951, -1273), (123, 147)]
2025-11-11 10:57:46,593 - linien_server.autolock.robust - DEBUG - Target peak index in prepared spectrum: 1311
2025-11-11 10:57:46,595 - linien_server.autolock.robust - DEBUG - final wait time is 5 samples
2025-11-11 10:57:46,596 - linien_server.autolock.robust - DEBUG - Generated description: [(110, 139), (745, -1209), (42, 976), (200, -334), (81, 407)]
2025-11-11 10:57:46,628 - linien_server.autolock.robust - DEBUG - Lock position found at index 1312 for current spectrum
2025-11-11 10:57:46,714 - linien_server.autolock.robust - DEBUG - Lock position found at index 1314 for current spectrum
2025-11-11 10:57:46,746 - linien_server.autolock.robust - DEBUG - Try out tolerance 0.9
2025-11-11 10:57:46,749 - linien_server.autolock.robust - DEBUG - Original peaks: [(1311, 429), (1221, -352), (998, 1028), (951, -1273), (123, 147)]
2025-11-11 10:57:46,750 - linien_server.autolock.robust - DEBUG - Filtered peaks: [(1311, 386.1), (1221, -316.8), (998, 925.2), (951, -1145.7), (123, 132.3)]
2025-11-11 10:57:46,751 - linien_server.autolock.robust - DEBUG - Discarded peaks: [(1311, 429), (1221, -352), (998, 1028), (951, -1273), (123, 147)]
2025-11-11 10:57:46,753 - linien_server.autolock.robust - DEBUG - Target peak index in prepared spectrum: 1311
2025-11-11 10:57:46,755 - linien_server.autolock.robust - DEBUG - final wait time is 7 samples
2025-11-11 10:57:46,757 - linien_server.autolock.robust - DEBUG - Generated description: [(110, 132), (745, -1145), (42, 925), (200, -316), (81, 386)]
2025-11-11 10:57:46,788 - linien_server.autolock.robust - DEBUG - Lock position found at index 1312 for current spectrum
2025-11-11 10:57:46,873 - linien_server.autolock.robust - DEBUG - Lock position found at index 1315 for current spectrum
2025-11-11 10:57:46,903 - linien_server.autolock.robust - DEBUG - Try out tolerance 0.85
2025-11-11 10:57:46,905 - linien_server.autolock.robust - DEBUG - Original peaks: [(1311, 429), (1221, -352), (998, 1028), (951, -1273), (123, 147)]
2025-11-11 10:57:46,906 - linien_server.autolock.robust - DEBUG - Filtered peaks: [(1311, 364.65), (1221, -299.2), (998, 873.8), (951, -1082.05), (123, 124.95)]
2025-11-11 10:57:46,907 - linien_server.autolock.robust - DEBUG - Discarded peaks: [(1311, 429), (1221, -352), (998, 1028), (951, -1273), (123, 147)]
2025-11-11 10:57:46,909 - linien_server.autolock.robust - DEBUG - Target peak index in prepared spectrum: 1311
2025-11-11 10:57:46,911 - linien_server.autolock.robust - DEBUG - final wait time is 8 samples
2025-11-11 10:57:46,913 - linien_server.autolock.robust - DEBUG - Generated description: [(110, 124), (745, -1082), (42, 873), (200, -299), (81, 364)]
2025-11-11 10:57:46,944 - linien_server.autolock.robust - DEBUG - Lock position found at index 1312 for current spectrum
2025-11-11 10:57:47,030 - linien_server.autolock.robust - DEBUG - Lock position found at index 1315 for current spectrum
2025-11-11 10:57:47,060 - linien_server.autolock.robust - DEBUG - Try out tolerance 0.8
2025-11-11 10:57:47,062 - linien_server.autolock.robust - DEBUG - Original peaks: [(1311, 429), (1221, -352), (998, 1028), (951, -1273), (123, 147)]
2025-11-11 10:57:47,064 - linien_server.autolock.robust - DEBUG - Filtered peaks: [(1311, 343.20000000000005), (1221, -281.6), (998, 822.4000000000001), (951, -1018.4000000000001), (123, 117.60000000000001)]
2025-11-11 10:57:47,065 - linien_server.autolock.robust - DEBUG - Discarded peaks: [(1311, 429), (1221, -352), (998, 1028), (951, -1273), (123, 147)]
2025-11-11 10:57:47,067 - linien_server.autolock.robust - DEBUG - Target peak index in prepared spectrum: 1311
2025-11-11 10:57:47,069 - linien_server.autolock.robust - DEBUG - final wait time is 9 samples
2025-11-11 10:57:47,070 - linien_server.autolock.robust - DEBUG - Generated description: [(110, 117), (745, -1018), (42, 822), (200, -281), (81, 343)]
2025-11-11 10:57:47,101 - linien_server.autolock.robust - DEBUG - Lock position found at index 1312 for current spectrum
2025-11-11 10:57:47,131 - linien_server.autolock.robust - DEBUG - Lock position found at index 1318 for current spectrum
2025-11-11 10:57:47,189 - linien_server.autolock.robust - DEBUG - Lock position found at index 1314 for current spectrum
2025-11-11 10:57:47,219 - linien_server.autolock.robust - DEBUG - Try out tolerance 0.75
2025-11-11 10:57:47,222 - linien_server.autolock.robust - DEBUG - Original peaks: [(1311, 429), (1221, -352), (998, 1028), (951, -1273), (123, 147)]
2025-11-11 10:57:47,223 - linien_server.autolock.robust - DEBUG - Filtered peaks: [(1311, 321.75), (1221, -264.0), (998, 771.0), (951, -954.75), (123, 110.25)]
2025-11-11 10:57:47,224 - linien_server.autolock.robust - DEBUG - Discarded peaks: [(1311, 429), (1221, -352), (998, 1028), (951, -1273), (123, 147)]
2025-11-11 10:57:47,226 - linien_server.autolock.robust - DEBUG - Target peak index in prepared spectrum: 1311
2025-11-11 10:57:47,228 - linien_server.autolock.robust - DEBUG - final wait time is 10 samples
2025-11-11 10:57:47,230 - linien_server.autolock.robust - DEBUG - Generated description: [(110, 110), (745, -954), (42, 771), (200, -264), (81, 321)]
2025-11-11 10:57:47,261 - linien_server.autolock.robust - DEBUG - Lock position found at index 1312 for current spectrum
2025-11-11 10:57:47,289 - linien_server.autolock.robust - DEBUG - Lock position found at index 1316 for current spectrum
2025-11-11 10:57:47,345 - linien_server.autolock.robust - DEBUG - Lock position found at index 1314 for current spectrum
2025-11-11 10:57:47,375 - linien_server.autolock.robust - DEBUG - Try out tolerance 0.7
2025-11-11 10:57:47,377 - linien_server.autolock.robust - DEBUG - Original peaks: [(1311, 429), (1221, -352), (998, 1028), (951, -1273), (123, 147)]
2025-11-11 10:57:47,378 - linien_server.autolock.robust - DEBUG - Filtered peaks: [(1311, 300.29999999999995), (1221, -246.39999999999998), (998, 719.5999999999999), (951, -891.0999999999999)]
2025-11-11 10:57:47,380 - linien_server.autolock.robust - DEBUG - Discarded peaks: [(1311, 429), (1221, -352), (998, 1028), (951, -1273), (123, 147)]
2025-11-11 10:57:47,381 - linien_server.autolock.robust - DEBUG - Target peak index in prepared spectrum: 1311
2025-11-11 10:57:47,384 - linien_server.autolock.robust - DEBUG - final wait time is 11 samples
2025-11-11 10:57:47,385 - linien_server.autolock.robust - DEBUG - Generated description: [(855, -891), (42, 719), (200, -246), (81, 300)]
2025-11-11 10:57:47,416 - linien_server.autolock.robust - DEBUG - Lock position found at index 1312 for current spectrum
2025-11-11 10:57:47,443 - linien_server.autolock.robust - DEBUG - Lock position found at index 1315 for current spectrum
2025-11-11 10:57:47,471 - linien_server.autolock.robust - DEBUG - Lock position found at index 1316 for current spectrum
2025-11-11 10:57:47,500 - linien_server.autolock.robust - DEBUG - Lock position found at index 1314 for current spectrum
2025-11-11 10:57:47,530 - linien_server.autolock.robust - DEBUG - Lock position found at index 1314 for current spectrum
2025-11-11 10:57:47,532 - linien_server.autolock.robust - DEBUG - Description is [(855, -891), (42, 719), (200, -246), (81, 300)]
2025-11-11 10:57:47,534 - linien_server.autolock.robust - DEBUG - Calculation of autolock description took 1.3442599773406982
2025-11-11 10:57:47,596 - linien_server.server - ERROR - incorrect data received for lock state, ignoring!
2025-11-11 10:57:47,978 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-11 10:57:47,982 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-11 10:57:47,984 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-11 10:57:47,986 - linien_server.autolock.autolock - DEBUG - after lock
2025-11-11 10:59:48,930 - linien_server.autolock.autolock - DEBUG - Initialize Autolock
2025-11-11 10:59:48,955 - linien_server.autolock.autolock - DEBUG - Start the autolock
2025-11-11 10:59:48,977 - linien_server.autolock.autolock - DEBUG - (x0, x1) = (1500,1800)
2025-11-11 10:59:49,018 - linien_server.autolock.autolock - DEBUG - Start autolock with mode 1
2025-11-11 10:59:49,153 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-11 10:59:49,155 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-11 10:59:49,158 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-11 10:59:49,254 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-11 10:59:49,282 - linien_server.autolock.robust - ERROR - Not enough spectra collected:2 of 5
2025-11-11 10:59:49,545 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-11 10:59:49,547 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-11 10:59:49,549 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-11 10:59:49,645 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-11 10:59:49,673 - linien_server.autolock.robust - ERROR - Not enough spectra collected:3 of 5
2025-11-11 10:59:49,881 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-11 10:59:49,883 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-11 10:59:49,885 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-11 10:59:49,981 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-11 10:59:50,009 - linien_server.autolock.robust - ERROR - Not enough spectra collected:4 of 5
2025-11-11 10:59:50,270 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-11 10:59:50,272 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-11 10:59:50,274 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-11 10:59:50,370 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-11 10:59:50,398 - linien_server.autolock.robust - DEBUG - enough spectra!, calculate
2025-11-11 10:59:50,399 - linien_server.autolock.robust - DEBUG - Entered in calculate_autolock_instructions_v2
2025-11-11 10:59:50,404 - linien_server.autolock.robust - DEBUG - Saved new robust_spectra.npy and target_idxs.npy
2025-11-11 10:59:50,405 - linien_server.autolock.utils - DEBUG - Entered in crop_spectra_to_same_view
2025-11-11 10:59:50,538 - linien_server.autolock.utils - DEBUG - Shifts calculated for cropping: [1, 22, 23, 22, 22]
2025-11-11 10:59:50,541 - linien_server.autolock.robust - DEBUG - Saved new robust_spectra_cropped.npy
2025-11-11 10:59:50,542 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-11 10:59:50,544 - linien_server.autolock.utils - DEBUG - Spectrum length:2026
2025-11-11 10:59:50,547 - linien_server.autolock.utils - DEBUG - Spectrum: [-7  0 -1 -1 -1]...[-11 -11 -11 -11 -11]
2025-11-11 10:59:50,548 - linien_server.autolock.utils - DEBUG - Target indices: [1646, 1681]
2025-11-11 10:59:50,549 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-11 10:59:50,550 - linien_server.autolock.utils - DEBUG - Spectrum length:2026
2025-11-11 10:59:50,553 - linien_server.autolock.utils - DEBUG - Spectrum: [-1 -1 -1 -1  0]...[-11 -11 -11 -11 -11]
2025-11-11 10:59:50,554 - linien_server.autolock.utils - DEBUG - Target indices: [1646, 1681]
2025-11-11 10:59:50,555 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-11 10:59:50,556 - linien_server.autolock.utils - DEBUG - Spectrum length:2026
2025-11-11 10:59:50,559 - linien_server.autolock.utils - DEBUG - Spectrum: [-1 -1  0  0  0]...[-11 -11 -11 -10 -10]
2025-11-11 10:59:50,560 - linien_server.autolock.utils - DEBUG - Target indices: [1646, 1681]
2025-11-11 10:59:50,561 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-11 10:59:50,562 - linien_server.autolock.utils - DEBUG - Spectrum length:2026
2025-11-11 10:59:50,565 - linien_server.autolock.utils - DEBUG - Spectrum: [0 0 0 0 0]...[-11 -11 -11 -10 -10]
2025-11-11 10:59:50,566 - linien_server.autolock.utils - DEBUG - Target indices: [1646, 1681]
2025-11-11 10:59:50,567 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-11 10:59:50,568 - linien_server.autolock.utils - DEBUG - Spectrum length:2026
2025-11-11 10:59:50,571 - linien_server.autolock.utils - DEBUG - Spectrum: [ 0 -1  0  0  0]...[-10 -10 -10 -10 -10]
2025-11-11 10:59:50,572 - linien_server.autolock.utils - DEBUG - Target indices: [1646, 1681]
2025-11-11 10:59:50,574 - linien_server.autolock.robust - DEBUG - x scale is 34
2025-11-11 10:59:50,627 - linien_server.autolock.robust - DEBUG - shift prepared spectrum by 15 samples to the left to match the original spectrum
2025-11-11 10:59:50,736 - linien_server.autolock.robust - DEBUG - Detected peaks with (position, height): [(1661, 311), (1555, -421), (1321, 928), (1268, -1278)]
2025-11-11 10:59:50,796 - linien_server.autolock.robust - DEBUG - Determined lock regions: [(1630, 1696), (1630, 1696), (1630, 1696), (1630, 1696), (1630, 1696)]
2025-11-11 10:59:50,798 - linien_server.autolock.robust - DEBUG - Try out tolerance 0.95
2025-11-11 10:59:50,799 - linien_server.autolock.robust - DEBUG - Original peaks: [(1661, 311), (1555, -421), (1321, 928), (1268, -1278)]
2025-11-11 10:59:50,801 - linien_server.autolock.robust - DEBUG - Filtered peaks: [(1661, 295.45), (1555, -399.95), (1321, 881.5999999999999), (1268, -1214.1)]
2025-11-11 10:59:50,802 - linien_server.autolock.robust - DEBUG - Discarded peaks: [(1661, 311), (1555, -421), (1321, 928), (1268, -1278)]
2025-11-11 10:59:50,803 - linien_server.autolock.robust - DEBUG - Target peak index in prepared spectrum: 1661
2025-11-11 10:59:50,806 - linien_server.autolock.robust - DEBUG - final wait time is 11 samples
2025-11-11 10:59:50,807 - linien_server.autolock.robust - DEBUG - Generated description: [(1141, -1214), (47, 881), (210, -399), (95, 295)]
2025-11-11 10:59:50,845 - linien_server.autolock.robust - DEBUG - Lock position found at index 1662 for current spectrum
2025-11-11 10:59:50,878 - linien_server.autolock.robust - DEBUG - Lock position found at index 1662 for current spectrum
2025-11-11 10:59:50,911 - linien_server.autolock.robust - DEBUG - Lock position found at index 1661 for current spectrum
2025-11-11 10:59:50,944 - linien_server.autolock.robust - DEBUG - Lock position found at index 1662 for current spectrum
2025-11-11 10:59:50,978 - linien_server.autolock.robust - DEBUG - Lock position found at index 1660 for current spectrum
2025-11-11 10:59:50,980 - linien_server.autolock.robust - DEBUG - Description is [(1141, -1214), (47, 881), (210, -399), (95, 295)]
2025-11-11 10:59:50,982 - linien_server.autolock.robust - DEBUG - Calculation of autolock description took 0.5825293064117432
2025-11-11 10:59:51,045 - linien_server.server - ERROR - incorrect data received for lock state, ignoring!
2025-11-11 10:59:51,387 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-11 10:59:51,389 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-11 10:59:51,392 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-11 10:59:51,394 - linien_server.autolock.autolock - DEBUG - after lock
2025-11-11 14:53:26,901 - linien_server.cli - INFO - Stopping Linien server
2025-11-11 14:53:27,068 - linien_server.cli - INFO - Stopped Linien server
2025-11-11 14:53:30,317 - linien_server.cli - DEBUG - Copied linien-server.service to /etc/systemd/system
2025-11-11 14:53:30,319 - linien_server.cli - INFO - Starting Linien server
2025-11-11 14:53:30,391 - linien_server.cli - INFO - Started Linien server
2025-11-11 14:53:47,260 - linien_server.parameters - INFO - Restoring parameters from /root/.local/share/linien/parameters.json
2025-11-11 14:53:47,263 - linien_server.parameters - INFO - Restored parameters from /root/.local/share/linien/parameters.json
2025-11-11 14:53:47,270 - linien_common.influxdb - INFO - Saved InfluxDB credentials to /root/.local/share/linien/influxdb_credentials.json
2025-11-11 14:53:47,466 - linien_server.acquisition - INFO - Using fpgautil to deploy gateware.
2025-11-11 14:53:47,628 - linien_server.server - DEBUG - Ping  1
2025-11-11 14:53:47,670 - linien_server.mdio_tool - INFO - Disabling ethernet blinking with mdio-tool at /usr/local/lib/python3.10/dist-packages/linien_server/mdio-tool
2025-11-11 14:53:47,732 - linien_server.server - INFO - Starting server.
2025-11-11 14:53:48,656 - linien_server.server - DEBUG - Ping  2
2025-11-11 14:53:49,679 - linien_server.server - DEBUG - Ping  3
2025-11-11 14:53:49,680 - linien_server.server - DEBUG - Further pings will be suppressed
2025-11-11 15:11:36,735 - linien_server.cli - INFO - Stopping Linien server
2025-11-11 15:11:36,877 - linien_server.cli - INFO - Stopped Linien server
2025-11-11 15:11:40,002 - linien_server.cli - DEBUG - Copied linien-server.service to /etc/systemd/system
2025-11-11 15:11:40,009 - linien_server.cli - INFO - Starting Linien server
2025-11-11 15:11:40,082 - linien_server.cli - INFO - Started Linien server
2025-11-11 15:11:57,730 - linien_server.parameters - INFO - Restoring parameters from /root/.local/share/linien/parameters.json
2025-11-11 15:11:57,733 - linien_server.parameters - INFO - Restored parameters from /root/.local/share/linien/parameters.json
2025-11-11 15:11:57,740 - linien_common.influxdb - INFO - Saved InfluxDB credentials to /root/.local/share/linien/influxdb_credentials.json
2025-11-11 15:11:57,938 - linien_server.acquisition - INFO - Using fpgautil to deploy gateware.
2025-11-11 15:11:58,109 - linien_server.server - DEBUG - Ping  1
2025-11-11 15:11:58,130 - linien_server.mdio_tool - INFO - Disabling ethernet blinking with mdio-tool at /usr/local/lib/python3.10/dist-packages/linien_server/mdio-tool
2025-11-11 15:11:58,165 - linien_server.server - INFO - Starting server.
2025-11-11 15:11:59,135 - linien_server.server - DEBUG - Ping  2
2025-11-11 15:12:00,148 - linien_server.server - DEBUG - Ping  3
2025-11-11 15:12:00,173 - linien_server.server - DEBUG - Further pings will be suppressed
2025-11-11 15:13:52,196 - linien_server.cli - INFO - Stopping Linien server
2025-11-11 15:13:52,320 - linien_server.cli - INFO - Stopped Linien server
2025-11-11 15:13:55,337 - linien_server.cli - DEBUG - Copied linien-server.service to /etc/systemd/system
2025-11-11 15:13:55,338 - linien_server.cli - INFO - Starting Linien server
2025-11-11 15:13:55,406 - linien_server.cli - INFO - Started Linien server
2025-11-11 15:14:12,120 - linien_server.parameters - INFO - Restoring parameters from /root/.local/share/linien/parameters.json
2025-11-11 15:14:12,123 - linien_server.parameters - INFO - Restored parameters from /root/.local/share/linien/parameters.json
2025-11-11 15:14:12,127 - linien_common.influxdb - INFO - Saved InfluxDB credentials to /root/.local/share/linien/influxdb_credentials.json
2025-11-11 15:14:12,317 - linien_server.acquisition - INFO - Using fpgautil to deploy gateware.
2025-11-11 15:14:12,679 - linien_server.server - DEBUG - Ping  1
2025-11-11 15:14:12,723 - linien_server.mdio_tool - INFO - Disabling ethernet blinking with mdio-tool at /usr/local/lib/python3.10/dist-packages/linien_server/mdio-tool
2025-11-11 15:14:12,773 - linien_server.server - INFO - Starting server.
2025-11-11 15:14:13,704 - linien_server.server - DEBUG - Ping  2
2025-11-11 15:14:14,722 - linien_server.server - DEBUG - Ping  3
2025-11-11 15:14:14,723 - linien_server.server - DEBUG - Further pings will be suppressed
2025-11-11 15:19:26,910 - linien_server.cli - INFO - Stopping Linien server
2025-11-11 15:19:27,023 - linien_server.cli - INFO - Stopped Linien server
2025-11-11 15:19:30,012 - linien_server.cli - DEBUG - Copied linien-server.service to /etc/systemd/system
2025-11-11 15:19:30,014 - linien_server.cli - INFO - Starting Linien server
2025-11-11 15:19:30,081 - linien_server.cli - INFO - Started Linien server
2025-11-11 15:19:46,634 - linien_server.parameters - INFO - Restoring parameters from /root/.local/share/linien/parameters.json
2025-11-11 15:19:46,637 - linien_server.parameters - INFO - Restored parameters from /root/.local/share/linien/parameters.json
2025-11-11 15:19:46,643 - linien_common.influxdb - INFO - Saved InfluxDB credentials to /root/.local/share/linien/influxdb_credentials.json
2025-11-11 15:19:46,840 - linien_server.acquisition - INFO - Using fpgautil to deploy gateware.
2025-11-11 15:19:47,097 - linien_server.server - DEBUG - Ping  1
2025-11-11 15:19:47,113 - linien_server.mdio_tool - INFO - Disabling ethernet blinking with mdio-tool at /usr/local/lib/python3.10/dist-packages/linien_server/mdio-tool
2025-11-11 15:19:47,180 - linien_server.server - INFO - Starting server.
2025-11-11 15:19:48,116 - linien_server.server - DEBUG - Ping  2
2025-11-11 15:19:49,134 - linien_server.server - DEBUG - Ping  3
2025-11-11 15:19:49,156 - linien_server.server - DEBUG - Further pings will be suppressed
2025-11-13 09:16:03,916 - linien_server.cli - DEBUG - Copied linien-server.service to /etc/systemd/system
2025-11-13 09:16:03,919 - linien_server.cli - INFO - Starting Linien server
2025-11-13 09:16:03,986 - linien_server.cli - INFO - Started Linien server
2025-11-13 09:16:23,641 - linien_server.parameters - INFO - Restoring parameters from /root/.local/share/linien/parameters.json
2025-11-13 09:16:23,648 - linien_server.parameters - INFO - Restored parameters from /root/.local/share/linien/parameters.json
2025-11-13 09:16:23,652 - linien_common.influxdb - INFO - Saved InfluxDB credentials to /root/.local/share/linien/influxdb_credentials.json
2025-11-13 09:16:24,479 - linien_server.acquisition - INFO - Using fpgautil to deploy gateware.
2025-11-13 09:16:24,732 - linien_server.server - DEBUG - Ping  1
2025-11-13 09:16:24,791 - linien_server.mdio_tool - INFO - Disabling ethernet blinking with mdio-tool at /usr/local/lib/python3.10/dist-packages/linien_server/mdio-tool
2025-11-13 09:16:24,833 - linien_server.server - INFO - Starting server.
2025-11-13 09:16:25,757 - linien_server.server - DEBUG - Ping  2
2025-11-13 09:16:26,785 - linien_server.server - DEBUG - Ping  3
2025-11-13 09:16:26,811 - linien_server.server - DEBUG - Further pings will be suppressed
2025-11-13 10:03:30,092 - linien_server.cli - INFO - Stopping Linien server
2025-11-13 10:03:30,284 - linien_server.cli - INFO - Stopped Linien server
2025-11-13 10:03:33,622 - linien_server.cli - DEBUG - Copied linien-server.service to /etc/systemd/system
2025-11-13 10:03:33,624 - linien_server.cli - INFO - Starting Linien server
2025-11-13 10:03:33,690 - linien_server.cli - INFO - Started Linien server
2025-11-13 10:03:53,392 - linien_server.parameters - INFO - Restoring parameters from /root/.local/share/linien/parameters.json
2025-11-13 10:03:53,398 - linien_server.parameters - INFO - Restored parameters from /root/.local/share/linien/parameters.json
2025-11-13 10:03:53,403 - linien_common.influxdb - INFO - Saved InfluxDB credentials to /root/.local/share/linien/influxdb_credentials.json
2025-11-13 10:03:53,666 - linien_server.acquisition - INFO - Using fpgautil to deploy gateware.
2025-11-13 10:03:53,929 - linien_server.server - DEBUG - Ping  1
2025-11-13 10:03:53,946 - linien_server.mdio_tool - INFO - Disabling ethernet blinking with mdio-tool at /usr/local/lib/python3.10/dist-packages/linien_server/mdio-tool
2025-11-13 10:03:54,007 - linien_server.server - INFO - Starting server.
2025-11-13 10:03:54,949 - linien_server.server - DEBUG - Ping  2
2025-11-13 10:03:55,967 - linien_server.server - DEBUG - Ping  3
2025-11-13 10:03:55,984 - linien_server.server - DEBUG - Further pings will be suppressed
2025-11-13 14:17:20,359 - linien_server.autolock.autolock - DEBUG - Initialize Autolock
2025-11-13 14:17:20,380 - linien_server.autolock.autolock - DEBUG - Start the autolock
2025-11-13 14:17:20,413 - linien_server.autolock.autolock - DEBUG - (x0, x1) = (1500,1800)
2025-11-13 14:17:20,431 - linien_server.autolock.autolock - DEBUG - Start autolock with mode 1
2025-11-13 14:17:20,769 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-13 14:17:20,771 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-13 14:17:20,773 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-13 14:17:20,875 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-13 14:17:20,922 - linien_server.autolock.robust - ERROR - Not enough spectra collected:2 of 5
2025-11-13 14:17:21,106 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-13 14:17:21,108 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-13 14:17:21,110 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-13 14:17:21,213 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-13 14:17:21,242 - linien_server.autolock.robust - ERROR - Not enough spectra collected:3 of 5
2025-11-13 14:17:21,470 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-13 14:17:21,475 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-13 14:17:21,477 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-13 14:17:21,577 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-13 14:17:21,605 - linien_server.autolock.robust - ERROR - Not enough spectra collected:4 of 5
2025-11-13 14:17:21,868 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-13 14:17:21,870 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-13 14:17:21,872 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-13 14:17:21,971 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-13 14:17:21,999 - linien_server.autolock.robust - DEBUG - enough spectra!, calculate
2025-11-13 14:17:22,000 - linien_server.autolock.robust - DEBUG - Entered in calculate_autolock_instructions_v2
2025-11-13 14:17:22,010 - linien_server.autolock.robust - DEBUG - Saved new robust_spectra.npy and target_idxs.npy
2025-11-13 14:17:22,011 - linien_server.autolock.utils - DEBUG - Entered in crop_spectra_to_same_view
2025-11-13 14:17:22,144 - linien_server.autolock.utils - DEBUG - Shifts calculated for cropping: [1, 2, -2, -1, 2]
2025-11-13 14:17:22,148 - linien_server.autolock.robust - DEBUG - Saved new robust_spectra_cropped.npy
2025-11-13 14:17:22,149 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-13 14:17:22,151 - linien_server.autolock.utils - DEBUG - Spectrum length:2044
2025-11-13 14:17:22,154 - linien_server.autolock.utils - DEBUG - Spectrum: [-12 -12 -11  -7  -4]...[-3 -2 -4 -7 -9]
2025-11-13 14:17:22,155 - linien_server.autolock.utils - DEBUG - Target indices: [1604, 1640]
2025-11-13 14:17:22,156 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-13 14:17:22,157 - linien_server.autolock.utils - DEBUG - Spectrum length:2044
2025-11-13 14:17:22,160 - linien_server.autolock.utils - DEBUG - Spectrum: [-10 -12 -13 -10  -6]...[ -3  -3  -5  -8 -10]
2025-11-13 14:17:22,161 - linien_server.autolock.utils - DEBUG - Target indices: [1604, 1640]
2025-11-13 14:17:22,162 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-13 14:17:22,163 - linien_server.autolock.utils - DEBUG - Spectrum length:2044
2025-11-13 14:17:22,166 - linien_server.autolock.utils - DEBUG - Spectrum: [ -7 -12 -11  -7  -4]...[-3 -3 -5 -8 -9]
2025-11-13 14:17:22,167 - linien_server.autolock.utils - DEBUG - Target indices: [1604, 1640]
2025-11-13 14:17:22,169 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-13 14:17:22,170 - linien_server.autolock.utils - DEBUG - Spectrum length:2044
2025-11-13 14:17:22,172 - linien_server.autolock.utils - DEBUG - Spectrum: [-12 -13 -13 -10  -6]...[-4 -3 -4 -7 -9]
2025-11-13 14:17:22,173 - linien_server.autolock.utils - DEBUG - Target indices: [1604, 1640]
2025-11-13 14:17:22,175 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-13 14:17:22,176 - linien_server.autolock.utils - DEBUG - Spectrum length:2044
2025-11-13 14:17:22,179 - linien_server.autolock.utils - DEBUG - Spectrum: [-12 -14 -13 -10  -7]...[ -4  -3  -5  -8 -10]
2025-11-13 14:17:22,180 - linien_server.autolock.utils - DEBUG - Target indices: [1604, 1640]
2025-11-13 14:17:22,182 - linien_server.autolock.robust - DEBUG - x scale is 35
2025-11-13 14:17:22,236 - linien_server.autolock.robust - DEBUG - shift prepared spectrum by 16 samples to the left to match the original spectrum
2025-11-13 14:17:22,347 - linien_server.autolock.robust - DEBUG - Detected peaks with (position, height): [(1620, 177), (1614, 192), (1356, -322), (1241, 200), (1182, -835)]
2025-11-13 14:17:22,372 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [51, 52, 57, 63, 64, 71, 72, 86, 89, 93, 122, 124, 128, 142, 144, 149, 152, 157, 160, 164, 177, 180, 184, 188, 192, 197, 199, 212, 216, 219, 224, 227, 233, 234, 241, 242, 243, 247, 252, 254, 260, 262, 263, 268, 271, 275, 280, 282, 304, 306, 311, 315, 318, 332, 333, 339, 342, 347, 351, 353, 360, 361, 367, 370, 374, 378, 382, 387, 389, 395, 398, 402, 407, 409, 415, 416, 423, 424, 425, 430, 434, 437, 443, 444, 450, 453, 458, 461, 465, 470, 472, 478, 480, 481, 485, 489, 493, 498, 500, 506, 508, 513, 517, 520, 521, 525, 528, 534, 535, 549, 552, 553, 556, 561, 564, 569, 571, 572, 577, 580, 583, 612, 616, 619, 640, 643, 647, 652, 654, 661, 662, 667, 672, 674, 704, 707, 711, 715, 719, 722, 728, 729, 767, 816, 855, 857, 862, 865, 870, 872, 894, 897, 900, 901, 906, 908, 914, 916, 921, 925, 928, 949, 952, 956, 961, 963, 977, 980, 983, 1020, 1080, 1081, 1182, 1242, 1318, 1319, 1356, 1360, 1361, 1363, 1392, 1395, 1399, 1404, 1407, 1412, 1415, 1419, 1424, 1426, 1448, 1451, 1455, 1460, 1462, 1468, 1470, 1475, 1479, 1482, 1488, 1489, 1512, 1513, 1519, 1521, 1613, 1666, 1764, 1768, 1771, 1776, 1780, 1783, 1820, 1823, 1826, 1832, 1834, 1840, 1842, 1847, 1851, 1854, 1868, 1869, 1875, 1878, 1882, 1887, 1889, 1903, 1906, 1910, 1939, 1941, 1946, 1951, 1953, 1959, 1961, 1966, 1969, 1973, 1994, 1995, 1997, 2002, 2005, 2009]
2025-11-13 14:17:22,374 - linien_server.autolock.utils - DEBUG - start_idx - time_scale//5: 1597
2025-11-13 14:17:22,377 - linien_server.autolock.utils - DEBUG - Considered zeros (backward): [51, 52, 57, 63, 64, 71, 72, 86, 89, 93, 122, 124, 128, 142, 144, 149, 152, 157, 160, 164, 177, 180, 184, 188, 192, 197, 199, 212, 216, 219, 224, 227, 233, 234, 241, 242, 243, 247, 252, 254, 260, 262, 263, 268, 271, 275, 280, 282, 304, 306, 311, 315, 318, 332, 333, 339, 342, 347, 351, 353, 360, 361, 367, 370, 374, 378, 382, 387, 389, 395, 398, 402, 407, 409, 415, 416, 423, 424, 425, 430, 434, 437, 443, 444, 450, 453, 458, 461, 465, 470, 472, 478, 480, 481, 485, 489, 493, 498, 500, 506, 508, 513, 517, 520, 521, 525, 528, 534, 535, 549, 552, 553, 556, 561, 564, 569, 571, 572, 577, 580, 583, 612, 616, 619, 640, 643, 647, 652, 654, 661, 662, 667, 672, 674, 704, 707, 711, 715, 719, 722, 728, 729, 767, 816, 855, 857, 862, 865, 870, 872, 894, 897, 900, 901, 906, 908, 914, 916, 921, 925, 928, 949, 952, 956, 961, 963, 977, 980, 983, 1020, 1080, 1081, 1182, 1242, 1318, 1319, 1356, 1360, 1361, 1363, 1392, 1395, 1399, 1404, 1407, 1412, 1415, 1419, 1424, 1426, 1448, 1451, 1455, 1460, 1462, 1468, 1470, 1475, 1479, 1482, 1488, 1489, 1512, 1513, 1519, 1521]
2025-11-13 14:17:22,405 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [51, 52, 57, 63, 64, 71, 72, 86, 89, 93, 122, 124, 128, 142, 144, 149, 152, 157, 160, 164, 177, 180, 184, 188, 192, 197, 199, 212, 216, 219, 224, 227, 233, 234, 241, 242, 243, 247, 252, 254, 260, 262, 263, 268, 271, 275, 280, 282, 304, 306, 311, 315, 318, 332, 333, 339, 342, 347, 351, 353, 360, 361, 367, 370, 374, 378, 382, 387, 389, 395, 398, 402, 407, 409, 415, 416, 423, 424, 425, 430, 434, 437, 443, 444, 450, 453, 458, 461, 465, 470, 472, 478, 480, 481, 485, 489, 493, 498, 500, 506, 508, 513, 517, 520, 521, 525, 528, 534, 535, 549, 552, 553, 556, 561, 564, 569, 571, 572, 577, 580, 583, 612, 616, 619, 640, 643, 647, 652, 654, 661, 662, 667, 672, 674, 704, 707, 711, 715, 719, 722, 728, 729, 767, 816, 855, 857, 862, 865, 870, 872, 894, 897, 900, 901, 906, 908, 914, 916, 921, 925, 928, 949, 952, 956, 961, 963, 977, 980, 983, 1020, 1080, 1081, 1182, 1242, 1318, 1319, 1356, 1360, 1361, 1363, 1392, 1395, 1399, 1404, 1407, 1412, 1415, 1419, 1424, 1426, 1448, 1451, 1455, 1460, 1462, 1468, 1470, 1475, 1479, 1482, 1488, 1489, 1512, 1513, 1519, 1521, 1613, 1666, 1764, 1768, 1771, 1776, 1780, 1783, 1820, 1823, 1826, 1832, 1834, 1840, 1842, 1847, 1851, 1854, 1868, 1869, 1875, 1878, 1882, 1887, 1889, 1903, 1906, 1910, 1939, 1941, 1946, 1951, 1953, 1959, 1961, 1966, 1969, 1973, 1994, 1995, 1997, 2002, 2005, 2009]
2025-11-13 14:17:22,407 - linien_server.autolock.utils - DEBUG - start_idx + time_scale//5: 1646
2025-11-13 14:17:22,410 - linien_server.autolock.utils - DEBUG - Considered zeros (forward): [1666, 1764, 1768, 1771, 1776, 1780, 1783, 1820, 1823, 1826, 1832, 1834, 1840, 1842, 1847, 1851, 1854, 1868, 1869, 1875, 1878, 1882, 1887, 1889, 1903, 1906, 1910, 1939, 1941, 1946, 1951, 1953, 1959, 1961, 1966, 1969, 1973, 1994, 1995, 1997, 2002, 2005, 2009]
2025-11-13 14:17:22,460 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [51, 52, 57, 63, 64, 71, 72, 86, 89, 93, 122, 124, 128, 142, 144, 149, 152, 157, 160, 164, 177, 180, 184, 188, 192, 197, 199, 212, 216, 219, 224, 227, 233, 234, 241, 242, 243, 247, 252, 254, 260, 262, 263, 268, 271, 275, 280, 282, 304, 306, 311, 315, 318, 332, 333, 339, 342, 347, 351, 353, 360, 361, 367, 370, 374, 378, 382, 387, 389, 395, 398, 402, 407, 409, 415, 416, 423, 424, 425, 430, 434, 437, 443, 444, 450, 453, 458, 461, 465, 470, 472, 478, 480, 481, 485, 489, 493, 498, 500, 506, 508, 513, 517, 520, 521, 525, 528, 534, 535, 549, 552, 553, 556, 561, 564, 569, 571, 572, 577, 580, 583, 612, 616, 619, 640, 643, 647, 652, 654, 661, 662, 667, 672, 674, 704, 707, 711, 715, 719, 722, 728, 729, 767, 816, 855, 857, 862, 865, 870, 872, 894, 897, 900, 901, 906, 908, 914, 916, 921, 925, 928, 949, 952, 956, 961, 963, 977, 980, 983, 1020, 1080, 1081, 1182, 1242, 1318, 1319, 1356, 1360, 1361, 1363, 1392, 1395, 1399, 1404, 1407, 1412, 1415, 1419, 1424, 1426, 1448, 1451, 1455, 1460, 1462, 1468, 1470, 1475, 1479, 1482, 1488, 1489, 1512, 1513, 1519, 1521, 1613, 1666, 1764, 1768, 1771, 1776, 1780, 1783, 1820, 1823, 1826, 1832, 1834, 1840, 1842, 1847, 1851, 1854, 1868, 1869, 1875, 1878, 1882, 1887, 1889, 1903, 1906, 1910, 1939, 1941, 1946, 1951, 1953, 1959, 1961, 1966, 1969, 1973, 1994, 1995, 1997, 2002, 2005, 2009]
2025-11-13 14:17:22,461 - linien_server.autolock.utils - DEBUG - start_idx - time_scale//5: 1597
2025-11-13 14:17:22,465 - linien_server.autolock.utils - DEBUG - Considered zeros (backward): [51, 52, 57, 63, 64, 71, 72, 86, 89, 93, 122, 124, 128, 142, 144, 149, 152, 157, 160, 164, 177, 180, 184, 188, 192, 197, 199, 212, 216, 219, 224, 227, 233, 234, 241, 242, 243, 247, 252, 254, 260, 262, 263, 268, 271, 275, 280, 282, 304, 306, 311, 315, 318, 332, 333, 339, 342, 347, 351, 353, 360, 361, 367, 370, 374, 378, 382, 387, 389, 395, 398, 402, 407, 409, 415, 416, 423, 424, 425, 430, 434, 437, 443, 444, 450, 453, 458, 461, 465, 470, 472, 478, 480, 481, 485, 489, 493, 498, 500, 506, 508, 513, 517, 520, 521, 525, 528, 534, 535, 549, 552, 553, 556, 561, 564, 569, 571, 572, 577, 580, 583, 612, 616, 619, 640, 643, 647, 652, 654, 661, 662, 667, 672, 674, 704, 707, 711, 715, 719, 722, 728, 729, 767, 816, 855, 857, 862, 865, 870, 872, 894, 897, 900, 901, 906, 908, 914, 916, 921, 925, 928, 949, 952, 956, 961, 963, 977, 980, 983, 1020, 1080, 1081, 1182, 1242, 1318, 1319, 1356, 1360, 1361, 1363, 1392, 1395, 1399, 1404, 1407, 1412, 1415, 1419, 1424, 1426, 1448, 1451, 1455, 1460, 1462, 1468, 1470, 1475, 1479, 1482, 1488, 1489, 1512, 1513, 1519, 1521]
2025-11-13 14:17:22,493 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [51, 52, 57, 63, 64, 71, 72, 86, 89, 93, 122, 124, 128, 142, 144, 149, 152, 157, 160, 164, 177, 180, 184, 188, 192, 197, 199, 212, 216, 219, 224, 227, 233, 234, 241, 242, 243, 247, 252, 254, 260, 262, 263, 268, 271, 275, 280, 282, 304, 306, 311, 315, 318, 332, 333, 339, 342, 347, 351, 353, 360, 361, 367, 370, 374, 378, 382, 387, 389, 395, 398, 402, 407, 409, 415, 416, 423, 424, 425, 430, 434, 437, 443, 444, 450, 453, 458, 461, 465, 470, 472, 478, 480, 481, 485, 489, 493, 498, 500, 506, 508, 513, 517, 520, 521, 525, 528, 534, 535, 549, 552, 553, 556, 561, 564, 569, 571, 572, 577, 580, 583, 612, 616, 619, 640, 643, 647, 652, 654, 661, 662, 667, 672, 674, 704, 707, 711, 715, 719, 722, 728, 729, 767, 816, 855, 857, 862, 865, 870, 872, 894, 897, 900, 901, 906, 908, 914, 916, 921, 925, 928, 949, 952, 956, 961, 963, 977, 980, 983, 1020, 1080, 1081, 1182, 1242, 1318, 1319, 1356, 1360, 1361, 1363, 1392, 1395, 1399, 1404, 1407, 1412, 1415, 1419, 1424, 1426, 1448, 1451, 1455, 1460, 1462, 1468, 1470, 1475, 1479, 1482, 1488, 1489, 1512, 1513, 1519, 1521, 1613, 1666, 1764, 1768, 1771, 1776, 1780, 1783, 1820, 1823, 1826, 1832, 1834, 1840, 1842, 1847, 1851, 1854, 1868, 1869, 1875, 1878, 1882, 1887, 1889, 1903, 1906, 1910, 1939, 1941, 1946, 1951, 1953, 1959, 1961, 1966, 1969, 1973, 1994, 1995, 1997, 2002, 2005, 2009]
2025-11-13 14:17:22,498 - linien_server.autolock.utils - DEBUG - start_idx + time_scale//5: 1646
2025-11-13 14:17:22,502 - linien_server.autolock.utils - DEBUG - Considered zeros (forward): [1666, 1764, 1768, 1771, 1776, 1780, 1783, 1820, 1823, 1826, 1832, 1834, 1840, 1842, 1847, 1851, 1854, 1868, 1869, 1875, 1878, 1882, 1887, 1889, 1903, 1906, 1910, 1939, 1941, 1946, 1951, 1953, 1959, 1961, 1966, 1969, 1973, 1994, 1995, 1997, 2002, 2005, 2009]
2025-11-13 14:17:22,536 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [51, 52, 57, 63, 64, 71, 72, 86, 89, 93, 122, 124, 128, 142, 144, 149, 152, 157, 160, 164, 177, 180, 184, 188, 192, 197, 199, 212, 216, 219, 224, 227, 233, 234, 241, 242, 243, 247, 252, 254, 260, 262, 263, 268, 271, 275, 280, 282, 304, 306, 311, 315, 318, 332, 333, 339, 342, 347, 351, 353, 360, 361, 367, 370, 374, 378, 382, 387, 389, 395, 398, 402, 407, 409, 415, 416, 423, 424, 425, 430, 434, 437, 443, 444, 450, 453, 458, 461, 465, 470, 472, 478, 480, 481, 485, 489, 493, 498, 500, 506, 508, 513, 517, 520, 521, 525, 528, 534, 535, 549, 552, 553, 556, 561, 564, 569, 571, 572, 577, 580, 583, 612, 616, 619, 640, 643, 647, 652, 654, 661, 662, 667, 672, 674, 704, 707, 711, 715, 719, 722, 728, 729, 767, 816, 855, 857, 862, 865, 870, 872, 894, 897, 900, 901, 906, 908, 914, 916, 921, 925, 928, 949, 952, 956, 961, 963, 977, 980, 983, 1020, 1080, 1081, 1182, 1242, 1318, 1319, 1356, 1360, 1361, 1363, 1392, 1395, 1399, 1404, 1407, 1412, 1415, 1419, 1424, 1426, 1448, 1451, 1455, 1460, 1462, 1468, 1470, 1475, 1479, 1482, 1488, 1489, 1512, 1513, 1519, 1521, 1613, 1666, 1764, 1768, 1771, 1776, 1780, 1783, 1820, 1823, 1826, 1832, 1834, 1840, 1842, 1847, 1851, 1854, 1868, 1869, 1875, 1878, 1882, 1887, 1889, 1903, 1906, 1910, 1939, 1941, 1946, 1951, 1953, 1959, 1961, 1966, 1969, 1973, 1994, 1995, 1997, 2002, 2005, 2009]
2025-11-13 14:17:22,537 - linien_server.autolock.utils - DEBUG - start_idx - time_scale//5: 1597
2025-11-13 14:17:22,541 - linien_server.autolock.utils - DEBUG - Considered zeros (backward): [51, 52, 57, 63, 64, 71, 72, 86, 89, 93, 122, 124, 128, 142, 144, 149, 152, 157, 160, 164, 177, 180, 184, 188, 192, 197, 199, 212, 216, 219, 224, 227, 233, 234, 241, 242, 243, 247, 252, 254, 260, 262, 263, 268, 271, 275, 280, 282, 304, 306, 311, 315, 318, 332, 333, 339, 342, 347, 351, 353, 360, 361, 367, 370, 374, 378, 382, 387, 389, 395, 398, 402, 407, 409, 415, 416, 423, 424, 425, 430, 434, 437, 443, 444, 450, 453, 458, 461, 465, 470, 472, 478, 480, 481, 485, 489, 493, 498, 500, 506, 508, 513, 517, 520, 521, 525, 528, 534, 535, 549, 552, 553, 556, 561, 564, 569, 571, 572, 577, 580, 583, 612, 616, 619, 640, 643, 647, 652, 654, 661, 662, 667, 672, 674, 704, 707, 711, 715, 719, 722, 728, 729, 767, 816, 855, 857, 862, 865, 870, 872, 894, 897, 900, 901, 906, 908, 914, 916, 921, 925, 928, 949, 952, 956, 961, 963, 977, 980, 983, 1020, 1080, 1081, 1182, 1242, 1318, 1319, 1356, 1360, 1361, 1363, 1392, 1395, 1399, 1404, 1407, 1412, 1415, 1419, 1424, 1426, 1448, 1451, 1455, 1460, 1462, 1468, 1470, 1475, 1479, 1482, 1488, 1489, 1512, 1513, 1519, 1521]
2025-11-13 14:17:22,568 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [51, 52, 57, 63, 64, 71, 72, 86, 89, 93, 122, 124, 128, 142, 144, 149, 152, 157, 160, 164, 177, 180, 184, 188, 192, 197, 199, 212, 216, 219, 224, 227, 233, 234, 241, 242, 243, 247, 252, 254, 260, 262, 263, 268, 271, 275, 280, 282, 304, 306, 311, 315, 318, 332, 333, 339, 342, 347, 351, 353, 360, 361, 367, 370, 374, 378, 382, 387, 389, 395, 398, 402, 407, 409, 415, 416, 423, 424, 425, 430, 434, 437, 443, 444, 450, 453, 458, 461, 465, 470, 472, 478, 480, 481, 485, 489, 493, 498, 500, 506, 508, 513, 517, 520, 521, 525, 528, 534, 535, 549, 552, 553, 556, 561, 564, 569, 571, 572, 577, 580, 583, 612, 616, 619, 640, 643, 647, 652, 654, 661, 662, 667, 672, 674, 704, 707, 711, 715, 719, 722, 728, 729, 767, 816, 855, 857, 862, 865, 870, 872, 894, 897, 900, 901, 906, 908, 914, 916, 921, 925, 928, 949, 952, 956, 961, 963, 977, 980, 983, 1020, 1080, 1081, 1182, 1242, 1318, 1319, 1356, 1360, 1361, 1363, 1392, 1395, 1399, 1404, 1407, 1412, 1415, 1419, 1424, 1426, 1448, 1451, 1455, 1460, 1462, 1468, 1470, 1475, 1479, 1482, 1488, 1489, 1512, 1513, 1519, 1521, 1613, 1666, 1764, 1768, 1771, 1776, 1780, 1783, 1820, 1823, 1826, 1832, 1834, 1840, 1842, 1847, 1851, 1854, 1868, 1869, 1875, 1878, 1882, 1887, 1889, 1903, 1906, 1910, 1939, 1941, 1946, 1951, 1953, 1959, 1961, 1966, 1969, 1973, 1994, 1995, 1997, 2002, 2005, 2009]
2025-11-13 14:17:22,570 - linien_server.autolock.utils - DEBUG - start_idx + time_scale//5: 1646
2025-11-13 14:17:22,574 - linien_server.autolock.utils - DEBUG - Considered zeros (forward): [1666, 1764, 1768, 1771, 1776, 1780, 1783, 1820, 1823, 1826, 1832, 1834, 1840, 1842, 1847, 1851, 1854, 1868, 1869, 1875, 1878, 1882, 1887, 1889, 1903, 1906, 1910, 1939, 1941, 1946, 1951, 1953, 1959, 1961, 1966, 1969, 1973, 1994, 1995, 1997, 2002, 2005, 2009]
2025-11-13 14:17:22,609 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [51, 52, 57, 63, 64, 71, 72, 86, 89, 93, 122, 124, 128, 142, 144, 149, 152, 157, 160, 164, 177, 180, 184, 188, 192, 197, 199, 212, 216, 219, 224, 227, 233, 234, 241, 242, 243, 247, 252, 254, 260, 262, 263, 268, 271, 275, 280, 282, 304, 306, 311, 315, 318, 332, 333, 339, 342, 347, 351, 353, 360, 361, 367, 370, 374, 378, 382, 387, 389, 395, 398, 402, 407, 409, 415, 416, 423, 424, 425, 430, 434, 437, 443, 444, 450, 453, 458, 461, 465, 470, 472, 478, 480, 481, 485, 489, 493, 498, 500, 506, 508, 513, 517, 520, 521, 525, 528, 534, 535, 549, 552, 553, 556, 561, 564, 569, 571, 572, 577, 580, 583, 612, 616, 619, 640, 643, 647, 652, 654, 661, 662, 667, 672, 674, 704, 707, 711, 715, 719, 722, 728, 729, 767, 816, 855, 857, 862, 865, 870, 872, 894, 897, 900, 901, 906, 908, 914, 916, 921, 925, 928, 949, 952, 956, 961, 963, 977, 980, 983, 1020, 1080, 1081, 1182, 1242, 1318, 1319, 1356, 1360, 1361, 1363, 1392, 1395, 1399, 1404, 1407, 1412, 1415, 1419, 1424, 1426, 1448, 1451, 1455, 1460, 1462, 1468, 1470, 1475, 1479, 1482, 1488, 1489, 1512, 1513, 1519, 1521, 1613, 1666, 1764, 1768, 1771, 1776, 1780, 1783, 1820, 1823, 1826, 1832, 1834, 1840, 1842, 1847, 1851, 1854, 1868, 1869, 1875, 1878, 1882, 1887, 1889, 1903, 1906, 1910, 1939, 1941, 1946, 1951, 1953, 1959, 1961, 1966, 1969, 1973, 1994, 1995, 1997, 2002, 2005, 2009]
2025-11-13 14:17:22,611 - linien_server.autolock.utils - DEBUG - start_idx - time_scale//5: 1597
2025-11-13 14:17:22,614 - linien_server.autolock.utils - DEBUG - Considered zeros (backward): [51, 52, 57, 63, 64, 71, 72, 86, 89, 93, 122, 124, 128, 142, 144, 149, 152, 157, 160, 164, 177, 180, 184, 188, 192, 197, 199, 212, 216, 219, 224, 227, 233, 234, 241, 242, 243, 247, 252, 254, 260, 262, 263, 268, 271, 275, 280, 282, 304, 306, 311, 315, 318, 332, 333, 339, 342, 347, 351, 353, 360, 361, 367, 370, 374, 378, 382, 387, 389, 395, 398, 402, 407, 409, 415, 416, 423, 424, 425, 430, 434, 437, 443, 444, 450, 453, 458, 461, 465, 470, 472, 478, 480, 481, 485, 489, 493, 498, 500, 506, 508, 513, 517, 520, 521, 525, 528, 534, 535, 549, 552, 553, 556, 561, 564, 569, 571, 572, 577, 580, 583, 612, 616, 619, 640, 643, 647, 652, 654, 661, 662, 667, 672, 674, 704, 707, 711, 715, 719, 722, 728, 729, 767, 816, 855, 857, 862, 865, 870, 872, 894, 897, 900, 901, 906, 908, 914, 916, 921, 925, 928, 949, 952, 956, 961, 963, 977, 980, 983, 1020, 1080, 1081, 1182, 1242, 1318, 1319, 1356, 1360, 1361, 1363, 1392, 1395, 1399, 1404, 1407, 1412, 1415, 1419, 1424, 1426, 1448, 1451, 1455, 1460, 1462, 1468, 1470, 1475, 1479, 1482, 1488, 1489, 1512, 1513, 1519, 1521]
2025-11-13 14:17:22,640 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [51, 52, 57, 63, 64, 71, 72, 86, 89, 93, 122, 124, 128, 142, 144, 149, 152, 157, 160, 164, 177, 180, 184, 188, 192, 197, 199, 212, 216, 219, 224, 227, 233, 234, 241, 242, 243, 247, 252, 254, 260, 262, 263, 268, 271, 275, 280, 282, 304, 306, 311, 315, 318, 332, 333, 339, 342, 347, 351, 353, 360, 361, 367, 370, 374, 378, 382, 387, 389, 395, 398, 402, 407, 409, 415, 416, 423, 424, 425, 430, 434, 437, 443, 444, 450, 453, 458, 461, 465, 470, 472, 478, 480, 481, 485, 489, 493, 498, 500, 506, 508, 513, 517, 520, 521, 525, 528, 534, 535, 549, 552, 553, 556, 561, 564, 569, 571, 572, 577, 580, 583, 612, 616, 619, 640, 643, 647, 652, 654, 661, 662, 667, 672, 674, 704, 707, 711, 715, 719, 722, 728, 729, 767, 816, 855, 857, 862, 865, 870, 872, 894, 897, 900, 901, 906, 908, 914, 916, 921, 925, 928, 949, 952, 956, 961, 963, 977, 980, 983, 1020, 1080, 1081, 1182, 1242, 1318, 1319, 1356, 1360, 1361, 1363, 1392, 1395, 1399, 1404, 1407, 1412, 1415, 1419, 1424, 1426, 1448, 1451, 1455, 1460, 1462, 1468, 1470, 1475, 1479, 1482, 1488, 1489, 1512, 1513, 1519, 1521, 1613, 1666, 1764, 1768, 1771, 1776, 1780, 1783, 1820, 1823, 1826, 1832, 1834, 1840, 1842, 1847, 1851, 1854, 1868, 1869, 1875, 1878, 1882, 1887, 1889, 1903, 1906, 1910, 1939, 1941, 1946, 1951, 1953, 1959, 1961, 1966, 1969, 1973, 1994, 1995, 1997, 2002, 2005, 2009]
2025-11-13 14:17:22,642 - linien_server.autolock.utils - DEBUG - start_idx + time_scale//5: 1646
2025-11-13 14:17:22,645 - linien_server.autolock.utils - DEBUG - Considered zeros (forward): [1666, 1764, 1768, 1771, 1776, 1780, 1783, 1820, 1823, 1826, 1832, 1834, 1840, 1842, 1847, 1851, 1854, 1868, 1869, 1875, 1878, 1882, 1887, 1889, 1903, 1906, 1910, 1939, 1941, 1946, 1951, 1953, 1959, 1961, 1966, 1969, 1973, 1994, 1995, 1997, 2002, 2005, 2009]
2025-11-13 14:17:22,679 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [51, 52, 57, 63, 64, 71, 72, 86, 89, 93, 122, 124, 128, 142, 144, 149, 152, 157, 160, 164, 177, 180, 184, 188, 192, 197, 199, 212, 216, 219, 224, 227, 233, 234, 241, 242, 243, 247, 252, 254, 260, 262, 263, 268, 271, 275, 280, 282, 304, 306, 311, 315, 318, 332, 333, 339, 342, 347, 351, 353, 360, 361, 367, 370, 374, 378, 382, 387, 389, 395, 398, 402, 407, 409, 415, 416, 423, 424, 425, 430, 434, 437, 443, 444, 450, 453, 458, 461, 465, 470, 472, 478, 480, 481, 485, 489, 493, 498, 500, 506, 508, 513, 517, 520, 521, 525, 528, 534, 535, 549, 552, 553, 556, 561, 564, 569, 571, 572, 577, 580, 583, 612, 616, 619, 640, 643, 647, 652, 654, 661, 662, 667, 672, 674, 704, 707, 711, 715, 719, 722, 728, 729, 767, 816, 855, 857, 862, 865, 870, 872, 894, 897, 900, 901, 906, 908, 914, 916, 921, 925, 928, 949, 952, 956, 961, 963, 977, 980, 983, 1020, 1080, 1081, 1182, 1242, 1318, 1319, 1356, 1360, 1361, 1363, 1392, 1395, 1399, 1404, 1407, 1412, 1415, 1419, 1424, 1426, 1448, 1451, 1455, 1460, 1462, 1468, 1470, 1475, 1479, 1482, 1488, 1489, 1512, 1513, 1519, 1521, 1613, 1666, 1764, 1768, 1771, 1776, 1780, 1783, 1820, 1823, 1826, 1832, 1834, 1840, 1842, 1847, 1851, 1854, 1868, 1869, 1875, 1878, 1882, 1887, 1889, 1903, 1906, 1910, 1939, 1941, 1946, 1951, 1953, 1959, 1961, 1966, 1969, 1973, 1994, 1995, 1997, 2002, 2005, 2009]
2025-11-13 14:17:22,680 - linien_server.autolock.utils - DEBUG - start_idx - time_scale//5: 1597
2025-11-13 14:17:22,683 - linien_server.autolock.utils - DEBUG - Considered zeros (backward): [51, 52, 57, 63, 64, 71, 72, 86, 89, 93, 122, 124, 128, 142, 144, 149, 152, 157, 160, 164, 177, 180, 184, 188, 192, 197, 199, 212, 216, 219, 224, 227, 233, 234, 241, 242, 243, 247, 252, 254, 260, 262, 263, 268, 271, 275, 280, 282, 304, 306, 311, 315, 318, 332, 333, 339, 342, 347, 351, 353, 360, 361, 367, 370, 374, 378, 382, 387, 389, 395, 398, 402, 407, 409, 415, 416, 423, 424, 425, 430, 434, 437, 443, 444, 450, 453, 458, 461, 465, 470, 472, 478, 480, 481, 485, 489, 493, 498, 500, 506, 508, 513, 517, 520, 521, 525, 528, 534, 535, 549, 552, 553, 556, 561, 564, 569, 571, 572, 577, 580, 583, 612, 616, 619, 640, 643, 647, 652, 654, 661, 662, 667, 672, 674, 704, 707, 711, 715, 719, 722, 728, 729, 767, 816, 855, 857, 862, 865, 870, 872, 894, 897, 900, 901, 906, 908, 914, 916, 921, 925, 928, 949, 952, 956, 961, 963, 977, 980, 983, 1020, 1080, 1081, 1182, 1242, 1318, 1319, 1356, 1360, 1361, 1363, 1392, 1395, 1399, 1404, 1407, 1412, 1415, 1419, 1424, 1426, 1448, 1451, 1455, 1460, 1462, 1468, 1470, 1475, 1479, 1482, 1488, 1489, 1512, 1513, 1519, 1521]
2025-11-13 14:17:22,710 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [51, 52, 57, 63, 64, 71, 72, 86, 89, 93, 122, 124, 128, 142, 144, 149, 152, 157, 160, 164, 177, 180, 184, 188, 192, 197, 199, 212, 216, 219, 224, 227, 233, 234, 241, 242, 243, 247, 252, 254, 260, 262, 263, 268, 271, 275, 280, 282, 304, 306, 311, 315, 318, 332, 333, 339, 342, 347, 351, 353, 360, 361, 367, 370, 374, 378, 382, 387, 389, 395, 398, 402, 407, 409, 415, 416, 423, 424, 425, 430, 434, 437, 443, 444, 450, 453, 458, 461, 465, 470, 472, 478, 480, 481, 485, 489, 493, 498, 500, 506, 508, 513, 517, 520, 521, 525, 528, 534, 535, 549, 552, 553, 556, 561, 564, 569, 571, 572, 577, 580, 583, 612, 616, 619, 640, 643, 647, 652, 654, 661, 662, 667, 672, 674, 704, 707, 711, 715, 719, 722, 728, 729, 767, 816, 855, 857, 862, 865, 870, 872, 894, 897, 900, 901, 906, 908, 914, 916, 921, 925, 928, 949, 952, 956, 961, 963, 977, 980, 983, 1020, 1080, 1081, 1182, 1242, 1318, 1319, 1356, 1360, 1361, 1363, 1392, 1395, 1399, 1404, 1407, 1412, 1415, 1419, 1424, 1426, 1448, 1451, 1455, 1460, 1462, 1468, 1470, 1475, 1479, 1482, 1488, 1489, 1512, 1513, 1519, 1521, 1613, 1666, 1764, 1768, 1771, 1776, 1780, 1783, 1820, 1823, 1826, 1832, 1834, 1840, 1842, 1847, 1851, 1854, 1868, 1869, 1875, 1878, 1882, 1887, 1889, 1903, 1906, 1910, 1939, 1941, 1946, 1951, 1953, 1959, 1961, 1966, 1969, 1973, 1994, 1995, 1997, 2002, 2005, 2009]
2025-11-13 14:17:22,711 - linien_server.autolock.utils - DEBUG - start_idx + time_scale//5: 1646
2025-11-13 14:17:22,714 - linien_server.autolock.utils - DEBUG - Considered zeros (forward): [1666, 1764, 1768, 1771, 1776, 1780, 1783, 1820, 1823, 1826, 1832, 1834, 1840, 1842, 1847, 1851, 1854, 1868, 1869, 1875, 1878, 1882, 1887, 1889, 1903, 1906, 1910, 1939, 1941, 1946, 1951, 1953, 1959, 1961, 1966, 1969, 1973, 1994, 1995, 1997, 2002, 2005, 2009]
2025-11-13 14:17:22,724 - linien_server.autolock.robust - DEBUG - Determined lock regions: [(1586, 1666), (1594, 1666), (1586, 1666), (1586, 1666), (1586, 1666)]
2025-11-13 14:17:22,725 - linien_server.autolock.robust - DEBUG - Try out tolerance 0.95
2025-11-13 14:17:22,727 - linien_server.autolock.robust - DEBUG - Original peaks: [(1620, 177), (1614, 192), (1356, -322), (1241, 200), (1182, -835)]
2025-11-13 14:17:22,729 - linien_server.autolock.robust - DEBUG - Filtered peaks: [(1620, 168.15), (1614, 182.39999999999998), (1356, -305.9), (1241, 190.0), (1182, -793.25)]
2025-11-13 14:17:22,730 - linien_server.autolock.robust - DEBUG - Discarded peaks: [(1620, 177), (1614, 192), (1356, -322), (1241, 200), (1182, -835)]
2025-11-13 14:17:22,732 - linien_server.autolock.robust - DEBUG - Target peak index in prepared spectrum: 1620
2025-11-13 14:17:22,734 - linien_server.autolock.robust - DEBUG - final wait time is 9 samples
2025-11-13 14:17:22,735 - linien_server.autolock.robust - DEBUG - Generated description: [(1063, -793), (53, 190), (103, -305), (232, 182), (5, 168)]
2025-11-13 14:17:22,772 - linien_server.autolock.robust - DEBUG - Lock position found at index 1628 for current spectrum
2025-11-13 14:17:22,839 - linien_server.autolock.robust - DEBUG - Lock position found at index 1627 for current spectrum
2025-11-13 14:17:22,872 - linien_server.autolock.robust - DEBUG - Lock position found at index 1627 for current spectrum
2025-11-13 14:17:22,905 - linien_server.autolock.robust - DEBUG - Lock position found at index 1621 for current spectrum
2025-11-13 14:17:22,906 - linien_server.autolock.robust - DEBUG - Try out tolerance 0.9
2025-11-13 14:17:22,908 - linien_server.autolock.robust - DEBUG - Original peaks: [(1620, 177), (1614, 192), (1356, -322), (1241, 200), (1182, -835)]
2025-11-13 14:17:22,909 - linien_server.autolock.robust - DEBUG - Filtered peaks: [(1620, 159.3), (1614, 172.8), (1356, -289.8), (1241, 180.0), (1182, -751.5)]
2025-11-13 14:17:22,911 - linien_server.autolock.robust - DEBUG - Discarded peaks: [(1620, 177), (1614, 192), (1356, -322), (1241, 200), (1182, -835)]
2025-11-13 14:17:22,912 - linien_server.autolock.robust - DEBUG - Target peak index in prepared spectrum: 1620
2025-11-13 14:17:22,915 - linien_server.autolock.robust - DEBUG - final wait time is 10 samples
2025-11-13 14:17:22,916 - linien_server.autolock.robust - DEBUG - Generated description: [(1063, -751), (53, 180), (103, -289), (232, 172), (5, 159)]
2025-11-13 14:17:22,954 - linien_server.autolock.robust - DEBUG - Lock position found at index 1628 for current spectrum
2025-11-13 14:17:22,988 - linien_server.autolock.robust - DEBUG - Lock position found at index 1634 for current spectrum
2025-11-13 14:17:23,021 - linien_server.autolock.robust - DEBUG - Lock position found at index 1627 for current spectrum
2025-11-13 14:17:23,054 - linien_server.autolock.robust - DEBUG - Lock position found at index 1628 for current spectrum
2025-11-13 14:17:23,086 - linien_server.autolock.robust - DEBUG - Lock position found at index 1621 for current spectrum
2025-11-13 14:17:23,087 - linien_server.autolock.robust - DEBUG - Description is [(1063, -751), (53, 180), (103, -289), (232, 172), (5, 159)]
2025-11-13 14:17:23,089 - linien_server.autolock.robust - DEBUG - Calculation of autolock description took 1.0890145301818848
2025-11-13 14:17:23,149 - linien_server.server - ERROR - incorrect data received for lock state, ignoring!
2025-11-13 14:17:23,460 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-13 14:17:23,462 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-13 14:17:23,465 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-13 14:17:23,466 - linien_server.autolock.autolock - DEBUG - after lock
2025-11-14 11:00:25,636 - linien_server.cli - DEBUG - Copied linien-server.service to /etc/systemd/system
2025-11-14 11:00:25,638 - linien_server.cli - INFO - Starting Linien server
2025-11-14 11:00:25,705 - linien_server.cli - INFO - Started Linien server
2025-11-14 11:00:44,814 - linien_server.parameters - INFO - Restoring parameters from /root/.local/share/linien/parameters.json
2025-11-14 11:00:44,821 - linien_server.parameters - INFO - Restored parameters from /root/.local/share/linien/parameters.json
2025-11-14 11:00:44,826 - linien_common.influxdb - INFO - Saved InfluxDB credentials to /root/.local/share/linien/influxdb_credentials.json
2025-11-14 11:00:45,919 - linien_server.acquisition - INFO - Using fpgautil to deploy gateware.
2025-11-14 11:00:46,175 - linien_server.server - DEBUG - Ping  1
2025-11-14 11:00:46,234 - linien_server.mdio_tool - INFO - Disabling ethernet blinking with mdio-tool at /usr/local/lib/python3.10/dist-packages/linien_server/mdio-tool
2025-11-14 11:00:46,278 - linien_server.server - INFO - Starting server.
2025-11-14 11:00:47,209 - linien_server.server - DEBUG - Ping  2
2025-11-14 11:00:48,244 - linien_server.server - DEBUG - Ping  3
2025-11-14 11:00:48,270 - linien_server.server - DEBUG - Further pings will be suppressed
2025-11-17 08:32:54,434 - linien_server.cli - DEBUG - Copied linien-server.service to /etc/systemd/system
2025-11-17 08:32:54,438 - linien_server.cli - INFO - Starting Linien server
2025-11-17 08:32:54,508 - linien_server.cli - INFO - Started Linien server
2025-11-17 08:33:14,277 - linien_server.parameters - INFO - Restoring parameters from /root/.local/share/linien/parameters.json
2025-11-17 08:33:14,283 - linien_server.parameters - INFO - Restored parameters from /root/.local/share/linien/parameters.json
2025-11-17 08:33:14,288 - linien_common.influxdb - INFO - Saved InfluxDB credentials to /root/.local/share/linien/influxdb_credentials.json
2025-11-17 08:33:15,181 - linien_server.acquisition - INFO - Using fpgautil to deploy gateware.
2025-11-17 08:33:15,433 - linien_server.server - DEBUG - Ping  1
2025-11-17 08:33:15,476 - linien_server.mdio_tool - INFO - Disabling ethernet blinking with mdio-tool at /usr/local/lib/python3.10/dist-packages/linien_server/mdio-tool
2025-11-17 08:33:15,489 - linien_server.server - INFO - Starting server.
2025-11-17 08:33:16,447 - linien_server.server - DEBUG - Ping  2
2025-11-17 08:33:17,468 - linien_server.server - DEBUG - Ping  3
2025-11-17 08:33:17,486 - linien_server.server - DEBUG - Further pings will be suppressed
2025-11-17 15:00:47,818 - linien_server.autolock.autolock - DEBUG - Initialize Autolock
2025-11-17 15:00:47,835 - linien_server.autolock.autolock - DEBUG - Start the autolock
2025-11-17 15:00:47,836 - linien_server.autolock.autolock - DEBUG - (x0, x1) = (1600,1850)
2025-11-17 15:00:47,874 - linien_server.autolock.autolock - DEBUG - Start autolock with mode 1
2025-11-17 15:00:47,994 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-17 15:00:47,996 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-17 15:00:47,997 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-17 15:00:48,095 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-17 15:00:48,158 - linien_server.autolock.robust - ERROR - Not enough spectra collected:2 of 5
2025-11-17 15:00:48,369 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-17 15:00:48,371 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-17 15:00:48,374 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-17 15:00:48,474 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-17 15:00:48,502 - linien_server.autolock.robust - ERROR - Not enough spectra collected:3 of 5
2025-11-17 15:00:48,765 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-17 15:00:48,767 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-17 15:00:48,769 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-17 15:00:48,870 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-17 15:00:48,898 - linien_server.autolock.robust - ERROR - Not enough spectra collected:4 of 5
2025-11-17 15:00:49,151 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-17 15:00:49,153 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-17 15:00:49,155 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-17 15:00:49,256 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-17 15:00:49,284 - linien_server.autolock.robust - DEBUG - enough spectra!, calculate
2025-11-17 15:00:49,285 - linien_server.autolock.robust - DEBUG - Entered in calculate_autolock_instructions_v2
2025-11-17 15:00:49,299 - linien_server.autolock.robust - DEBUG - Saved new robust_spectra.npy and target_idxs.npy
2025-11-17 15:00:49,300 - linien_server.autolock.utils - DEBUG - Entered in crop_spectra_to_same_view
2025-11-17 15:00:49,439 - linien_server.autolock.utils - DEBUG - Shifts calculated for cropping: [1, 19, 21, 23, 24]
2025-11-17 15:00:49,447 - linien_server.autolock.robust - DEBUG - Saved new robust_spectra_cropped.npy
2025-11-17 15:00:49,448 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-17 15:00:49,449 - linien_server.autolock.utils - DEBUG - Spectrum length:2025
2025-11-17 15:00:49,452 - linien_server.autolock.utils - DEBUG - Spectrum: [-6 -5 -5 -5 -5]...[-11 -11 -11 -11 -11]
2025-11-17 15:00:49,454 - linien_server.autolock.utils - DEBUG - Target indices: [1677, 1722]
2025-11-17 15:00:49,455 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-17 15:00:49,456 - linien_server.autolock.utils - DEBUG - Spectrum length:2025
2025-11-17 15:00:49,459 - linien_server.autolock.utils - DEBUG - Spectrum: [-6 -6 -5 -5 -5]...[-15 -15 -16 -15 -15]
2025-11-17 15:00:49,460 - linien_server.autolock.utils - DEBUG - Target indices: [1677, 1722]
2025-11-17 15:00:49,461 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-17 15:00:49,462 - linien_server.autolock.utils - DEBUG - Spectrum length:2025
2025-11-17 15:00:49,465 - linien_server.autolock.utils - DEBUG - Spectrum: [-5 -5 -5 -5 -4]...[-15 -15 -15 -15 -15]
2025-11-17 15:00:49,467 - linien_server.autolock.utils - DEBUG - Target indices: [1677, 1722]
2025-11-17 15:00:49,470 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-17 15:00:49,473 - linien_server.autolock.utils - DEBUG - Spectrum length:2025
2025-11-17 15:00:49,476 - linien_server.autolock.utils - DEBUG - Spectrum: [-5 -5 -5 -5 -5]...[-15 -15 -15 -15 -15]
2025-11-17 15:00:49,477 - linien_server.autolock.utils - DEBUG - Target indices: [1677, 1722]
2025-11-17 15:00:49,478 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-17 15:00:49,479 - linien_server.autolock.utils - DEBUG - Spectrum length:2025
2025-11-17 15:00:49,482 - linien_server.autolock.utils - DEBUG - Spectrum: [-5 -6 -6 -6 -6]...[-15 -15 -15 -14 -14]
2025-11-17 15:00:49,483 - linien_server.autolock.utils - DEBUG - Target indices: [1677, 1722]
2025-11-17 15:00:49,487 - linien_server.autolock.robust - DEBUG - x scale is 42
2025-11-17 15:00:49,539 - linien_server.autolock.robust - DEBUG - shift prepared spectrum by 19 samples to the left to match the original spectrum
2025-11-17 15:00:49,657 - linien_server.autolock.robust - DEBUG - Detected peaks with (position, height): [(1696, 842), (1578, -264), (1310, 1827), (1252, -1660)]
2025-11-17 15:00:49,682 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [60, 83, 84, 137, 138, 139, 171, 195, 196, 233, 234, 235, 236, 255, 297, 324, 325, 356, 357, 384, 385, 423, 424, 425, 434, 476, 514, 602, 635, 667, 709, 713, 714, 792, 793, 848, 894, 968, 969, 1053, 1245, 1313, 1528, 1529, 1531, 1578, 1690, 1755, 1946, 1956, 2002]
2025-11-17 15:00:49,683 - linien_server.autolock.utils - DEBUG - start_idx - time_scale//5: 1669
2025-11-17 15:00:49,685 - linien_server.autolock.utils - DEBUG - Considered zeros (backward): [60, 83, 84, 137, 138, 139, 171, 195, 196, 233, 234, 235, 236, 255, 297, 324, 325, 356, 357, 384, 385, 423, 424, 425, 434, 476, 514, 602, 635, 667, 709, 713, 714, 792, 793, 848, 894, 968, 969, 1053, 1245, 1313, 1528, 1529, 1531, 1578]
2025-11-17 15:00:49,713 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [60, 83, 84, 137, 138, 139, 171, 195, 196, 233, 234, 235, 236, 255, 297, 324, 325, 356, 357, 384, 385, 423, 424, 425, 434, 476, 514, 602, 635, 667, 709, 713, 714, 792, 793, 848, 894, 968, 969, 1053, 1245, 1313, 1528, 1529, 1531, 1578, 1690, 1755, 1946, 1956, 2002]
2025-11-17 15:00:49,714 - linien_server.autolock.utils - DEBUG - start_idx + time_scale//5: 1729
2025-11-17 15:00:49,716 - linien_server.autolock.utils - DEBUG - Considered zeros (forward): [1755, 1946, 1956, 2002]
2025-11-17 15:00:49,759 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [60, 83, 84, 137, 138, 139, 171, 195, 196, 233, 234, 235, 236, 255, 297, 324, 325, 356, 357, 384, 385, 423, 424, 425, 434, 476, 514, 602, 635, 667, 709, 713, 714, 792, 793, 848, 894, 968, 969, 1053, 1245, 1313, 1528, 1529, 1531, 1578, 1690, 1755, 1946, 1956, 2002]
2025-11-17 15:00:49,760 - linien_server.autolock.utils - DEBUG - start_idx - time_scale//5: 1675
2025-11-17 15:00:49,762 - linien_server.autolock.utils - DEBUG - Considered zeros (backward): [60, 83, 84, 137, 138, 139, 171, 195, 196, 233, 234, 235, 236, 255, 297, 324, 325, 356, 357, 384, 385, 423, 424, 425, 434, 476, 514, 602, 635, 667, 709, 713, 714, 792, 793, 848, 894, 968, 969, 1053, 1245, 1313, 1528, 1529, 1531, 1578]
2025-11-17 15:00:49,788 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [60, 83, 84, 137, 138, 139, 171, 195, 196, 233, 234, 235, 236, 255, 297, 324, 325, 356, 357, 384, 385, 423, 424, 425, 434, 476, 514, 602, 635, 667, 709, 713, 714, 792, 793, 848, 894, 968, 969, 1053, 1245, 1313, 1528, 1529, 1531, 1578, 1690, 1755, 1946, 1956, 2002]
2025-11-17 15:00:49,789 - linien_server.autolock.utils - DEBUG - start_idx + time_scale//5: 1729
2025-11-17 15:00:49,791 - linien_server.autolock.utils - DEBUG - Considered zeros (forward): [1755, 1946, 1956, 2002]
2025-11-17 15:00:49,822 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [60, 83, 84, 137, 138, 139, 171, 195, 196, 233, 234, 235, 236, 255, 297, 324, 325, 356, 357, 384, 385, 423, 424, 425, 434, 476, 514, 602, 635, 667, 709, 713, 714, 792, 793, 848, 894, 968, 969, 1053, 1245, 1313, 1528, 1529, 1531, 1578, 1690, 1755, 1946, 1956, 2002]
2025-11-17 15:00:49,824 - linien_server.autolock.utils - DEBUG - start_idx - time_scale//5: 1669
2025-11-17 15:00:49,826 - linien_server.autolock.utils - DEBUG - Considered zeros (backward): [60, 83, 84, 137, 138, 139, 171, 195, 196, 233, 234, 235, 236, 255, 297, 324, 325, 356, 357, 384, 385, 423, 424, 425, 434, 476, 514, 602, 635, 667, 709, 713, 714, 792, 793, 848, 894, 968, 969, 1053, 1245, 1313, 1528, 1529, 1531, 1578]
2025-11-17 15:00:49,854 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [60, 83, 84, 137, 138, 139, 171, 195, 196, 233, 234, 235, 236, 255, 297, 324, 325, 356, 357, 384, 385, 423, 424, 425, 434, 476, 514, 602, 635, 667, 709, 713, 714, 792, 793, 848, 894, 968, 969, 1053, 1245, 1313, 1528, 1529, 1531, 1578, 1690, 1755, 1946, 1956, 2002]
2025-11-17 15:00:49,855 - linien_server.autolock.utils - DEBUG - start_idx + time_scale//5: 1729
2025-11-17 15:00:49,857 - linien_server.autolock.utils - DEBUG - Considered zeros (forward): [1755, 1946, 1956, 2002]
2025-11-17 15:00:49,888 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [60, 83, 84, 137, 138, 139, 171, 195, 196, 233, 234, 235, 236, 255, 297, 324, 325, 356, 357, 384, 385, 423, 424, 425, 434, 476, 514, 602, 635, 667, 709, 713, 714, 792, 793, 848, 894, 968, 969, 1053, 1245, 1313, 1528, 1529, 1531, 1578, 1690, 1755, 1946, 1956, 2002]
2025-11-17 15:00:49,889 - linien_server.autolock.utils - DEBUG - start_idx - time_scale//5: 1669
2025-11-17 15:00:49,891 - linien_server.autolock.utils - DEBUG - Considered zeros (backward): [60, 83, 84, 137, 138, 139, 171, 195, 196, 233, 234, 235, 236, 255, 297, 324, 325, 356, 357, 384, 385, 423, 424, 425, 434, 476, 514, 602, 635, 667, 709, 713, 714, 792, 793, 848, 894, 968, 969, 1053, 1245, 1313, 1528, 1529, 1531, 1578]
2025-11-17 15:00:49,917 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [60, 83, 84, 137, 138, 139, 171, 195, 196, 233, 234, 235, 236, 255, 297, 324, 325, 356, 357, 384, 385, 423, 424, 425, 434, 476, 514, 602, 635, 667, 709, 713, 714, 792, 793, 848, 894, 968, 969, 1053, 1245, 1313, 1528, 1529, 1531, 1578, 1690, 1755, 1946, 1956, 2002]
2025-11-17 15:00:49,918 - linien_server.autolock.utils - DEBUG - start_idx + time_scale//5: 1729
2025-11-17 15:00:49,920 - linien_server.autolock.utils - DEBUG - Considered zeros (forward): [1755, 1946, 1956, 2002]
2025-11-17 15:00:49,951 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [60, 83, 84, 137, 138, 139, 171, 195, 196, 233, 234, 235, 236, 255, 297, 324, 325, 356, 357, 384, 385, 423, 424, 425, 434, 476, 514, 602, 635, 667, 709, 713, 714, 792, 793, 848, 894, 968, 969, 1053, 1245, 1313, 1528, 1529, 1531, 1578, 1690, 1755, 1946, 1956, 2002]
2025-11-17 15:00:49,952 - linien_server.autolock.utils - DEBUG - start_idx - time_scale//5: 1674
2025-11-17 15:00:49,954 - linien_server.autolock.utils - DEBUG - Considered zeros (backward): [60, 83, 84, 137, 138, 139, 171, 195, 196, 233, 234, 235, 236, 255, 297, 324, 325, 356, 357, 384, 385, 423, 424, 425, 434, 476, 514, 602, 635, 667, 709, 713, 714, 792, 793, 848, 894, 968, 969, 1053, 1245, 1313, 1528, 1529, 1531, 1578]
2025-11-17 15:00:49,980 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [60, 83, 84, 137, 138, 139, 171, 195, 196, 233, 234, 235, 236, 255, 297, 324, 325, 356, 357, 384, 385, 423, 424, 425, 434, 476, 514, 602, 635, 667, 709, 713, 714, 792, 793, 848, 894, 968, 969, 1053, 1245, 1313, 1528, 1529, 1531, 1578, 1690, 1755, 1946, 1956, 2002]
2025-11-17 15:00:49,981 - linien_server.autolock.utils - DEBUG - start_idx + time_scale//5: 1729
2025-11-17 15:00:49,983 - linien_server.autolock.utils - DEBUG - Considered zeros (forward): [1755, 1946, 1956, 2002]
2025-11-17 15:00:49,990 - linien_server.autolock.robust - DEBUG - Determined lock regions: [(1633, 1755), (1628, 1755), (1634, 1755), (1633, 1755), (1635, 1755)]
2025-11-17 15:00:49,994 - linien_server.autolock.robust - DEBUG - Try out tolerance 0.95
2025-11-17 15:00:49,996 - linien_server.autolock.robust - DEBUG - Original peaks: [(1696, 842), (1578, -264), (1310, 1827), (1252, -1660)]
2025-11-17 15:00:50,007 - linien_server.autolock.robust - DEBUG - Filtered peaks: [(1696, 799.9), (1578, -250.79999999999998), (1310, 1735.6499999999999), (1252, -1577.0)]
2025-11-17 15:00:50,009 - linien_server.autolock.robust - DEBUG - Discarded peaks: [(1696, 842), (1578, -264), (1310, 1827), (1252, -1660)]
2025-11-17 15:00:50,011 - linien_server.autolock.robust - DEBUG - Target peak index in prepared spectrum: 1696
2025-11-17 15:00:50,013 - linien_server.autolock.robust - DEBUG - final wait time is 10 samples
2025-11-17 15:00:50,015 - linien_server.autolock.robust - DEBUG - Generated description: [(1126, -1577), (52, 1735), (241, -250), (106, 799)]
2025-11-17 15:00:50,053 - linien_server.autolock.robust - DEBUG - Lock position found at index 1697 for current spectrum
2025-11-17 15:00:50,086 - linien_server.autolock.robust - DEBUG - Lock position found at index 1702 for current spectrum
2025-11-17 15:00:50,119 - linien_server.autolock.robust - DEBUG - Lock position found at index 1699 for current spectrum
2025-11-17 15:00:50,153 - linien_server.autolock.robust - DEBUG - Lock position found at index 1696 for current spectrum
2025-11-17 15:00:50,188 - linien_server.autolock.robust - DEBUG - Lock position found at index 1702 for current spectrum
2025-11-17 15:00:50,190 - linien_server.autolock.robust - DEBUG - Description is [(1126, -1577), (52, 1735), (241, -250), (106, 799)]
2025-11-17 15:00:50,192 - linien_server.autolock.robust - DEBUG - Calculation of autolock description took 0.9066646099090576
2025-11-17 15:00:50,253 - linien_server.server - ERROR - incorrect data received for lock state, ignoring!
2025-11-17 15:00:50,576 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-17 15:00:50,578 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-17 15:00:50,581 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-17 15:00:50,582 - linien_server.autolock.autolock - DEBUG - after lock
2025-11-18 07:39:10,572 - linien_server.cli - DEBUG - Copied linien-server.service to /etc/systemd/system
2025-11-18 07:39:10,574 - linien_server.cli - INFO - Starting Linien server
2025-11-18 07:39:10,640 - linien_server.cli - INFO - Started Linien server
2025-11-18 07:39:30,506 - linien_server.parameters - INFO - Restoring parameters from /root/.local/share/linien/parameters.json
2025-11-18 07:39:30,510 - linien_server.parameters - INFO - Restored parameters from /root/.local/share/linien/parameters.json
2025-11-18 07:39:30,515 - linien_common.influxdb - INFO - Saved InfluxDB credentials to /root/.local/share/linien/influxdb_credentials.json
2025-11-18 07:39:31,381 - linien_server.acquisition - INFO - Using fpgautil to deploy gateware.
2025-11-18 07:39:31,651 - linien_server.server - DEBUG - Ping  1
2025-11-18 07:39:31,717 - linien_server.mdio_tool - INFO - Disabling ethernet blinking with mdio-tool at /usr/local/lib/python3.10/dist-packages/linien_server/mdio-tool
2025-11-18 07:39:31,762 - linien_server.server - INFO - Starting server.
2025-11-18 07:39:32,681 - linien_server.server - DEBUG - Ping  2
2025-11-18 07:39:33,697 - linien_server.server - DEBUG - Ping  3
2025-11-18 07:39:33,707 - linien_server.server - DEBUG - Further pings will be suppressed
2025-11-18 08:51:06,440 - linien_server.cli - INFO - Stopping Linien server
2025-11-18 08:51:06,554 - linien_server.cli - INFO - Stopped Linien server
2025-11-18 08:51:09,884 - linien_server.cli - DEBUG - Copied linien-server.service to /etc/systemd/system
2025-11-18 08:51:09,885 - linien_server.cli - INFO - Starting Linien server
2025-11-18 08:51:09,962 - linien_server.cli - INFO - Started Linien server
2025-11-18 08:51:28,388 - linien_server.parameters - INFO - Restoring parameters from /root/.local/share/linien/parameters.json
2025-11-18 08:51:28,394 - linien_server.parameters - INFO - Restored parameters from /root/.local/share/linien/parameters.json
2025-11-18 08:51:28,399 - linien_common.influxdb - INFO - Saved InfluxDB credentials to /root/.local/share/linien/influxdb_credentials.json
2025-11-18 08:51:28,645 - linien_server.acquisition - INFO - Using fpgautil to deploy gateware.
2025-11-18 08:51:28,887 - linien_server.server - DEBUG - Ping  1
2025-11-18 08:51:28,911 - linien_server.mdio_tool - INFO - Disabling ethernet blinking with mdio-tool at /usr/local/lib/python3.10/dist-packages/linien_server/mdio-tool
2025-11-18 08:51:28,979 - linien_server.server - INFO - Starting server.
2025-11-18 08:51:29,893 - linien_server.server - DEBUG - Ping  2
2025-11-18 08:51:30,915 - linien_server.server - DEBUG - Ping  3
2025-11-18 08:51:30,937 - linien_server.server - DEBUG - Further pings will be suppressed
2025-11-18 09:31:52,256 - linien_server.cli - INFO - Stopping Linien server
2025-11-18 09:31:52,521 - linien_server.cli - INFO - Stopped Linien server
2025-11-18 09:31:55,741 - linien_server.cli - DEBUG - Copied linien-server.service to /etc/systemd/system
2025-11-18 09:31:55,742 - linien_server.cli - INFO - Starting Linien server
2025-11-18 09:31:55,811 - linien_server.cli - INFO - Started Linien server
2025-11-18 09:32:08,136 - linien_server.cli - DEBUG - Copied linien-server.service to /etc/systemd/system
2025-11-18 09:32:08,138 - linien_server.cli - INFO - Starting Linien server
2025-11-18 09:32:08,189 - linien_server.cli - INFO - Started Linien server
2025-11-18 09:32:14,913 - linien_server.parameters - INFO - Restoring parameters from /root/.local/share/linien/parameters.json
2025-11-18 09:32:14,916 - linien_server.parameters - INFO - Restored parameters from /root/.local/share/linien/parameters.json
2025-11-18 09:32:14,920 - linien_common.influxdb - INFO - Saved InfluxDB credentials to /root/.local/share/linien/influxdb_credentials.json
2025-11-18 09:32:15,123 - linien_server.acquisition - INFO - Using fpgautil to deploy gateware.
2025-11-18 09:32:15,284 - linien_server.server - DEBUG - Ping  1
2025-11-18 09:32:15,325 - linien_server.mdio_tool - INFO - Disabling ethernet blinking with mdio-tool at /usr/local/lib/python3.10/dist-packages/linien_server/mdio-tool
2025-11-18 09:32:15,363 - linien_server.server - INFO - Starting server.
2025-11-18 09:32:16,318 - linien_server.server - DEBUG - Ping  2
2025-11-18 09:32:17,350 - linien_server.server - DEBUG - Ping  3
2025-11-18 09:32:17,361 - linien_server.server - DEBUG - Further pings will be suppressed
2025-11-18 09:48:20,669 - linien_server.cli - INFO - Stopping Linien server
2025-11-18 09:48:20,816 - linien_server.cli - INFO - Stopped Linien server
2025-11-18 09:48:24,090 - linien_server.cli - DEBUG - Copied linien-server.service to /etc/systemd/system
2025-11-18 09:48:24,091 - linien_server.cli - INFO - Starting Linien server
2025-11-18 09:48:24,159 - linien_server.cli - INFO - Started Linien server
2025-11-18 09:48:38,567 - linien_server.cli - DEBUG - Copied linien-server.service to /etc/systemd/system
2025-11-18 09:48:38,569 - linien_server.cli - INFO - Starting Linien server
2025-11-18 09:48:38,619 - linien_server.cli - INFO - Started Linien server
2025-11-18 09:48:42,241 - linien_server.parameters - INFO - Restoring parameters from /root/.local/share/linien/parameters.json
2025-11-18 09:48:42,245 - linien_server.parameters - INFO - Restored parameters from /root/.local/share/linien/parameters.json
2025-11-18 09:48:42,249 - linien_common.influxdb - INFO - Saved InfluxDB credentials to /root/.local/share/linien/influxdb_credentials.json
2025-11-18 09:48:42,451 - linien_server.acquisition - INFO - Using fpgautil to deploy gateware.
2025-11-18 09:48:42,602 - linien_server.server - DEBUG - Ping  1
2025-11-18 09:48:42,644 - linien_server.mdio_tool - INFO - Disabling ethernet blinking with mdio-tool at /usr/local/lib/python3.10/dist-packages/linien_server/mdio-tool
2025-11-18 09:48:42,671 - linien_server.server - INFO - Starting server.
2025-11-18 09:48:43,615 - linien_server.server - DEBUG - Ping  2
2025-11-18 09:48:44,623 - linien_server.server - DEBUG - Ping  3
2025-11-18 09:48:44,638 - linien_server.server - DEBUG - Further pings will be suppressed
2025-11-18 09:50:10,133 - linien_server.cli - INFO - Stopping Linien server
2025-11-18 09:50:10,245 - linien_server.cli - INFO - Stopped Linien server
2025-11-18 09:50:13,380 - linien_server.cli - DEBUG - Copied linien-server.service to /etc/systemd/system
2025-11-18 09:50:13,381 - linien_server.cli - INFO - Starting Linien server
2025-11-18 09:50:13,453 - linien_server.cli - INFO - Started Linien server
2025-11-18 09:50:22,062 - linien_server.cli - DEBUG - Copied linien-server.service to /etc/systemd/system
2025-11-18 09:50:22,064 - linien_server.cli - INFO - Starting Linien server
2025-11-18 09:50:22,115 - linien_server.cli - INFO - Started Linien server
2025-11-18 09:50:30,209 - linien_server.parameters - INFO - Restoring parameters from /root/.local/share/linien/parameters.json
2025-11-18 09:50:30,213 - linien_server.parameters - INFO - Restored parameters from /root/.local/share/linien/parameters.json
2025-11-18 09:50:30,216 - linien_common.influxdb - INFO - Saved InfluxDB credentials to /root/.local/share/linien/influxdb_credentials.json
2025-11-18 09:50:30,407 - linien_server.acquisition - INFO - Using fpgautil to deploy gateware.
2025-11-18 09:50:30,549 - linien_server.server - DEBUG - Ping  1
2025-11-18 09:50:30,559 - linien_server.mdio_tool - INFO - Disabling ethernet blinking with mdio-tool at /usr/local/lib/python3.10/dist-packages/linien_server/mdio-tool
2025-11-18 09:50:30,595 - linien_server.server - INFO - Starting server.
2025-11-18 09:50:31,562 - linien_server.server - DEBUG - Ping  2
2025-11-18 09:50:32,580 - linien_server.server - DEBUG - Ping  3
2025-11-18 09:50:32,597 - linien_server.server - DEBUG - Further pings will be suppressed
2025-11-18 10:50:31,936 - linien_server.cli - INFO - Stopping Linien server
2025-11-18 10:50:32,178 - linien_server.cli - INFO - Stopped Linien server
2025-11-18 10:50:35,578 - linien_server.cli - DEBUG - Copied linien-server.service to /etc/systemd/system
2025-11-18 10:50:35,580 - linien_server.cli - INFO - Starting Linien server
2025-11-18 10:50:35,645 - linien_server.cli - INFO - Started Linien server
2025-11-18 10:50:48,727 - linien_server.cli - DEBUG - Copied linien-server.service to /etc/systemd/system
2025-11-18 10:50:48,729 - linien_server.cli - INFO - Starting Linien server
2025-11-18 10:50:48,808 - linien_server.cli - INFO - Started Linien server
2025-11-18 10:50:56,156 - linien_server.parameters - INFO - Restoring parameters from /root/.local/share/linien/parameters.json
2025-11-18 10:50:56,162 - linien_server.parameters - INFO - Restored parameters from /root/.local/share/linien/parameters.json
2025-11-18 10:50:56,167 - linien_common.influxdb - INFO - Saved InfluxDB credentials to /root/.local/share/linien/influxdb_credentials.json
2025-11-18 10:50:56,402 - linien_server.acquisition - INFO - Using fpgautil to deploy gateware.
2025-11-18 10:50:56,646 - linien_server.server - DEBUG - Ping  1
2025-11-18 10:50:56,689 - linien_server.mdio_tool - INFO - Disabling ethernet blinking with mdio-tool at /usr/local/lib/python3.10/dist-packages/linien_server/mdio-tool
2025-11-18 10:50:56,738 - linien_server.server - INFO - Starting server.
2025-11-18 10:50:57,662 - linien_server.server - DEBUG - Ping  2
2025-11-18 10:50:58,698 - linien_server.server - DEBUG - Ping  3
2025-11-18 10:50:58,713 - linien_server.server - DEBUG - Further pings will be suppressed
2025-11-18 11:06:55,417 - linien_server.cli - INFO - Stopping Linien server
2025-11-18 11:06:55,541 - linien_server.cli - INFO - Stopped Linien server
2025-11-18 11:06:58,828 - linien_server.cli - DEBUG - Copied linien-server.service to /etc/systemd/system
2025-11-18 11:06:58,829 - linien_server.cli - INFO - Starting Linien server
2025-11-18 11:06:58,905 - linien_server.cli - INFO - Started Linien server
2025-11-18 11:07:07,364 - linien_server.cli - DEBUG - Copied linien-server.service to /etc/systemd/system
2025-11-18 11:07:07,366 - linien_server.cli - INFO - Starting Linien server
2025-11-18 11:07:07,417 - linien_server.cli - INFO - Started Linien server
2025-11-18 11:07:17,470 - linien_server.parameters - INFO - Restoring parameters from /root/.local/share/linien/parameters.json
2025-11-18 11:07:17,474 - linien_server.parameters - INFO - Restored parameters from /root/.local/share/linien/parameters.json
2025-11-18 11:07:17,477 - linien_common.influxdb - INFO - Saved InfluxDB credentials to /root/.local/share/linien/influxdb_credentials.json
2025-11-18 11:07:17,670 - linien_server.acquisition - INFO - Using fpgautil to deploy gateware.
2025-11-18 11:07:17,805 - linien_server.server - DEBUG - Ping  1
2025-11-18 11:07:17,816 - linien_server.mdio_tool - INFO - Disabling ethernet blinking with mdio-tool at /usr/local/lib/python3.10/dist-packages/linien_server/mdio-tool
2025-11-18 11:07:17,863 - linien_server.server - INFO - Starting server.
2025-11-18 11:07:18,818 - linien_server.server - DEBUG - Ping  2
2025-11-18 11:07:19,839 - linien_server.server - DEBUG - Ping  3
2025-11-18 11:07:19,851 - linien_server.server - DEBUG - Further pings will be suppressed
2025-11-18 12:35:40,306 - linien_server.cli - DEBUG - Copied linien-server.service to /etc/systemd/system
2025-11-18 12:35:40,309 - linien_server.cli - INFO - Starting Linien server
2025-11-18 12:35:40,432 - linien_server.cli - INFO - Started Linien server
2025-11-18 12:36:00,197 - linien_server.parameters - INFO - Restoring parameters from /root/.local/share/linien/parameters.json
2025-11-18 12:36:00,202 - linien_server.parameters - INFO - Restored parameters from /root/.local/share/linien/parameters.json
2025-11-18 12:36:00,207 - linien_common.influxdb - INFO - Saved InfluxDB credentials to /root/.local/share/linien/influxdb_credentials.json
2025-11-18 12:36:00,452 - linien_server.acquisition - INFO - Using fpgautil to deploy gateware.
2025-11-18 12:36:00,697 - linien_server.server - DEBUG - Ping  1
2025-11-18 12:36:00,761 - linien_server.mdio_tool - INFO - Disabling ethernet blinking with mdio-tool at /usr/local/lib/python3.10/dist-packages/linien_server/mdio-tool
2025-11-18 12:36:00,807 - linien_server.server - INFO - Starting server.
2025-11-18 12:36:01,733 - linien_server.server - DEBUG - Ping  2
2025-11-18 12:36:02,743 - linien_server.server - DEBUG - Ping  3
2025-11-18 12:36:02,768 - linien_server.server - DEBUG - Further pings will be suppressed
2025-11-18 13:15:08,621 - linien_server.cli - INFO - Stopping Linien server
2025-11-18 13:15:08,936 - linien_server.cli - INFO - Stopped Linien server
2025-11-18 13:15:12,323 - linien_server.cli - DEBUG - Copied linien-server.service to /etc/systemd/system
2025-11-18 13:15:12,325 - linien_server.cli - INFO - Starting Linien server
2025-11-18 13:15:12,402 - linien_server.cli - INFO - Started Linien server
2025-11-18 13:15:22,931 - linien_server.cli - DEBUG - Copied linien-server.service to /etc/systemd/system
2025-11-18 13:15:22,934 - linien_server.cli - INFO - Starting Linien server
2025-11-18 13:15:22,985 - linien_server.cli - INFO - Started Linien server
2025-11-18 13:15:32,484 - linien_server.parameters - INFO - Restoring parameters from /root/.local/share/linien/parameters.json
2025-11-18 13:15:32,490 - linien_server.parameters - INFO - Restored parameters from /root/.local/share/linien/parameters.json
2025-11-18 13:15:32,495 - linien_common.influxdb - INFO - Saved InfluxDB credentials to /root/.local/share/linien/influxdb_credentials.json
2025-11-18 13:15:32,726 - linien_server.acquisition - INFO - Using fpgautil to deploy gateware.
2025-11-18 13:15:32,969 - linien_server.server - DEBUG - Ping  1
2025-11-18 13:15:33,017 - linien_server.mdio_tool - INFO - Disabling ethernet blinking with mdio-tool at /usr/local/lib/python3.10/dist-packages/linien_server/mdio-tool
2025-11-18 13:15:33,072 - linien_server.server - INFO - Starting server.
2025-11-18 13:15:34,011 - linien_server.server - DEBUG - Ping  2
2025-11-18 13:15:35,041 - linien_server.server - DEBUG - Ping  3
2025-11-18 13:15:35,050 - linien_server.server - DEBUG - Further pings will be suppressed
2025-11-18 13:54:34,587 - linien_server.autolock.autolock - DEBUG - Initialize Autolock
2025-11-18 13:54:34,644 - linien_server.autolock.autolock - DEBUG - Start the autolock
2025-11-18 13:54:34,653 - linien_server.autolock.autolock - DEBUG - (x0, x1) = (1373,1506)
2025-11-18 13:54:34,659 - linien_server.autolock.autolock - DEBUG - Start autolock with mode 2
2025-11-18 13:54:34,662 - linien_server.autolock.simple - DEBUG - started SimpleAutolock
2025-11-18 13:54:35,047 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-18 13:54:35,051 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-18 13:54:35,054 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-18 13:54:35,232 - linien_server.autolock.simple - DEBUG - lock point is 3392, shift is -0.4140625
2025-11-18 13:57:45,069 - linien_server.cli - INFO - Stopping Linien server
2025-11-18 13:57:45,196 - linien_server.cli - INFO - Stopped Linien server
2025-11-18 13:57:48,502 - linien_server.cli - DEBUG - Copied linien-server.service to /etc/systemd/system
2025-11-18 13:57:48,504 - linien_server.cli - INFO - Starting Linien server
2025-11-18 13:57:48,584 - linien_server.cli - INFO - Started Linien server
2025-11-18 13:57:57,034 - linien_server.cli - DEBUG - Copied linien-server.service to /etc/systemd/system
2025-11-18 13:57:57,036 - linien_server.cli - INFO - Starting Linien server
2025-11-18 13:57:57,088 - linien_server.cli - INFO - Started Linien server
2025-11-18 13:58:06,878 - linien_server.parameters - INFO - Restoring parameters from /root/.local/share/linien/parameters.json
2025-11-18 13:58:06,881 - linien_server.parameters - INFO - Restored parameters from /root/.local/share/linien/parameters.json
2025-11-18 13:58:06,885 - linien_common.influxdb - INFO - Saved InfluxDB credentials to /root/.local/share/linien/influxdb_credentials.json
2025-11-18 13:58:07,075 - linien_server.acquisition - INFO - Using fpgautil to deploy gateware.
2025-11-18 13:58:07,233 - linien_server.server - DEBUG - Ping  1
2025-11-18 13:58:07,280 - linien_server.mdio_tool - INFO - Disabling ethernet blinking with mdio-tool at /usr/local/lib/python3.10/dist-packages/linien_server/mdio-tool
2025-11-18 13:58:07,330 - linien_server.server - INFO - Starting server.
2025-11-18 13:58:08,261 - linien_server.server - DEBUG - Ping  2
2025-11-18 13:58:09,281 - linien_server.server - DEBUG - Ping  3
2025-11-18 13:58:09,304 - linien_server.server - DEBUG - Further pings will be suppressed
2025-11-18 14:02:14,742 - linien_server.autolock.autolock - DEBUG - Initialize Autolock
2025-11-18 14:02:14,763 - linien_server.autolock.autolock - DEBUG - Start the autolock
2025-11-18 14:02:14,771 - linien_server.autolock.autolock - DEBUG - (x0, x1) = (958,1193)
2025-11-18 14:02:14,777 - linien_server.autolock.autolock - DEBUG - Start autolock with mode 2
2025-11-18 14:02:14,779 - linien_server.autolock.simple - DEBUG - started SimpleAutolock
2025-11-18 14:02:15,142 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-18 14:02:15,147 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-18 14:02:15,151 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-18 14:02:15,304 - linien_server.autolock.simple - DEBUG - lock point is 320, shift is -0.0390625
2025-11-18 14:37:55,537 - linien_server.cli - INFO - Stopping Linien server
2025-11-18 14:37:55,663 - linien_server.cli - INFO - Stopped Linien server
2025-11-18 14:37:58,747 - linien_server.cli - DEBUG - Copied linien-server.service to /etc/systemd/system
2025-11-18 14:37:58,748 - linien_server.cli - INFO - Starting Linien server
2025-11-18 14:37:58,824 - linien_server.cli - INFO - Started Linien server
2025-11-18 14:38:15,081 - linien_server.parameters - INFO - Restoring parameters from /root/.local/share/linien/parameters.json
2025-11-18 14:38:15,084 - linien_server.parameters - INFO - Restored parameters from /root/.local/share/linien/parameters.json
2025-11-18 14:38:15,088 - linien_common.influxdb - INFO - Saved InfluxDB credentials to /root/.local/share/linien/influxdb_credentials.json
2025-11-18 14:38:15,286 - linien_server.acquisition - INFO - Using fpgautil to deploy gateware.
2025-11-18 14:38:15,425 - linien_server.server - DEBUG - Ping  1
2025-11-18 14:38:15,446 - linien_server.mdio_tool - INFO - Disabling ethernet blinking with mdio-tool at /usr/local/lib/python3.10/dist-packages/linien_server/mdio-tool
2025-11-18 14:38:15,494 - linien_server.server - INFO - Starting server.
2025-11-18 14:38:16,450 - linien_server.server - DEBUG - Ping  2
2025-11-18 14:38:17,480 - linien_server.server - DEBUG - Ping  3
2025-11-18 14:38:17,502 - linien_server.server - DEBUG - Further pings will be suppressed
2025-11-18 14:40:12,700 - linien_server.autolock.autolock - DEBUG - Initialize Autolock
2025-11-18 14:40:12,727 - linien_server.autolock.autolock - DEBUG - Start the autolock
2025-11-18 14:40:12,736 - linien_server.autolock.autolock - DEBUG - (x0, x1) = (1030,1265)
2025-11-18 14:40:12,743 - linien_server.autolock.autolock - DEBUG - Start autolock with mode 1
2025-11-18 14:40:13,124 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-18 14:40:13,127 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-18 14:40:13,130 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-18 14:40:13,243 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-18 14:40:13,296 - linien_server.autolock.robust - ERROR - Not enough spectra collected:2 of 5
2025-11-18 14:40:13,502 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-18 14:40:13,504 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-18 14:40:13,506 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-18 14:40:13,603 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-18 14:40:13,631 - linien_server.autolock.robust - ERROR - Not enough spectra collected:3 of 5
2025-11-18 14:40:13,891 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-18 14:40:13,895 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-18 14:40:13,897 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-18 14:40:13,999 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-18 14:40:14,028 - linien_server.autolock.robust - ERROR - Not enough spectra collected:4 of 5
2025-11-18 14:40:14,313 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-18 14:40:14,315 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-18 14:40:14,318 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-18 14:40:14,422 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-18 14:40:14,455 - linien_server.autolock.robust - DEBUG - enough spectra!, calculate
2025-11-18 14:40:14,456 - linien_server.autolock.robust - DEBUG - Entered in calculate_autolock_instructions_v2
2025-11-18 14:40:14,464 - linien_server.autolock.robust - DEBUG - Saved new robust_spectra.npy and target_idxs.npy
2025-11-18 14:40:14,466 - linien_server.autolock.utils - DEBUG - Entered in crop_spectra_to_same_view
2025-11-18 14:40:14,560 - linien_server.autolock.utils - DEBUG - Shifts calculated for cropping: [1, 2, -1, -2, -8]
2025-11-18 14:40:14,564 - linien_server.autolock.robust - DEBUG - Saved new robust_spectra_cropped.npy
2025-11-18 14:40:14,565 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-18 14:40:14,567 - linien_server.autolock.utils - DEBUG - Spectrum length:2038
2025-11-18 14:40:14,571 - linien_server.autolock.utils - DEBUG - Spectrum: [4. 4. 4. 4. 4.]...[20. 20. 20. 19. 20.]
2025-11-18 14:40:14,573 - linien_server.autolock.utils - DEBUG - Target indices: [1110, 1155]
2025-11-18 14:40:14,574 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-18 14:40:14,576 - linien_server.autolock.utils - DEBUG - Spectrum length:2038
2025-11-18 14:40:14,582 - linien_server.autolock.utils - DEBUG - Spectrum: [5 5 5 5 4]...[21 21 21 20 20]
2025-11-18 14:40:14,586 - linien_server.autolock.utils - DEBUG - Target indices: [1110, 1155]
2025-11-18 14:40:14,588 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-18 14:40:14,589 - linien_server.autolock.utils - DEBUG - Spectrum length:2038
2025-11-18 14:40:14,592 - linien_server.autolock.utils - DEBUG - Spectrum: [3 3 3 3 3]...[20 19 19 19 19]
2025-11-18 14:40:14,593 - linien_server.autolock.utils - DEBUG - Target indices: [1110, 1155]
2025-11-18 14:40:14,595 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-18 14:40:14,596 - linien_server.autolock.utils - DEBUG - Spectrum length:2038
2025-11-18 14:40:14,599 - linien_server.autolock.utils - DEBUG - Spectrum: [3 2 2 3 2]...[19 19 19 19 19]
2025-11-18 14:40:14,600 - linien_server.autolock.utils - DEBUG - Target indices: [1110, 1155]
2025-11-18 14:40:14,601 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-18 14:40:14,602 - linien_server.autolock.utils - DEBUG - Spectrum length:2038
2025-11-18 14:40:14,605 - linien_server.autolock.utils - DEBUG - Spectrum: [-2  2  2  2  2]...[18 18 18 19 19]
2025-11-18 14:40:14,606 - linien_server.autolock.utils - DEBUG - Target indices: [1110, 1155]
2025-11-18 14:40:14,608 - linien_server.autolock.robust - DEBUG - x scale is 40
2025-11-18 14:40:14,647 - linien_server.autolock.robust - DEBUG - shift prepared spectrum by 18 samples to the left to match the original spectrum
2025-11-18 14:40:14,743 - linien_server.autolock.robust - DEBUG - Detected peaks with (position, height): [(1128, 1226.0), (745, -1807.0), (445, 54.0), (406, -183.0), (361, 195.0)]
2025-11-18 14:40:14,770 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [54, 55, 62, 92, 93, 131, 132, 156, 157, 158, 159, 160, 161, 190, 191, 213, 279, 280, 354, 406, 450, 563, 569, 740, 799, 873, 903, 929, 930, 1124, 1182, 1346, 1347, 1348, 1349, 1586, 1602, 1835, 1850]
2025-11-18 14:40:14,772 - linien_server.autolock.utils - DEBUG - start_idx - time_scale//5: 1102
2025-11-18 14:40:14,773 - linien_server.autolock.utils - DEBUG - Considered zeros (backward): [54, 55, 62, 92, 93, 131, 132, 156, 157, 158, 159, 160, 161, 190, 191, 213, 279, 280, 354, 406, 450, 563, 569, 740, 799, 873, 903, 929, 930]
2025-11-18 14:40:14,804 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [54, 55, 62, 92, 93, 131, 132, 156, 157, 158, 159, 160, 161, 190, 191, 213, 279, 280, 354, 406, 450, 563, 569, 740, 799, 873, 903, 929, 930, 1124, 1182, 1346, 1347, 1348, 1349, 1586, 1602, 1835, 1850]
2025-11-18 14:40:14,805 - linien_server.autolock.utils - DEBUG - start_idx + time_scale//5: 1158
2025-11-18 14:40:14,807 - linien_server.autolock.utils - DEBUG - Considered zeros (forward): [1182, 1346, 1347, 1348, 1349, 1586, 1602, 1835, 1850]
2025-11-18 14:40:14,835 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [54, 55, 62, 92, 93, 131, 132, 156, 157, 158, 159, 160, 161, 190, 191, 213, 279, 280, 354, 406, 450, 563, 569, 740, 799, 873, 903, 929, 930, 1124, 1182, 1346, 1347, 1348, 1349, 1586, 1602, 1835, 1850]
2025-11-18 14:40:14,836 - linien_server.autolock.utils - DEBUG - start_idx - time_scale//5: 1102
2025-11-18 14:40:14,838 - linien_server.autolock.utils - DEBUG - Considered zeros (backward): [54, 55, 62, 92, 93, 131, 132, 156, 157, 158, 159, 160, 161, 190, 191, 213, 279, 280, 354, 406, 450, 563, 569, 740, 799, 873, 903, 929, 930]
2025-11-18 14:40:14,868 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [54, 55, 62, 92, 93, 131, 132, 156, 157, 158, 159, 160, 161, 190, 191, 213, 279, 280, 354, 406, 450, 563, 569, 740, 799, 873, 903, 929, 930, 1124, 1182, 1346, 1347, 1348, 1349, 1586, 1602, 1835, 1850]
2025-11-18 14:40:14,869 - linien_server.autolock.utils - DEBUG - start_idx + time_scale//5: 1159
2025-11-18 14:40:14,870 - linien_server.autolock.utils - DEBUG - Considered zeros (forward): [1182, 1346, 1347, 1348, 1349, 1586, 1602, 1835, 1850]
2025-11-18 14:40:14,899 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [54, 55, 62, 92, 93, 131, 132, 156, 157, 158, 159, 160, 161, 190, 191, 213, 279, 280, 354, 406, 450, 563, 569, 740, 799, 873, 903, 929, 930, 1124, 1182, 1346, 1347, 1348, 1349, 1586, 1602, 1835, 1850]
2025-11-18 14:40:14,900 - linien_server.autolock.utils - DEBUG - start_idx - time_scale//5: 1102
2025-11-18 14:40:14,902 - linien_server.autolock.utils - DEBUG - Considered zeros (backward): [54, 55, 62, 92, 93, 131, 132, 156, 157, 158, 159, 160, 161, 190, 191, 213, 279, 280, 354, 406, 450, 563, 569, 740, 799, 873, 903, 929, 930]
2025-11-18 14:40:14,930 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [54, 55, 62, 92, 93, 131, 132, 156, 157, 158, 159, 160, 161, 190, 191, 213, 279, 280, 354, 406, 450, 563, 569, 740, 799, 873, 903, 929, 930, 1124, 1182, 1346, 1347, 1348, 1349, 1586, 1602, 1835, 1850]
2025-11-18 14:40:14,932 - linien_server.autolock.utils - DEBUG - start_idx + time_scale//5: 1159
2025-11-18 14:40:14,933 - linien_server.autolock.utils - DEBUG - Considered zeros (forward): [1182, 1346, 1347, 1348, 1349, 1586, 1602, 1835, 1850]
2025-11-18 14:40:14,963 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [54, 55, 62, 92, 93, 131, 132, 156, 157, 158, 159, 160, 161, 190, 191, 213, 279, 280, 354, 406, 450, 563, 569, 740, 799, 873, 903, 929, 930, 1124, 1182, 1346, 1347, 1348, 1349, 1586, 1602, 1835, 1850]
2025-11-18 14:40:14,966 - linien_server.autolock.utils - DEBUG - start_idx - time_scale//5: 1102
2025-11-18 14:40:14,968 - linien_server.autolock.utils - DEBUG - Considered zeros (backward): [54, 55, 62, 92, 93, 131, 132, 156, 157, 158, 159, 160, 161, 190, 191, 213, 279, 280, 354, 406, 450, 563, 569, 740, 799, 873, 903, 929, 930]
2025-11-18 14:40:14,997 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [54, 55, 62, 92, 93, 131, 132, 156, 157, 158, 159, 160, 161, 190, 191, 213, 279, 280, 354, 406, 450, 563, 569, 740, 799, 873, 903, 929, 930, 1124, 1182, 1346, 1347, 1348, 1349, 1586, 1602, 1835, 1850]
2025-11-18 14:40:14,998 - linien_server.autolock.utils - DEBUG - start_idx + time_scale//5: 1158
2025-11-18 14:40:15,000 - linien_server.autolock.utils - DEBUG - Considered zeros (forward): [1182, 1346, 1347, 1348, 1349, 1586, 1602, 1835, 1850]
2025-11-18 14:40:15,028 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [54, 55, 62, 92, 93, 131, 132, 156, 157, 158, 159, 160, 161, 190, 191, 213, 279, 280, 354, 406, 450, 563, 569, 740, 799, 873, 903, 929, 930, 1124, 1182, 1346, 1347, 1348, 1349, 1586, 1602, 1835, 1850]
2025-11-18 14:40:15,030 - linien_server.autolock.utils - DEBUG - start_idx - time_scale//5: 1103
2025-11-18 14:40:15,031 - linien_server.autolock.utils - DEBUG - Considered zeros (backward): [54, 55, 62, 92, 93, 131, 132, 156, 157, 158, 159, 160, 161, 190, 191, 213, 279, 280, 354, 406, 450, 563, 569, 740, 799, 873, 903, 929, 930]
2025-11-18 14:40:15,060 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [54, 55, 62, 92, 93, 131, 132, 156, 157, 158, 159, 160, 161, 190, 191, 213, 279, 280, 354, 406, 450, 563, 569, 740, 799, 873, 903, 929, 930, 1124, 1182, 1346, 1347, 1348, 1349, 1586, 1602, 1835, 1850]
2025-11-18 14:40:15,061 - linien_server.autolock.utils - DEBUG - start_idx + time_scale//5: 1159
2025-11-18 14:40:15,063 - linien_server.autolock.utils - DEBUG - Considered zeros (forward): [1182, 1346, 1347, 1348, 1349, 1586, 1602, 1835, 1850]
2025-11-18 14:40:15,065 - linien_server.autolock.robust - DEBUG - Determined lock regions: [(930, 1182), (953, 1182), (1001, 1182), (992, 1182), (994, 1182)]
2025-11-18 14:40:15,067 - linien_server.autolock.robust - DEBUG - Try out tolerance 0.95
2025-11-18 14:40:15,068 - linien_server.autolock.robust - DEBUG - Original peaks: [(1128, 1226.0), (745, -1807.0), (445, 54.0), (406, -183.0), (361, 195.0)]
2025-11-18 14:40:15,069 - linien_server.autolock.robust - DEBUG - Filtered peaks: [(1128, 1164.7), (745, -1716.6499999999999), (406, -173.85), (361, 185.25)]
2025-11-18 14:40:15,071 - linien_server.autolock.robust - DEBUG - Discarded peaks: [(1128, 1226.0), (745, -1807.0), (445, 54.0), (406, -183.0), (361, 195.0)]
2025-11-18 14:40:15,072 - linien_server.autolock.robust - DEBUG - Target peak index in prepared spectrum: 1128
2025-11-18 14:40:15,074 - linien_server.autolock.robust - DEBUG - final wait time is 8 samples
2025-11-18 14:40:15,075 - linien_server.autolock.robust - DEBUG - Generated description: [(324, 185), (40, -173), (305, -1716), (344, 1164)]
2025-11-18 14:40:15,106 - linien_server.autolock.robust - DEBUG - Lock position found at index 1129 for current spectrum
2025-11-18 14:40:15,163 - linien_server.autolock.robust - DEBUG - Lock position found at index 1127 for current spectrum
2025-11-18 14:40:15,191 - linien_server.autolock.robust - DEBUG - Lock position found at index 1129 for current spectrum
2025-11-18 14:40:15,219 - linien_server.autolock.robust - DEBUG - Lock position found at index 1130 for current spectrum
2025-11-18 14:40:15,220 - linien_server.autolock.robust - DEBUG - Try out tolerance 0.9
2025-11-18 14:40:15,221 - linien_server.autolock.robust - DEBUG - Original peaks: [(1128, 1226.0), (745, -1807.0), (445, 54.0), (406, -183.0), (361, 195.0)]
2025-11-18 14:40:15,223 - linien_server.autolock.robust - DEBUG - Filtered peaks: [(1128, 1103.4), (745, -1626.3), (406, -164.70000000000002), (361, 175.5)]
2025-11-18 14:40:15,224 - linien_server.autolock.robust - DEBUG - Discarded peaks: [(1128, 1226.0), (745, -1807.0), (445, 54.0), (406, -183.0), (361, 195.0)]
2025-11-18 14:40:15,226 - linien_server.autolock.robust - DEBUG - Target peak index in prepared spectrum: 1128
2025-11-18 14:40:15,227 - linien_server.autolock.robust - DEBUG - final wait time is 11 samples
2025-11-18 14:40:15,229 - linien_server.autolock.robust - DEBUG - Generated description: [(324, 175), (40, -164), (305, -1626), (344, 1103)]
2025-11-18 14:40:15,258 - linien_server.autolock.robust - DEBUG - Lock position found at index 1129 for current spectrum
2025-11-18 14:40:15,286 - linien_server.autolock.robust - DEBUG - Lock position found at index 1126 for current spectrum
2025-11-18 14:40:15,316 - linien_server.autolock.robust - DEBUG - Lock position found at index 1127 for current spectrum
2025-11-18 14:40:15,344 - linien_server.autolock.robust - DEBUG - Lock position found at index 1129 for current spectrum
2025-11-18 14:40:15,371 - linien_server.autolock.robust - DEBUG - Lock position found at index 1130 for current spectrum
2025-11-18 14:40:15,372 - linien_server.autolock.robust - DEBUG - Description is [(324, 175), (40, -164), (305, -1626), (344, 1103)]
2025-11-18 14:40:15,374 - linien_server.autolock.robust - DEBUG - Calculation of autolock description took 0.9174072742462158
2025-11-18 14:40:15,434 - linien_server.server - ERROR - incorrect data received for lock state, ignoring!
2025-11-18 14:40:21,206 - linien_server.autolock.robust - ERROR - Waited too long for autolock! Aborting
2025-11-18 15:28:16,236 - linien_server.cli - INFO - Stopping Linien server
2025-11-18 15:28:16,350 - linien_server.cli - INFO - Stopped Linien server
2025-11-18 15:28:19,465 - linien_server.cli - DEBUG - Copied linien-server.service to /etc/systemd/system
2025-11-18 15:28:19,466 - linien_server.cli - INFO - Starting Linien server
2025-11-18 15:28:19,533 - linien_server.cli - INFO - Started Linien server
2025-11-18 15:28:36,213 - linien_server.cli - DEBUG - Copied linien-server.service to /etc/systemd/system
2025-11-18 15:28:36,215 - linien_server.cli - INFO - Starting Linien server
2025-11-18 15:28:36,261 - linien_server.parameters - INFO - Restoring parameters from /root/.local/share/linien/parameters.json
2025-11-18 15:28:36,264 - linien_server.cli - INFO - Started Linien server
2025-11-18 15:28:36,267 - linien_server.parameters - INFO - Restored parameters from /root/.local/share/linien/parameters.json
2025-11-18 15:28:36,272 - linien_common.influxdb - INFO - Saved InfluxDB credentials to /root/.local/share/linien/influxdb_credentials.json
2025-11-18 15:28:36,512 - linien_server.acquisition - INFO - Using fpgautil to deploy gateware.
2025-11-18 15:28:36,652 - linien_server.server - DEBUG - Ping  1
2025-11-18 15:28:36,695 - linien_server.mdio_tool - INFO - Disabling ethernet blinking with mdio-tool at /usr/local/lib/python3.10/dist-packages/linien_server/mdio-tool
2025-11-18 15:28:36,733 - linien_server.server - INFO - Starting server.
2025-11-18 15:28:37,659 - linien_server.server - DEBUG - Ping  2
2025-11-18 15:28:38,678 - linien_server.server - DEBUG - Ping  3
2025-11-18 15:28:38,679 - linien_server.server - DEBUG - Further pings will be suppressed
2025-11-18 15:29:23,507 - linien_server.autolock.autolock - DEBUG - Initialize Autolock
2025-11-18 15:29:23,524 - linien_server.autolock.autolock - DEBUG - Start the autolock
2025-11-18 15:29:23,526 - linien_server.autolock.autolock - DEBUG - (x0, x1) = (1100,1400)
2025-11-18 15:29:23,533 - linien_server.autolock.autolock - DEBUG - Start autolock with mode 1
2025-11-18 15:29:23,913 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-18 15:29:23,916 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-18 15:29:23,918 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-18 15:29:24,016 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-18 15:29:24,044 - linien_server.autolock.robust - ERROR - Not enough spectra collected:2 of 5
2025-11-18 15:29:24,295 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-18 15:29:24,297 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-18 15:29:24,300 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-18 15:29:24,397 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-18 15:29:24,425 - linien_server.autolock.robust - ERROR - Not enough spectra collected:3 of 5
2025-11-18 15:29:24,700 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-18 15:29:24,702 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-18 15:29:24,704 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-18 15:29:24,800 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-18 15:29:24,827 - linien_server.autolock.robust - ERROR - Not enough spectra collected:4 of 5
2025-11-18 15:29:25,029 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-18 15:29:25,032 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-18 15:29:25,033 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-18 15:29:25,129 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-18 15:29:25,157 - linien_server.autolock.robust - DEBUG - enough spectra!, calculate
2025-11-18 15:29:25,158 - linien_server.autolock.robust - DEBUG - Entered in calculate_autolock_instructions_v2
2025-11-18 15:29:25,164 - linien_server.autolock.robust - DEBUG - Saved new robust_spectra.npy and target_idxs.npy
2025-11-18 15:29:25,165 - linien_server.autolock.utils - DEBUG - Entered in crop_spectra_to_same_view
2025-11-18 15:29:25,297 - linien_server.autolock.utils - DEBUG - Shifts calculated for cropping: [1, -3, -4, 1, 0]
2025-11-18 15:29:25,301 - linien_server.autolock.robust - DEBUG - Saved new robust_spectra_cropped.npy
2025-11-18 15:29:25,302 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-18 15:29:25,303 - linien_server.autolock.utils - DEBUG - Spectrum length:2043
2025-11-18 15:29:25,306 - linien_server.autolock.utils - DEBUG - Spectrum: [66 66 66 66 66]...[77 77 76 76 76]
2025-11-18 15:29:25,307 - linien_server.autolock.utils - DEBUG - Target indices: [1251, 1287]
2025-11-18 15:29:25,309 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-18 15:29:25,310 - linien_server.autolock.utils - DEBUG - Spectrum length:2043
2025-11-18 15:29:25,313 - linien_server.autolock.utils - DEBUG - Spectrum: [65 66 66 66 66]...[76 76 75 76 76]
2025-11-18 15:29:25,314 - linien_server.autolock.utils - DEBUG - Target indices: [1251, 1287]
2025-11-18 15:29:25,315 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-18 15:29:25,316 - linien_server.autolock.utils - DEBUG - Spectrum length:2043
2025-11-18 15:29:25,319 - linien_server.autolock.utils - DEBUG - Spectrum: [61 66 66 66 66]...[75 75 75 75 75]
2025-11-18 15:29:25,320 - linien_server.autolock.utils - DEBUG - Target indices: [1251, 1287]
2025-11-18 15:29:25,321 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-18 15:29:25,322 - linien_server.autolock.utils - DEBUG - Spectrum length:2043
2025-11-18 15:29:25,325 - linien_server.autolock.utils - DEBUG - Spectrum: [65 65 65 65 66]...[76 76 76 76 76]
2025-11-18 15:29:25,326 - linien_server.autolock.utils - DEBUG - Target indices: [1251, 1287]
2025-11-18 15:29:25,328 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-18 15:29:25,329 - linien_server.autolock.utils - DEBUG - Spectrum length:2043
2025-11-18 15:29:25,331 - linien_server.autolock.utils - DEBUG - Spectrum: [65 66 66 65 65]...[76 75 75 75 75]
2025-11-18 15:29:25,333 - linien_server.autolock.utils - DEBUG - Target indices: [1251, 1287]
2025-11-18 15:29:25,334 - linien_server.autolock.robust - DEBUG - x scale is 28
2025-11-18 15:29:25,388 - linien_server.autolock.robust - DEBUG - shift prepared spectrum by 7 samples to the left to match the original spectrum
2025-11-18 15:29:25,475 - linien_server.autolock.robust - DEBUG - Detected peaks with (position, height): [(1259, 2555)]
2025-11-18 15:29:25,500 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [40, 42, 43, 63, 64, 65, 66, 68, 69, 90, 91, 93, 94, 95, 96, 98, 99, 100, 101, 102, 103, 166, 167, 202, 208, 209, 218, 219, 246, 247, 295, 302, 303, 336, 367, 368, 408, 409, 433, 465, 466, 491, 492, 540, 594, 634, 667, 714, 747, 748, 920, 968, 1035, 1036, 1037, 1038, 1088, 1136, 1137, 1155, 1156, 1258, 1305, 1491, 1492, 1499, 1500, 1501, 1502, 1555, 1556, 1575, 1615, 1620, 1621, 1622, 1681, 1682, 1687, 1741, 1760, 1761, 1811, 1812, 1813, 1862, 1863, 1887, 1933, 1934, 1935, 1936, 1937, 1938, 1939, 1940, 1941, 1988, 1989, 2012]
2025-11-18 15:29:25,501 - linien_server.autolock.utils - DEBUG - start_idx - time_scale//5: 1246
2025-11-18 15:29:25,503 - linien_server.autolock.utils - DEBUG - Considered zeros (backward): [40, 42, 43, 63, 64, 65, 66, 68, 69, 90, 91, 93, 94, 95, 96, 98, 99, 100, 101, 102, 103, 166, 167, 202, 208, 209, 218, 219, 246, 247, 295, 302, 303, 336, 367, 368, 408, 409, 433, 465, 466, 491, 492, 540, 594, 634, 667, 714, 747, 748, 920, 968, 1035, 1036, 1037, 1038, 1088, 1136, 1137, 1155, 1156]
2025-11-18 15:29:25,549 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [40, 42, 43, 63, 64, 65, 66, 68, 69, 90, 91, 93, 94, 95, 96, 98, 99, 100, 101, 102, 103, 166, 167, 202, 208, 209, 218, 219, 246, 247, 295, 302, 303, 336, 367, 368, 408, 409, 433, 465, 466, 491, 492, 540, 594, 634, 667, 714, 747, 748, 920, 968, 1035, 1036, 1037, 1038, 1088, 1136, 1137, 1155, 1156, 1258, 1305, 1491, 1492, 1499, 1500, 1501, 1502, 1555, 1556, 1575, 1615, 1620, 1621, 1622, 1681, 1682, 1687, 1741, 1760, 1761, 1811, 1812, 1813, 1862, 1863, 1887, 1933, 1934, 1935, 1936, 1937, 1938, 1939, 1940, 1941, 1988, 1989, 2012]
2025-11-18 15:29:25,551 - linien_server.autolock.utils - DEBUG - start_idx + time_scale//5: 1291
2025-11-18 15:29:25,553 - linien_server.autolock.utils - DEBUG - Considered zeros (forward): [1305, 1491, 1492, 1499, 1500, 1501, 1502, 1555, 1556, 1575, 1615, 1620, 1621, 1622, 1681, 1682, 1687, 1741, 1760, 1761, 1811, 1812, 1813, 1862, 1863, 1887, 1933, 1934, 1935, 1936, 1937, 1938, 1939, 1940, 1941, 1988, 1989, 2012]
2025-11-18 15:29:25,627 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [40, 42, 43, 63, 64, 65, 66, 68, 69, 90, 91, 93, 94, 95, 96, 98, 99, 100, 101, 102, 103, 166, 167, 202, 208, 209, 218, 219, 246, 247, 295, 302, 303, 336, 367, 368, 408, 409, 433, 465, 466, 491, 492, 540, 594, 634, 667, 714, 747, 748, 920, 968, 1035, 1036, 1037, 1038, 1088, 1136, 1137, 1155, 1156, 1258, 1305, 1491, 1492, 1499, 1500, 1501, 1502, 1555, 1556, 1575, 1615, 1620, 1621, 1622, 1681, 1682, 1687, 1741, 1760, 1761, 1811, 1812, 1813, 1862, 1863, 1887, 1933, 1934, 1935, 1936, 1937, 1938, 1939, 1940, 1941, 1988, 1989, 2012]
2025-11-18 15:29:25,630 - linien_server.autolock.utils - DEBUG - start_idx - time_scale//5: 1246
2025-11-18 15:29:25,632 - linien_server.autolock.utils - DEBUG - Considered zeros (backward): [40, 42, 43, 63, 64, 65, 66, 68, 69, 90, 91, 93, 94, 95, 96, 98, 99, 100, 101, 102, 103, 166, 167, 202, 208, 209, 218, 219, 246, 247, 295, 302, 303, 336, 367, 368, 408, 409, 433, 465, 466, 491, 492, 540, 594, 634, 667, 714, 747, 748, 920, 968, 1035, 1036, 1037, 1038, 1088, 1136, 1137, 1155, 1156]
2025-11-18 15:29:25,683 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [40, 42, 43, 63, 64, 65, 66, 68, 69, 90, 91, 93, 94, 95, 96, 98, 99, 100, 101, 102, 103, 166, 167, 202, 208, 209, 218, 219, 246, 247, 295, 302, 303, 336, 367, 368, 408, 409, 433, 465, 466, 491, 492, 540, 594, 634, 667, 714, 747, 748, 920, 968, 1035, 1036, 1037, 1038, 1088, 1136, 1137, 1155, 1156, 1258, 1305, 1491, 1492, 1499, 1500, 1501, 1502, 1555, 1556, 1575, 1615, 1620, 1621, 1622, 1681, 1682, 1687, 1741, 1760, 1761, 1811, 1812, 1813, 1862, 1863, 1887, 1933, 1934, 1935, 1936, 1937, 1938, 1939, 1940, 1941, 1988, 1989, 2012]
2025-11-18 15:29:25,684 - linien_server.autolock.utils - DEBUG - start_idx + time_scale//5: 1286
2025-11-18 15:29:25,686 - linien_server.autolock.utils - DEBUG - Considered zeros (forward): [1305, 1491, 1492, 1499, 1500, 1501, 1502, 1555, 1556, 1575, 1615, 1620, 1621, 1622, 1681, 1682, 1687, 1741, 1760, 1761, 1811, 1812, 1813, 1862, 1863, 1887, 1933, 1934, 1935, 1936, 1937, 1938, 1939, 1940, 1941, 1988, 1989, 2012]
2025-11-18 15:29:25,728 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [40, 42, 43, 63, 64, 65, 66, 68, 69, 90, 91, 93, 94, 95, 96, 98, 99, 100, 101, 102, 103, 166, 167, 202, 208, 209, 218, 219, 246, 247, 295, 302, 303, 336, 367, 368, 408, 409, 433, 465, 466, 491, 492, 540, 594, 634, 667, 714, 747, 748, 920, 968, 1035, 1036, 1037, 1038, 1088, 1136, 1137, 1155, 1156, 1258, 1305, 1491, 1492, 1499, 1500, 1501, 1502, 1555, 1556, 1575, 1615, 1620, 1621, 1622, 1681, 1682, 1687, 1741, 1760, 1761, 1811, 1812, 1813, 1862, 1863, 1887, 1933, 1934, 1935, 1936, 1937, 1938, 1939, 1940, 1941, 1988, 1989, 2012]
2025-11-18 15:29:25,730 - linien_server.autolock.utils - DEBUG - start_idx - time_scale//5: 1246
2025-11-18 15:29:25,733 - linien_server.autolock.utils - DEBUG - Considered zeros (backward): [40, 42, 43, 63, 64, 65, 66, 68, 69, 90, 91, 93, 94, 95, 96, 98, 99, 100, 101, 102, 103, 166, 167, 202, 208, 209, 218, 219, 246, 247, 295, 302, 303, 336, 367, 368, 408, 409, 433, 465, 466, 491, 492, 540, 594, 634, 667, 714, 747, 748, 920, 968, 1035, 1036, 1037, 1038, 1088, 1136, 1137, 1155, 1156]
2025-11-18 15:29:25,784 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [40, 42, 43, 63, 64, 65, 66, 68, 69, 90, 91, 93, 94, 95, 96, 98, 99, 100, 101, 102, 103, 166, 167, 202, 208, 209, 218, 219, 246, 247, 295, 302, 303, 336, 367, 368, 408, 409, 433, 465, 466, 491, 492, 540, 594, 634, 667, 714, 747, 748, 920, 968, 1035, 1036, 1037, 1038, 1088, 1136, 1137, 1155, 1156, 1258, 1305, 1491, 1492, 1499, 1500, 1501, 1502, 1555, 1556, 1575, 1615, 1620, 1621, 1622, 1681, 1682, 1687, 1741, 1760, 1761, 1811, 1812, 1813, 1862, 1863, 1887, 1933, 1934, 1935, 1936, 1937, 1938, 1939, 1940, 1941, 1988, 1989, 2012]
2025-11-18 15:29:25,786 - linien_server.autolock.utils - DEBUG - start_idx + time_scale//5: 1282
2025-11-18 15:29:25,788 - linien_server.autolock.utils - DEBUG - Considered zeros (forward): [1305, 1491, 1492, 1499, 1500, 1501, 1502, 1555, 1556, 1575, 1615, 1620, 1621, 1622, 1681, 1682, 1687, 1741, 1760, 1761, 1811, 1812, 1813, 1862, 1863, 1887, 1933, 1934, 1935, 1936, 1937, 1938, 1939, 1940, 1941, 1988, 1989, 2012]
2025-11-18 15:29:25,828 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [40, 42, 43, 63, 64, 65, 66, 68, 69, 90, 91, 93, 94, 95, 96, 98, 99, 100, 101, 102, 103, 166, 167, 202, 208, 209, 218, 219, 246, 247, 295, 302, 303, 336, 367, 368, 408, 409, 433, 465, 466, 491, 492, 540, 594, 634, 667, 714, 747, 748, 920, 968, 1035, 1036, 1037, 1038, 1088, 1136, 1137, 1155, 1156, 1258, 1305, 1491, 1492, 1499, 1500, 1501, 1502, 1555, 1556, 1575, 1615, 1620, 1621, 1622, 1681, 1682, 1687, 1741, 1760, 1761, 1811, 1812, 1813, 1862, 1863, 1887, 1933, 1934, 1935, 1936, 1937, 1938, 1939, 1940, 1941, 1988, 1989, 2012]
2025-11-18 15:29:25,830 - linien_server.autolock.utils - DEBUG - start_idx - time_scale//5: 1246
2025-11-18 15:29:25,832 - linien_server.autolock.utils - DEBUG - Considered zeros (backward): [40, 42, 43, 63, 64, 65, 66, 68, 69, 90, 91, 93, 94, 95, 96, 98, 99, 100, 101, 102, 103, 166, 167, 202, 208, 209, 218, 219, 246, 247, 295, 302, 303, 336, 367, 368, 408, 409, 433, 465, 466, 491, 492, 540, 594, 634, 667, 714, 747, 748, 920, 968, 1035, 1036, 1037, 1038, 1088, 1136, 1137, 1155, 1156]
2025-11-18 15:29:25,883 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [40, 42, 43, 63, 64, 65, 66, 68, 69, 90, 91, 93, 94, 95, 96, 98, 99, 100, 101, 102, 103, 166, 167, 202, 208, 209, 218, 219, 246, 247, 295, 302, 303, 336, 367, 368, 408, 409, 433, 465, 466, 491, 492, 540, 594, 634, 667, 714, 747, 748, 920, 968, 1035, 1036, 1037, 1038, 1088, 1136, 1137, 1155, 1156, 1258, 1305, 1491, 1492, 1499, 1500, 1501, 1502, 1555, 1556, 1575, 1615, 1620, 1621, 1622, 1681, 1682, 1687, 1741, 1760, 1761, 1811, 1812, 1813, 1862, 1863, 1887, 1933, 1934, 1935, 1936, 1937, 1938, 1939, 1940, 1941, 1988, 1989, 2012]
2025-11-18 15:29:25,884 - linien_server.autolock.utils - DEBUG - start_idx + time_scale//5: 1281
2025-11-18 15:29:25,886 - linien_server.autolock.utils - DEBUG - Considered zeros (forward): [1305, 1491, 1492, 1499, 1500, 1501, 1502, 1555, 1556, 1575, 1615, 1620, 1621, 1622, 1681, 1682, 1687, 1741, 1760, 1761, 1811, 1812, 1813, 1862, 1863, 1887, 1933, 1934, 1935, 1936, 1937, 1938, 1939, 1940, 1941, 1988, 1989, 2012]
2025-11-18 15:29:25,927 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [40, 42, 43, 63, 64, 65, 66, 68, 69, 90, 91, 93, 94, 95, 96, 98, 99, 100, 101, 102, 103, 166, 167, 202, 208, 209, 218, 219, 246, 247, 295, 302, 303, 336, 367, 368, 408, 409, 433, 465, 466, 491, 492, 540, 594, 634, 667, 714, 747, 748, 920, 968, 1035, 1036, 1037, 1038, 1088, 1136, 1137, 1155, 1156, 1258, 1305, 1491, 1492, 1499, 1500, 1501, 1502, 1555, 1556, 1575, 1615, 1620, 1621, 1622, 1681, 1682, 1687, 1741, 1760, 1761, 1811, 1812, 1813, 1862, 1863, 1887, 1933, 1934, 1935, 1936, 1937, 1938, 1939, 1940, 1941, 1988, 1989, 2012]
2025-11-18 15:29:25,929 - linien_server.autolock.utils - DEBUG - start_idx - time_scale//5: 1246
2025-11-18 15:29:25,931 - linien_server.autolock.utils - DEBUG - Considered zeros (backward): [40, 42, 43, 63, 64, 65, 66, 68, 69, 90, 91, 93, 94, 95, 96, 98, 99, 100, 101, 102, 103, 166, 167, 202, 208, 209, 218, 219, 246, 247, 295, 302, 303, 336, 367, 368, 408, 409, 433, 465, 466, 491, 492, 540, 594, 634, 667, 714, 747, 748, 920, 968, 1035, 1036, 1037, 1038, 1088, 1136, 1137, 1155, 1156]
2025-11-18 15:29:25,981 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [40, 42, 43, 63, 64, 65, 66, 68, 69, 90, 91, 93, 94, 95, 96, 98, 99, 100, 101, 102, 103, 166, 167, 202, 208, 209, 218, 219, 246, 247, 295, 302, 303, 336, 367, 368, 408, 409, 433, 465, 466, 491, 492, 540, 594, 634, 667, 714, 747, 748, 920, 968, 1035, 1036, 1037, 1038, 1088, 1136, 1137, 1155, 1156, 1258, 1305, 1491, 1492, 1499, 1500, 1501, 1502, 1555, 1556, 1575, 1615, 1620, 1621, 1622, 1681, 1682, 1687, 1741, 1760, 1761, 1811, 1812, 1813, 1862, 1863, 1887, 1933, 1934, 1935, 1936, 1937, 1938, 1939, 1940, 1941, 1988, 1989, 2012]
2025-11-18 15:29:25,982 - linien_server.autolock.utils - DEBUG - start_idx + time_scale//5: 1282
2025-11-18 15:29:25,984 - linien_server.autolock.utils - DEBUG - Considered zeros (forward): [1305, 1491, 1492, 1499, 1500, 1501, 1502, 1555, 1556, 1575, 1615, 1620, 1621, 1622, 1681, 1682, 1687, 1741, 1760, 1761, 1811, 1812, 1813, 1862, 1863, 1887, 1933, 1934, 1935, 1936, 1937, 1938, 1939, 1940, 1941, 1988, 1989, 2012]
2025-11-18 15:29:26,001 - linien_server.autolock.robust - DEBUG - Determined lock regions: [(1156, 1305), (1156, 1305), (1156, 1305), (1156, 1305), (1156, 1305)]
2025-11-18 15:29:26,002 - linien_server.autolock.robust - DEBUG - Try out tolerance 0.95
2025-11-18 15:29:26,003 - linien_server.autolock.robust - DEBUG - Original peaks: [(1259, 2555)]
2025-11-18 15:29:26,004 - linien_server.autolock.robust - DEBUG - Filtered peaks: [(1259, 2427.25)]
2025-11-18 15:29:26,005 - linien_server.autolock.robust - DEBUG - Discarded peaks: [(1259, 2555)]
2025-11-18 15:29:26,007 - linien_server.autolock.robust - DEBUG - Target peak index in prepared spectrum: 1259
2025-11-18 15:29:26,009 - linien_server.autolock.robust - DEBUG - final wait time is 10 samples
2025-11-18 15:29:26,011 - linien_server.autolock.robust - DEBUG - Generated description: [(1133, 2427)]
2025-11-18 15:29:26,044 - linien_server.autolock.robust - DEBUG - Lock position found at index 1260 for current spectrum
2025-11-18 15:29:26,076 - linien_server.autolock.robust - DEBUG - Lock position found at index 1256 for current spectrum
2025-11-18 15:29:26,105 - linien_server.autolock.robust - DEBUG - Lock position found at index 1252 for current spectrum
2025-11-18 15:29:26,134 - linien_server.autolock.robust - DEBUG - Lock position found at index 1256 for current spectrum
2025-11-18 15:29:26,162 - linien_server.autolock.robust - DEBUG - Lock position found at index 1253 for current spectrum
2025-11-18 15:29:26,164 - linien_server.autolock.robust - DEBUG - Description is [(1133, 2427)]
2025-11-18 15:29:26,165 - linien_server.autolock.robust - DEBUG - Calculation of autolock description took 1.0068373680114746
2025-11-18 15:29:26,225 - linien_server.server - ERROR - incorrect data received for lock state, ignoring!
2025-11-18 15:29:26,786 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-18 15:29:26,789 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-18 15:29:26,791 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-18 15:29:26,792 - linien_server.autolock.autolock - DEBUG - after lock
2025-11-18 15:37:39,916 - linien_server.autolock.autolock - DEBUG - Initialize Autolock
2025-11-18 15:37:39,926 - linien_server.autolock.autolock - DEBUG - Start the autolock
2025-11-18 15:37:39,930 - linien_server.autolock.autolock - DEBUG - (x0, x1) = (1000,1350)
2025-11-18 15:37:39,937 - linien_server.autolock.autolock - DEBUG - Start autolock with mode 1
2025-11-18 15:37:40,323 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-18 15:37:40,326 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-18 15:37:40,328 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-18 15:37:40,429 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-18 15:37:40,458 - linien_server.autolock.robust - ERROR - Not enough spectra collected:2 of 5
2025-11-18 15:37:40,710 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-18 15:37:40,712 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-18 15:37:40,713 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-18 15:37:40,809 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-18 15:37:40,837 - linien_server.autolock.robust - ERROR - Not enough spectra collected:3 of 5
2025-11-18 15:37:41,162 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-18 15:37:41,166 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-18 15:37:41,169 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-18 15:37:41,266 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-18 15:37:41,294 - linien_server.autolock.robust - ERROR - Not enough spectra collected:4 of 5
2025-11-18 15:37:41,561 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-18 15:37:41,564 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-18 15:37:41,566 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-18 15:37:41,662 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-18 15:37:41,690 - linien_server.autolock.robust - DEBUG - enough spectra!, calculate
2025-11-18 15:37:41,691 - linien_server.autolock.robust - DEBUG - Entered in calculate_autolock_instructions_v2
2025-11-18 15:37:41,697 - linien_server.autolock.robust - DEBUG - Saved new robust_spectra.npy and target_idxs.npy
2025-11-18 15:37:41,698 - linien_server.autolock.utils - DEBUG - Entered in crop_spectra_to_same_view
2025-11-18 15:37:41,830 - linien_server.autolock.utils - DEBUG - Shifts calculated for cropping: [1, -1, -7, -7, -6]
2025-11-18 15:37:41,834 - linien_server.autolock.robust - DEBUG - Saved new robust_spectra_cropped.npy
2025-11-18 15:37:41,835 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-18 15:37:41,836 - linien_server.autolock.utils - DEBUG - Spectrum length:2040
2025-11-18 15:37:41,840 - linien_server.autolock.utils - DEBUG - Spectrum: [0 1 1 0 0]...[11 11 11 11 11]
2025-11-18 15:37:41,841 - linien_server.autolock.utils - DEBUG - Target indices: [1203, 1238]
2025-11-18 15:37:41,842 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-18 15:37:41,843 - linien_server.autolock.utils - DEBUG - Spectrum length:2040
2025-11-18 15:37:41,846 - linien_server.autolock.utils - DEBUG - Spectrum: [0 0 0 0 0]...[11 11 11 11 11]
2025-11-18 15:37:41,847 - linien_server.autolock.utils - DEBUG - Target indices: [1203, 1238]
2025-11-18 15:37:41,848 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-18 15:37:41,849 - linien_server.autolock.utils - DEBUG - Spectrum length:2040
2025-11-18 15:37:41,852 - linien_server.autolock.utils - DEBUG - Spectrum: [-6  0  0  0  0]...[11 11 11 11 11]
2025-11-18 15:37:41,853 - linien_server.autolock.utils - DEBUG - Target indices: [1203, 1238]
2025-11-18 15:37:41,854 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-18 15:37:41,855 - linien_server.autolock.utils - DEBUG - Spectrum length:2040
2025-11-18 15:37:41,858 - linien_server.autolock.utils - DEBUG - Spectrum: [-7 -1 -1 -1 -1]...[10 10 10 10 10]
2025-11-18 15:37:41,859 - linien_server.autolock.utils - DEBUG - Target indices: [1203, 1238]
2025-11-18 15:37:41,861 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-18 15:37:41,862 - linien_server.autolock.utils - DEBUG - Spectrum length:2040
2025-11-18 15:37:41,864 - linien_server.autolock.utils - DEBUG - Spectrum: [-1 -1 -2 -2 -2]...[10 10 10 10 10]
2025-11-18 15:37:41,866 - linien_server.autolock.utils - DEBUG - Target indices: [1203, 1238]
2025-11-18 15:37:41,867 - linien_server.autolock.robust - DEBUG - x scale is 33
2025-11-18 15:37:41,920 - linien_server.autolock.robust - DEBUG - shift prepared spectrum by 15 samples to the left to match the original spectrum
2025-11-18 15:37:42,003 - linien_server.autolock.robust - DEBUG - Detected peaks with (position, height): [(1218, 725), (1114, -341), (926, 646), (880, -1721), (92, 3), (64, -32), (30, 9), (0, 0)]
2025-11-18 15:37:42,033 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [18, 58, 88, 89, 124, 146, 183, 216, 314, 342, 377, 378, 379, 381, 382, 487, 488, 517, 518, 539, 540, 556, 600, 635, 724, 742, 878, 929, 990, 1019, 1020, 1111, 1214, 1264, 1574, 1575, 1597, 1823, 1824, 1842, 1843, 1952, 1953, 1963, 1964, 2008, 2019]
2025-11-18 15:37:42,034 - linien_server.autolock.utils - DEBUG - start_idx - time_scale//5: 1197
2025-11-18 15:37:42,036 - linien_server.autolock.utils - DEBUG - Considered zeros (backward): [18, 58, 88, 89, 124, 146, 183, 216, 314, 342, 377, 378, 379, 381, 382, 487, 488, 517, 518, 539, 540, 556, 600, 635, 724, 742, 878, 929, 990, 1019, 1020, 1111]
2025-11-18 15:37:42,064 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [18, 58, 88, 89, 124, 146, 183, 216, 314, 342, 377, 378, 379, 381, 382, 487, 488, 517, 518, 539, 540, 556, 600, 635, 724, 742, 878, 929, 990, 1019, 1020, 1111, 1214, 1264, 1574, 1575, 1597, 1823, 1824, 1842, 1843, 1952, 1953, 1963, 1964, 2008, 2019]
2025-11-18 15:37:42,065 - linien_server.autolock.utils - DEBUG - start_idx + time_scale//5: 1243
2025-11-18 15:37:42,066 - linien_server.autolock.utils - DEBUG - Considered zeros (forward): [1264, 1574, 1575, 1597, 1823, 1824, 1842, 1843, 1952, 1953, 1963, 1964, 2008, 2019]
2025-11-18 15:37:42,111 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [18, 58, 88, 89, 124, 146, 183, 216, 314, 342, 377, 378, 379, 381, 382, 487, 488, 517, 518, 539, 540, 556, 600, 635, 724, 742, 878, 929, 990, 1019, 1020, 1111, 1214, 1264, 1574, 1575, 1597, 1823, 1824, 1842, 1843, 1952, 1953, 1963, 1964, 2008, 2019]
2025-11-18 15:37:42,112 - linien_server.autolock.utils - DEBUG - start_idx - time_scale//5: 1200
2025-11-18 15:37:42,114 - linien_server.autolock.utils - DEBUG - Considered zeros (backward): [18, 58, 88, 89, 124, 146, 183, 216, 314, 342, 377, 378, 379, 381, 382, 487, 488, 517, 518, 539, 540, 556, 600, 635, 724, 742, 878, 929, 990, 1019, 1020, 1111]
2025-11-18 15:37:42,140 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [18, 58, 88, 89, 124, 146, 183, 216, 314, 342, 377, 378, 379, 381, 382, 487, 488, 517, 518, 539, 540, 556, 600, 635, 724, 742, 878, 929, 990, 1019, 1020, 1111, 1214, 1264, 1574, 1575, 1597, 1823, 1824, 1842, 1843, 1952, 1953, 1963, 1964, 2008, 2019]
2025-11-18 15:37:42,141 - linien_server.autolock.utils - DEBUG - start_idx + time_scale//5: 1243
2025-11-18 15:37:42,143 - linien_server.autolock.utils - DEBUG - Considered zeros (forward): [1264, 1574, 1575, 1597, 1823, 1824, 1842, 1843, 1952, 1953, 1963, 1964, 2008, 2019]
2025-11-18 15:37:42,176 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [18, 58, 88, 89, 124, 146, 183, 216, 314, 342, 377, 378, 379, 381, 382, 487, 488, 517, 518, 539, 540, 556, 600, 635, 724, 742, 878, 929, 990, 1019, 1020, 1111, 1214, 1264, 1574, 1575, 1597, 1823, 1824, 1842, 1843, 1952, 1953, 1963, 1964, 2008, 2019]
2025-11-18 15:37:42,177 - linien_server.autolock.utils - DEBUG - start_idx - time_scale//5: 1200
2025-11-18 15:37:42,179 - linien_server.autolock.utils - DEBUG - Considered zeros (backward): [18, 58, 88, 89, 124, 146, 183, 216, 314, 342, 377, 378, 379, 381, 382, 487, 488, 517, 518, 539, 540, 556, 600, 635, 724, 742, 878, 929, 990, 1019, 1020, 1111]
2025-11-18 15:37:42,205 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [18, 58, 88, 89, 124, 146, 183, 216, 314, 342, 377, 378, 379, 381, 382, 487, 488, 517, 518, 539, 540, 556, 600, 635, 724, 742, 878, 929, 990, 1019, 1020, 1111, 1214, 1264, 1574, 1575, 1597, 1823, 1824, 1842, 1843, 1952, 1953, 1963, 1964, 2008, 2019]
2025-11-18 15:37:42,206 - linien_server.autolock.utils - DEBUG - start_idx + time_scale//5: 1243
2025-11-18 15:37:42,208 - linien_server.autolock.utils - DEBUG - Considered zeros (forward): [1264, 1574, 1575, 1597, 1823, 1824, 1842, 1843, 1952, 1953, 1963, 1964, 2008, 2019]
2025-11-18 15:37:42,243 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [18, 58, 88, 89, 124, 146, 183, 216, 314, 342, 377, 378, 379, 381, 382, 487, 488, 517, 518, 539, 540, 556, 600, 635, 724, 742, 878, 929, 990, 1019, 1020, 1111, 1214, 1264, 1574, 1575, 1597, 1823, 1824, 1842, 1843, 1952, 1953, 1963, 1964, 2008, 2019]
2025-11-18 15:37:42,245 - linien_server.autolock.utils - DEBUG - start_idx - time_scale//5: 1197
2025-11-18 15:37:42,248 - linien_server.autolock.utils - DEBUG - Considered zeros (backward): [18, 58, 88, 89, 124, 146, 183, 216, 314, 342, 377, 378, 379, 381, 382, 487, 488, 517, 518, 539, 540, 556, 600, 635, 724, 742, 878, 929, 990, 1019, 1020, 1111]
2025-11-18 15:37:42,276 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [18, 58, 88, 89, 124, 146, 183, 216, 314, 342, 377, 378, 379, 381, 382, 487, 488, 517, 518, 539, 540, 556, 600, 635, 724, 742, 878, 929, 990, 1019, 1020, 1111, 1214, 1264, 1574, 1575, 1597, 1823, 1824, 1842, 1843, 1952, 1953, 1963, 1964, 2008, 2019]
2025-11-18 15:37:42,278 - linien_server.autolock.utils - DEBUG - start_idx + time_scale//5: 1243
2025-11-18 15:37:42,279 - linien_server.autolock.utils - DEBUG - Considered zeros (forward): [1264, 1574, 1575, 1597, 1823, 1824, 1842, 1843, 1952, 1953, 1963, 1964, 2008, 2019]
2025-11-18 15:37:42,313 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [18, 58, 88, 89, 124, 146, 183, 216, 314, 342, 377, 378, 379, 381, 382, 487, 488, 517, 518, 539, 540, 556, 600, 635, 724, 742, 878, 929, 990, 1019, 1020, 1111, 1214, 1264, 1574, 1575, 1597, 1823, 1824, 1842, 1843, 1952, 1953, 1963, 1964, 2008, 2019]
2025-11-18 15:37:42,314 - linien_server.autolock.utils - DEBUG - start_idx - time_scale//5: 1198
2025-11-18 15:37:42,316 - linien_server.autolock.utils - DEBUG - Considered zeros (backward): [18, 58, 88, 89, 124, 146, 183, 216, 314, 342, 377, 378, 379, 381, 382, 487, 488, 517, 518, 539, 540, 556, 600, 635, 724, 742, 878, 929, 990, 1019, 1020, 1111]
2025-11-18 15:37:42,342 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [18, 58, 88, 89, 124, 146, 183, 216, 314, 342, 377, 378, 379, 381, 382, 487, 488, 517, 518, 539, 540, 556, 600, 635, 724, 742, 878, 929, 990, 1019, 1020, 1111, 1214, 1264, 1574, 1575, 1597, 1823, 1824, 1842, 1843, 1952, 1953, 1963, 1964, 2008, 2019]
2025-11-18 15:37:42,343 - linien_server.autolock.utils - DEBUG - start_idx + time_scale//5: 1243
2025-11-18 15:37:42,344 - linien_server.autolock.utils - DEBUG - Considered zeros (forward): [1264, 1574, 1575, 1597, 1823, 1824, 1842, 1843, 1952, 1953, 1963, 1964, 2008, 2019]
2025-11-18 15:37:42,354 - linien_server.autolock.robust - DEBUG - Determined lock regions: [(1168, 1264), (1169, 1264), (1169, 1264), (1170, 1264), (1172, 1264)]
2025-11-18 15:37:42,355 - linien_server.autolock.robust - DEBUG - Try out tolerance 0.95
2025-11-18 15:37:42,358 - linien_server.autolock.robust - DEBUG - Original peaks: [(1218, 725), (1114, -341), (926, 646), (880, -1721), (92, 3), (64, -32), (30, 9), (0, 0)]
2025-11-18 15:37:42,359 - linien_server.autolock.robust - DEBUG - Filtered peaks: [(1218, 688.75), (1114, -323.95), (926, 613.6999999999999), (880, -1634.9499999999998)]
2025-11-18 15:37:42,361 - linien_server.autolock.robust - DEBUG - Discarded peaks: [(1218, 725), (1114, -341), (926, 646), (880, -1721), (92, 3), (64, -32), (30, 9), (0, 0)]
2025-11-18 15:37:42,362 - linien_server.autolock.robust - DEBUG - Target peak index in prepared spectrum: 1218
2025-11-18 15:37:42,364 - linien_server.autolock.robust - DEBUG - final wait time is 8 samples
2025-11-18 15:37:42,366 - linien_server.autolock.robust - DEBUG - Generated description: [(792, -1634), (41, 613), (169, -323), (93, 688)]
2025-11-18 15:37:42,398 - linien_server.autolock.robust - DEBUG - Lock position found at index 1218 for current spectrum
2025-11-18 15:37:42,426 - linien_server.autolock.robust - DEBUG - Lock position found at index 1222 for current spectrum
2025-11-18 15:37:42,455 - linien_server.autolock.robust - DEBUG - Lock position found at index 1221 for current spectrum
2025-11-18 15:37:42,518 - linien_server.autolock.robust - DEBUG - Lock position found at index 1220 for current spectrum
2025-11-18 15:37:42,519 - linien_server.autolock.robust - DEBUG - Try out tolerance 0.9
2025-11-18 15:37:42,521 - linien_server.autolock.robust - DEBUG - Original peaks: [(1218, 725), (1114, -341), (926, 646), (880, -1721), (92, 3), (64, -32), (30, 9), (0, 0)]
2025-11-18 15:37:42,523 - linien_server.autolock.robust - DEBUG - Filtered peaks: [(1218, 652.5), (1114, -306.90000000000003), (926, 581.4), (880, -1548.9)]
2025-11-18 15:37:42,524 - linien_server.autolock.robust - DEBUG - Discarded peaks: [(1218, 725), (1114, -341), (926, 646), (880, -1721), (92, 3), (64, -32), (30, 9), (0, 0)]
2025-11-18 15:37:42,526 - linien_server.autolock.robust - DEBUG - Target peak index in prepared spectrum: 1218
2025-11-18 15:37:42,528 - linien_server.autolock.robust - DEBUG - final wait time is 10 samples
2025-11-18 15:37:42,530 - linien_server.autolock.robust - DEBUG - Generated description: [(792, -1548), (41, 581), (169, -306), (93, 652)]
2025-11-18 15:37:42,562 - linien_server.autolock.robust - DEBUG - Lock position found at index 1219 for current spectrum
2025-11-18 15:37:42,591 - linien_server.autolock.robust - DEBUG - Lock position found at index 1222 for current spectrum
2025-11-18 15:37:42,621 - linien_server.autolock.robust - DEBUG - Lock position found at index 1221 for current spectrum
2025-11-18 15:37:42,652 - linien_server.autolock.robust - DEBUG - Lock position found at index 1220 for current spectrum
2025-11-18 15:37:42,680 - linien_server.autolock.robust - DEBUG - Lock position found at index 1221 for current spectrum
2025-11-18 15:37:42,681 - linien_server.autolock.robust - DEBUG - Description is [(792, -1548), (41, 581), (169, -306), (93, 652)]
2025-11-18 15:37:42,683 - linien_server.autolock.robust - DEBUG - Calculation of autolock description took 0.9914519786834717
2025-11-18 15:37:42,743 - linien_server.server - ERROR - incorrect data received for lock state, ignoring!
2025-11-18 15:37:43,042 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-18 15:37:43,046 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-18 15:37:43,049 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-18 15:37:43,051 - linien_server.autolock.autolock - DEBUG - after lock
2025-11-18 15:42:26,171 - linien_server.cli - INFO - Stopping Linien server
2025-11-18 15:42:26,272 - linien_server.cli - INFO - Stopped Linien server
2025-11-18 15:42:29,364 - linien_server.cli - DEBUG - Copied linien-server.service to /etc/systemd/system
2025-11-18 15:42:29,365 - linien_server.cli - INFO - Starting Linien server
2025-11-18 15:42:29,433 - linien_server.cli - INFO - Started Linien server
2025-11-18 15:42:45,061 - linien_server.parameters - INFO - Restoring parameters from /root/.local/share/linien/parameters.json
2025-11-18 15:42:45,064 - linien_server.parameters - INFO - Restored parameters from /root/.local/share/linien/parameters.json
2025-11-18 15:42:45,068 - linien_common.influxdb - INFO - Saved InfluxDB credentials to /root/.local/share/linien/influxdb_credentials.json
2025-11-18 15:42:45,262 - linien_server.acquisition - INFO - Using fpgautil to deploy gateware.
2025-11-18 15:42:45,395 - linien_server.server - DEBUG - Ping  1
2025-11-18 15:42:45,447 - linien_server.mdio_tool - INFO - Disabling ethernet blinking with mdio-tool at /usr/local/lib/python3.10/dist-packages/linien_server/mdio-tool
2025-11-18 15:42:45,484 - linien_server.server - INFO - Starting server.
2025-11-18 15:42:46,424 - linien_server.server - DEBUG - Ping  2
2025-11-18 15:42:47,446 - linien_server.server - DEBUG - Ping  3
2025-11-18 15:42:47,453 - linien_server.server - DEBUG - Further pings will be suppressed
2025-11-18 15:44:50,405 - linien_server.autolock.autolock - DEBUG - Initialize Autolock
2025-11-18 15:44:50,425 - linien_server.autolock.autolock - DEBUG - Start the autolock
2025-11-18 15:44:50,435 - linien_server.autolock.autolock - DEBUG - (x0, x1) = (1046,1281)
2025-11-18 15:44:50,441 - linien_server.autolock.autolock - DEBUG - Start autolock with mode 1
2025-11-18 15:44:50,800 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-18 15:44:50,802 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-18 15:44:50,805 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-18 15:44:50,909 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-18 15:44:50,952 - linien_server.autolock.robust - ERROR - Not enough spectra collected:2 of 5
2025-11-18 15:44:51,200 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-18 15:44:51,202 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-18 15:44:51,205 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-18 15:44:51,300 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-18 15:44:51,328 - linien_server.autolock.robust - ERROR - Not enough spectra collected:3 of 5
2025-11-18 15:44:51,597 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-18 15:44:51,601 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-18 15:44:51,603 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-18 15:44:51,700 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-18 15:44:51,727 - linien_server.autolock.robust - ERROR - Not enough spectra collected:4 of 5
2025-11-18 15:44:52,033 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-18 15:44:52,036 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-18 15:44:52,038 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-18 15:44:52,139 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-18 15:44:52,169 - linien_server.autolock.robust - DEBUG - enough spectra!, calculate
2025-11-18 15:44:52,171 - linien_server.autolock.robust - DEBUG - Entered in calculate_autolock_instructions_v2
2025-11-18 15:44:52,176 - linien_server.autolock.robust - DEBUG - Saved new robust_spectra.npy and target_idxs.npy
2025-11-18 15:44:52,178 - linien_server.autolock.utils - DEBUG - Entered in crop_spectra_to_same_view
2025-11-18 15:44:52,271 - linien_server.autolock.utils - DEBUG - Shifts calculated for cropping: [1, 5, 2, 0, -2]
2025-11-18 15:44:52,276 - linien_server.autolock.robust - DEBUG - Saved new robust_spectra_cropped.npy
2025-11-18 15:44:52,277 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-18 15:44:52,278 - linien_server.autolock.utils - DEBUG - Spectrum length:2041
2025-11-18 15:44:52,283 - linien_server.autolock.utils - DEBUG - Spectrum: [5. 5. 5. 5. 5.]...[18. 18. 18. 17. 17.]
2025-11-18 15:44:52,284 - linien_server.autolock.utils - DEBUG - Target indices: [1081, 1116]
2025-11-18 15:44:52,286 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-18 15:44:52,287 - linien_server.autolock.utils - DEBUG - Spectrum length:2041
2025-11-18 15:44:52,290 - linien_server.autolock.utils - DEBUG - Spectrum: [5 5 5 5 6]...[19 19 19 19 19]
2025-11-18 15:44:52,294 - linien_server.autolock.utils - DEBUG - Target indices: [1081, 1116]
2025-11-18 15:44:52,297 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-18 15:44:52,300 - linien_server.autolock.utils - DEBUG - Spectrum length:2041
2025-11-18 15:44:52,304 - linien_server.autolock.utils - DEBUG - Spectrum: [5 5 5 5 5]...[18 18 19 19 19]
2025-11-18 15:44:52,305 - linien_server.autolock.utils - DEBUG - Target indices: [1081, 1116]
2025-11-18 15:44:52,307 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-18 15:44:52,308 - linien_server.autolock.utils - DEBUG - Spectrum length:2041
2025-11-18 15:44:52,311 - linien_server.autolock.utils - DEBUG - Spectrum: [5 5 5 5 5]...[18 18 18 18 18]
2025-11-18 15:44:52,312 - linien_server.autolock.utils - DEBUG - Target indices: [1081, 1116]
2025-11-18 15:44:52,313 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-18 15:44:52,314 - linien_server.autolock.utils - DEBUG - Spectrum length:2041
2025-11-18 15:44:52,317 - linien_server.autolock.utils - DEBUG - Spectrum: [0 5 4 4 4]...[17 17 17 17 17]
2025-11-18 15:44:52,318 - linien_server.autolock.utils - DEBUG - Target indices: [1081, 1116]
2025-11-18 15:44:52,320 - linien_server.autolock.robust - DEBUG - x scale is 31
2025-11-18 15:44:52,360 - linien_server.autolock.robust - DEBUG - shift prepared spectrum by 14 samples to the left to match the original spectrum
2025-11-18 15:44:52,449 - linien_server.autolock.robust - DEBUG - Detected peaks with (position, height): [(1095, 848.0), (886, -99.0), (815, 715.0), (772, -1435.0), (474, 54.0), (447, -3.0), (438, 2.0), (433, 0.0), (429, 1.0), (398, -35.0), (359, 37.0), (331, -1.0), (50, 161.0)]
2025-11-18 15:44:52,481 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [44, 83, 110, 111, 206, 207, 236, 286, 299, 333, 357, 401, 402, 469, 508, 538, 587, 588, 623, 770, 817, 884, 913, 937, 978, 998, 1090, 1138, 1232, 1244, 1245, 1298, 1315, 1316, 1418, 1419, 1433, 1481, 1482, 1491, 1492, 1597, 1621, 1622, 1677, 1678, 1679, 1733, 1744, 1745, 1850, 1873, 1874, 1979, 1980, 1981, 1982, 1983, 1998]
2025-11-18 15:44:52,485 - linien_server.autolock.utils - DEBUG - start_idx - time_scale//5: 1075
2025-11-18 15:44:52,487 - linien_server.autolock.utils - DEBUG - Considered zeros (backward): [44, 83, 110, 111, 206, 207, 236, 286, 299, 333, 357, 401, 402, 469, 508, 538, 587, 588, 623, 770, 817, 884, 913, 937, 978, 998]
2025-11-18 15:44:52,514 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [44, 83, 110, 111, 206, 207, 236, 286, 299, 333, 357, 401, 402, 469, 508, 538, 587, 588, 623, 770, 817, 884, 913, 937, 978, 998, 1090, 1138, 1232, 1244, 1245, 1298, 1315, 1316, 1418, 1419, 1433, 1481, 1482, 1491, 1492, 1597, 1621, 1622, 1677, 1678, 1679, 1733, 1744, 1745, 1850, 1873, 1874, 1979, 1980, 1981, 1982, 1983, 1998]
2025-11-18 15:44:52,516 - linien_server.autolock.utils - DEBUG - start_idx + time_scale//5: 1121
2025-11-18 15:44:52,517 - linien_server.autolock.utils - DEBUG - Considered zeros (forward): [1138, 1232, 1244, 1245, 1298, 1315, 1316, 1418, 1419, 1433, 1481, 1482, 1491, 1492, 1597, 1621, 1622, 1677, 1678, 1679, 1733, 1744, 1745, 1850, 1873, 1874, 1979, 1980, 1981, 1982, 1983, 1998]
2025-11-18 15:44:52,547 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [44, 83, 110, 111, 206, 207, 236, 286, 299, 333, 357, 401, 402, 469, 508, 538, 587, 588, 623, 770, 817, 884, 913, 937, 978, 998, 1090, 1138, 1232, 1244, 1245, 1298, 1315, 1316, 1418, 1419, 1433, 1481, 1482, 1491, 1492, 1597, 1621, 1622, 1677, 1678, 1679, 1733, 1744, 1745, 1850, 1873, 1874, 1979, 1980, 1981, 1982, 1983, 1998]
2025-11-18 15:44:52,549 - linien_server.autolock.utils - DEBUG - start_idx - time_scale//5: 1080
2025-11-18 15:44:52,550 - linien_server.autolock.utils - DEBUG - Considered zeros (backward): [44, 83, 110, 111, 206, 207, 236, 286, 299, 333, 357, 401, 402, 469, 508, 538, 587, 588, 623, 770, 817, 884, 913, 937, 978, 998]
2025-11-18 15:44:52,578 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [44, 83, 110, 111, 206, 207, 236, 286, 299, 333, 357, 401, 402, 469, 508, 538, 587, 588, 623, 770, 817, 884, 913, 937, 978, 998, 1090, 1138, 1232, 1244, 1245, 1298, 1315, 1316, 1418, 1419, 1433, 1481, 1482, 1491, 1492, 1597, 1621, 1622, 1677, 1678, 1679, 1733, 1744, 1745, 1850, 1873, 1874, 1979, 1980, 1981, 1982, 1983, 1998]
2025-11-18 15:44:52,579 - linien_server.autolock.utils - DEBUG - start_idx + time_scale//5: 1121
2025-11-18 15:44:52,581 - linien_server.autolock.utils - DEBUG - Considered zeros (forward): [1138, 1232, 1244, 1245, 1298, 1315, 1316, 1418, 1419, 1433, 1481, 1482, 1491, 1492, 1597, 1621, 1622, 1677, 1678, 1679, 1733, 1744, 1745, 1850, 1873, 1874, 1979, 1980, 1981, 1982, 1983, 1998]
2025-11-18 15:44:52,611 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [44, 83, 110, 111, 206, 207, 236, 286, 299, 333, 357, 401, 402, 469, 508, 538, 587, 588, 623, 770, 817, 884, 913, 937, 978, 998, 1090, 1138, 1232, 1244, 1245, 1298, 1315, 1316, 1418, 1419, 1433, 1481, 1482, 1491, 1492, 1597, 1621, 1622, 1677, 1678, 1679, 1733, 1744, 1745, 1850, 1873, 1874, 1979, 1980, 1981, 1982, 1983, 1998]
2025-11-18 15:44:52,612 - linien_server.autolock.utils - DEBUG - start_idx - time_scale//5: 1077
2025-11-18 15:44:52,614 - linien_server.autolock.utils - DEBUG - Considered zeros (backward): [44, 83, 110, 111, 206, 207, 236, 286, 299, 333, 357, 401, 402, 469, 508, 538, 587, 588, 623, 770, 817, 884, 913, 937, 978, 998]
2025-11-18 15:44:52,642 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [44, 83, 110, 111, 206, 207, 236, 286, 299, 333, 357, 401, 402, 469, 508, 538, 587, 588, 623, 770, 817, 884, 913, 937, 978, 998, 1090, 1138, 1232, 1244, 1245, 1298, 1315, 1316, 1418, 1419, 1433, 1481, 1482, 1491, 1492, 1597, 1621, 1622, 1677, 1678, 1679, 1733, 1744, 1745, 1850, 1873, 1874, 1979, 1980, 1981, 1982, 1983, 1998]
2025-11-18 15:44:52,643 - linien_server.autolock.utils - DEBUG - start_idx + time_scale//5: 1120
2025-11-18 15:44:52,645 - linien_server.autolock.utils - DEBUG - Considered zeros (forward): [1138, 1232, 1244, 1245, 1298, 1315, 1316, 1418, 1419, 1433, 1481, 1482, 1491, 1492, 1597, 1621, 1622, 1677, 1678, 1679, 1733, 1744, 1745, 1850, 1873, 1874, 1979, 1980, 1981, 1982, 1983, 1998]
2025-11-18 15:44:52,674 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [44, 83, 110, 111, 206, 207, 236, 286, 299, 333, 357, 401, 402, 469, 508, 538, 587, 588, 623, 770, 817, 884, 913, 937, 978, 998, 1090, 1138, 1232, 1244, 1245, 1298, 1315, 1316, 1418, 1419, 1433, 1481, 1482, 1491, 1492, 1597, 1621, 1622, 1677, 1678, 1679, 1733, 1744, 1745, 1850, 1873, 1874, 1979, 1980, 1981, 1982, 1983, 1998]
2025-11-18 15:44:52,675 - linien_server.autolock.utils - DEBUG - start_idx - time_scale//5: 1077
2025-11-18 15:44:52,677 - linien_server.autolock.utils - DEBUG - Considered zeros (backward): [44, 83, 110, 111, 206, 207, 236, 286, 299, 333, 357, 401, 402, 469, 508, 538, 587, 588, 623, 770, 817, 884, 913, 937, 978, 998]
2025-11-18 15:44:52,705 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [44, 83, 110, 111, 206, 207, 236, 286, 299, 333, 357, 401, 402, 469, 508, 538, 587, 588, 623, 770, 817, 884, 913, 937, 978, 998, 1090, 1138, 1232, 1244, 1245, 1298, 1315, 1316, 1418, 1419, 1433, 1481, 1482, 1491, 1492, 1597, 1621, 1622, 1677, 1678, 1679, 1733, 1744, 1745, 1850, 1873, 1874, 1979, 1980, 1981, 1982, 1983, 1998]
2025-11-18 15:44:52,707 - linien_server.autolock.utils - DEBUG - start_idx + time_scale//5: 1119
2025-11-18 15:44:52,709 - linien_server.autolock.utils - DEBUG - Considered zeros (forward): [1138, 1232, 1244, 1245, 1298, 1315, 1316, 1418, 1419, 1433, 1481, 1482, 1491, 1492, 1597, 1621, 1622, 1677, 1678, 1679, 1733, 1744, 1745, 1850, 1873, 1874, 1979, 1980, 1981, 1982, 1983, 1998]
2025-11-18 15:44:52,741 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [44, 83, 110, 111, 206, 207, 236, 286, 299, 333, 357, 401, 402, 469, 508, 538, 587, 588, 623, 770, 817, 884, 913, 937, 978, 998, 1090, 1138, 1232, 1244, 1245, 1298, 1315, 1316, 1418, 1419, 1433, 1481, 1482, 1491, 1492, 1597, 1621, 1622, 1677, 1678, 1679, 1733, 1744, 1745, 1850, 1873, 1874, 1979, 1980, 1981, 1982, 1983, 1998]
2025-11-18 15:44:52,742 - linien_server.autolock.utils - DEBUG - start_idx - time_scale//5: 1075
2025-11-18 15:44:52,744 - linien_server.autolock.utils - DEBUG - Considered zeros (backward): [44, 83, 110, 111, 206, 207, 236, 286, 299, 333, 357, 401, 402, 469, 508, 538, 587, 588, 623, 770, 817, 884, 913, 937, 978, 998]
2025-11-18 15:44:52,772 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [44, 83, 110, 111, 206, 207, 236, 286, 299, 333, 357, 401, 402, 469, 508, 538, 587, 588, 623, 770, 817, 884, 913, 937, 978, 998, 1090, 1138, 1232, 1244, 1245, 1298, 1315, 1316, 1418, 1419, 1433, 1481, 1482, 1491, 1492, 1597, 1621, 1622, 1677, 1678, 1679, 1733, 1744, 1745, 1850, 1873, 1874, 1979, 1980, 1981, 1982, 1983, 1998]
2025-11-18 15:44:52,773 - linien_server.autolock.utils - DEBUG - start_idx + time_scale//5: 1119
2025-11-18 15:44:52,774 - linien_server.autolock.utils - DEBUG - Considered zeros (forward): [1138, 1232, 1244, 1245, 1298, 1315, 1316, 1418, 1419, 1433, 1481, 1482, 1491, 1492, 1597, 1621, 1622, 1677, 1678, 1679, 1733, 1744, 1745, 1850, 1873, 1874, 1979, 1980, 1981, 1982, 1983, 1998]
2025-11-18 15:44:52,779 - linien_server.autolock.robust - DEBUG - Determined lock regions: [(1006, 1138), (1019, 1138), (1008, 1138), (1019, 1138), (1016, 1138)]
2025-11-18 15:44:52,780 - linien_server.autolock.robust - DEBUG - Try out tolerance 0.95
2025-11-18 15:44:52,782 - linien_server.autolock.robust - DEBUG - Original peaks: [(1095, 848.0), (886, -99.0), (815, 715.0), (772, -1435.0), (474, 54.0), (447, -3.0), (438, 2.0), (433, 0.0), (429, 1.0), (398, -35.0), (359, 37.0), (331, -1.0), (50, 161.0)]
2025-11-18 15:44:52,783 - linien_server.autolock.robust - DEBUG - Filtered peaks: [(1095, 805.5999999999999), (886, -94.05), (815, 679.25), (772, -1363.25), (474, 51.3), (50, 152.95)]
2025-11-18 15:44:52,785 - linien_server.autolock.robust - DEBUG - Discarded peaks: [(1095, 848.0), (886, -99.0), (815, 715.0), (772, -1435.0), (474, 54.0), (447, -3.0), (438, 2.0), (433, 0.0), (429, 1.0), (398, -35.0), (359, 37.0), (331, -1.0), (50, 161.0)]
2025-11-18 15:44:52,786 - linien_server.autolock.robust - DEBUG - Target peak index in prepared spectrum: 1095
2025-11-18 15:44:52,788 - linien_server.autolock.robust - DEBUG - final wait time is 9 samples
2025-11-18 15:44:52,790 - linien_server.autolock.robust - DEBUG - Generated description: [(45, 152), (381, 51), (268, -1363), (38, 679), (63, -94), (188, 805)]
2025-11-18 15:44:52,817 - linien_server.autolock.robust - DEBUG - Lock position found at index 1096 for current spectrum
2025-11-18 15:44:52,941 - linien_server.autolock.robust - DEBUG - Try out tolerance 0.9
2025-11-18 15:44:52,943 - linien_server.autolock.robust - DEBUG - Original peaks: [(1095, 848.0), (886, -99.0), (815, 715.0), (772, -1435.0), (474, 54.0), (447, -3.0), (438, 2.0), (433, 0.0), (429, 1.0), (398, -35.0), (359, 37.0), (331, -1.0), (50, 161.0)]
2025-11-18 15:44:52,944 - linien_server.autolock.robust - DEBUG - Filtered peaks: [(1095, 763.2), (886, -89.10000000000001), (815, 643.5), (772, -1291.5), (50, 144.9)]
2025-11-18 15:44:52,945 - linien_server.autolock.robust - DEBUG - Discarded peaks: [(1095, 848.0), (886, -99.0), (815, 715.0), (772, -1435.0), (474, 54.0), (447, -3.0), (438, 2.0), (433, 0.0), (429, 1.0), (398, -35.0), (359, 37.0), (331, -1.0), (50, 161.0)]
2025-11-18 15:44:52,947 - linien_server.autolock.robust - DEBUG - Target peak index in prepared spectrum: 1095
2025-11-18 15:44:52,949 - linien_server.autolock.robust - DEBUG - final wait time is 11 samples
2025-11-18 15:44:52,950 - linien_server.autolock.robust - DEBUG - Generated description: [(45, 144), (649, -1291), (38, 643), (63, -89), (188, 763)]
2025-11-18 15:44:52,976 - linien_server.autolock.robust - DEBUG - Lock position found at index 1096 for current spectrum
2025-11-18 15:44:53,001 - linien_server.autolock.robust - DEBUG - Lock position found at index 1101 for current spectrum
2025-11-18 15:44:53,058 - linien_server.autolock.robust - DEBUG - Lock position found at index 1099 for current spectrum
2025-11-18 15:44:53,085 - linien_server.autolock.robust - DEBUG - Lock position found at index 1097 for current spectrum
2025-11-18 15:44:53,086 - linien_server.autolock.robust - DEBUG - Try out tolerance 0.85
2025-11-18 15:44:53,088 - linien_server.autolock.robust - DEBUG - Original peaks: [(1095, 848.0), (886, -99.0), (815, 715.0), (772, -1435.0), (474, 54.0), (447, -3.0), (438, 2.0), (433, 0.0), (429, 1.0), (398, -35.0), (359, 37.0), (331, -1.0), (50, 161.0)]
2025-11-18 15:44:53,089 - linien_server.autolock.robust - DEBUG - Filtered peaks: [(1095, 720.8), (815, 607.75), (772, -1219.75), (50, 136.85)]
2025-11-18 15:44:53,091 - linien_server.autolock.robust - DEBUG - Discarded peaks: [(1095, 848.0), (886, -99.0), (815, 715.0), (772, -1435.0), (474, 54.0), (447, -3.0), (438, 2.0), (433, 0.0), (429, 1.0), (398, -35.0), (359, 37.0), (331, -1.0), (50, 161.0)]
2025-11-18 15:44:53,092 - linien_server.autolock.robust - DEBUG - Target peak index in prepared spectrum: 1095
2025-11-18 15:44:53,094 - linien_server.autolock.robust - DEBUG - final wait time is 13 samples
2025-11-18 15:44:53,096 - linien_server.autolock.robust - DEBUG - Generated description: [(45, 136), (649, -1219), (38, 607), (252, 720)]
2025-11-18 15:44:53,122 - linien_server.autolock.robust - DEBUG - Lock position found at index 1096 for current spectrum
2025-11-18 15:44:53,147 - linien_server.autolock.robust - DEBUG - Lock position found at index 1101 for current spectrum
2025-11-18 15:44:53,172 - linien_server.autolock.robust - DEBUG - Lock position found at index 1098 for current spectrum
2025-11-18 15:44:53,196 - linien_server.autolock.robust - DEBUG - Lock position found at index 1099 for current spectrum
2025-11-18 15:44:53,221 - linien_server.autolock.robust - DEBUG - Lock position found at index 1097 for current spectrum
2025-11-18 15:44:53,222 - linien_server.autolock.robust - DEBUG - Description is [(45, 136), (649, -1219), (38, 607), (252, 720)]
2025-11-18 15:44:53,224 - linien_server.autolock.robust - DEBUG - Calculation of autolock description took 1.0533740520477295
2025-11-18 15:44:53,284 - linien_server.server - ERROR - incorrect data received for lock state, ignoring!
2025-11-18 15:44:59,191 - linien_server.autolock.robust - ERROR - Waited too long for autolock! Aborting
2025-11-19 09:05:03,559 - linien_server.cli - DEBUG - Copied linien-server.service to /etc/systemd/system
2025-11-19 09:05:03,562 - linien_server.cli - INFO - Starting Linien server
2025-11-19 09:05:03,631 - linien_server.cli - INFO - Started Linien server
2025-11-19 09:05:23,852 - linien_server.parameters - INFO - Restoring parameters from /root/.local/share/linien/parameters.json
2025-11-19 09:05:23,858 - linien_server.parameters - INFO - Restored parameters from /root/.local/share/linien/parameters.json
2025-11-19 09:05:23,863 - linien_common.influxdb - INFO - Saved InfluxDB credentials to /root/.local/share/linien/influxdb_credentials.json
2025-11-19 09:05:25,030 - linien_server.acquisition - INFO - Using fpgautil to deploy gateware.
2025-11-19 09:05:25,300 - linien_server.server - DEBUG - Ping  1
2025-11-19 09:05:25,343 - linien_server.mdio_tool - INFO - Disabling ethernet blinking with mdio-tool at /usr/local/lib/python3.10/dist-packages/linien_server/mdio-tool
2025-11-19 09:05:25,356 - linien_server.server - INFO - Starting server.
2025-11-19 09:05:26,329 - linien_server.server - DEBUG - Ping  2
2025-11-19 09:05:27,347 - linien_server.server - DEBUG - Ping  3
2025-11-19 09:05:27,360 - linien_server.server - DEBUG - Further pings will be suppressed
2025-11-19 09:10:35,435 - linien_server.autolock.autolock - DEBUG - Initialize Autolock
2025-11-19 09:10:35,460 - linien_server.autolock.autolock - DEBUG - Start the autolock
2025-11-19 09:10:35,521 - linien_server.autolock.autolock - DEBUG - (x0, x1) = (955,1139)
2025-11-19 09:10:35,557 - linien_server.autolock.autolock - DEBUG - Start autolock with mode 1
2025-11-19 09:10:35,679 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-19 09:10:35,682 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-19 09:10:35,683 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-19 09:10:35,792 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-19 09:10:35,842 - linien_server.autolock.robust - ERROR - Not enough spectra collected:2 of 5
2025-11-19 09:10:36,050 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-19 09:10:36,055 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-19 09:10:36,058 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-19 09:10:36,182 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-19 09:10:36,222 - linien_server.autolock.robust - ERROR - Not enough spectra collected:3 of 5
2025-11-19 09:10:36,404 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-19 09:10:36,406 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-19 09:10:36,409 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-19 09:10:36,510 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-19 09:10:36,539 - linien_server.autolock.robust - ERROR - Not enough spectra collected:4 of 5
2025-11-19 09:10:36,805 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-19 09:10:36,808 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-19 09:10:36,810 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-19 09:10:36,912 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-19 09:10:36,940 - linien_server.autolock.robust - DEBUG - enough spectra!, calculate
2025-11-19 09:10:36,941 - linien_server.autolock.robust - DEBUG - Entered in calculate_autolock_instructions_v2
2025-11-19 09:10:36,947 - linien_server.autolock.robust - DEBUG - Saved new robust_spectra.npy and target_idxs.npy
2025-11-19 09:10:36,949 - linien_server.autolock.utils - DEBUG - Entered in crop_spectra_to_same_view
2025-11-19 09:10:37,042 - linien_server.autolock.utils - DEBUG - Shifts calculated for cropping: [1, 4, 4, 1, 4]
2025-11-19 09:10:37,047 - linien_server.autolock.robust - DEBUG - Saved new robust_spectra_cropped.npy
2025-11-19 09:10:37,048 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-19 09:10:37,049 - linien_server.autolock.utils - DEBUG - Spectrum length:2045
2025-11-19 09:10:37,054 - linien_server.autolock.utils - DEBUG - Spectrum: [-10.  -6.  -7.  -7.  -7.]...[8. 9. 8. 8. 9.]
2025-11-19 09:10:37,055 - linien_server.autolock.utils - DEBUG - Target indices: [1046, 1091]
2025-11-19 09:10:37,057 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-19 09:10:37,058 - linien_server.autolock.utils - DEBUG - Spectrum length:2045
2025-11-19 09:10:37,061 - linien_server.autolock.utils - DEBUG - Spectrum: [-6 -7 -7 -7 -7]...[9 8 8 8 8]
2025-11-19 09:10:37,062 - linien_server.autolock.utils - DEBUG - Target indices: [1046, 1091]
2025-11-19 09:10:37,063 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-19 09:10:37,064 - linien_server.autolock.utils - DEBUG - Spectrum length:2045
2025-11-19 09:10:37,067 - linien_server.autolock.utils - DEBUG - Spectrum: [-7 -7 -7 -7 -7]...[8 8 8 8 8]
2025-11-19 09:10:37,068 - linien_server.autolock.utils - DEBUG - Target indices: [1046, 1091]
2025-11-19 09:10:37,070 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-19 09:10:37,071 - linien_server.autolock.utils - DEBUG - Spectrum length:2045
2025-11-19 09:10:37,074 - linien_server.autolock.utils - DEBUG - Spectrum: [-10  -7  -6  -6  -6]...[8 9 9 9 9]
2025-11-19 09:10:37,075 - linien_server.autolock.utils - DEBUG - Target indices: [1046, 1091]
2025-11-19 09:10:37,077 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-19 09:10:37,078 - linien_server.autolock.utils - DEBUG - Spectrum length:2045
2025-11-19 09:10:37,081 - linien_server.autolock.utils - DEBUG - Spectrum: [-6 -6 -6 -6 -6]...[9 9 9 9 9]
2025-11-19 09:10:37,082 - linien_server.autolock.utils - DEBUG - Target indices: [1046, 1091]
2025-11-19 09:10:37,083 - linien_server.autolock.robust - DEBUG - x scale is 40
2025-11-19 09:10:37,122 - linien_server.autolock.robust - DEBUG - shift prepared spectrum by 18 samples to the left to match the original spectrum
2025-11-19 09:10:37,206 - linien_server.autolock.robust - DEBUG - Detected peaks with (position, height): [(1067, 918.0), (874, -323.0), (720, 958.0), (665, -1957.0)]
2025-11-19 09:10:37,233 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [92, 93, 95, 96, 144, 145, 183, 184, 198, 249, 250, 307, 354, 395, 396, 413, 455, 493, 661, 722, 868, 930, 942, 1064, 1124, 1241, 1242, 1356, 1357, 1372, 1373, 1606, 1607, 1624, 1625, 1855, 1856, 1865, 1978, 1979, 1980, 1981, 1982, 1983, 1984, 1985]
2025-11-19 09:10:37,235 - linien_server.autolock.utils - DEBUG - start_idx - time_scale//5: 1038
2025-11-19 09:10:37,236 - linien_server.autolock.utils - DEBUG - Considered zeros (backward): [92, 93, 95, 96, 144, 145, 183, 184, 198, 249, 250, 307, 354, 395, 396, 413, 455, 493, 661, 722, 868, 930, 942]
2025-11-19 09:10:37,264 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [92, 93, 95, 96, 144, 145, 183, 184, 198, 249, 250, 307, 354, 395, 396, 413, 455, 493, 661, 722, 868, 930, 942, 1064, 1124, 1241, 1242, 1356, 1357, 1372, 1373, 1606, 1607, 1624, 1625, 1855, 1856, 1865, 1978, 1979, 1980, 1981, 1982, 1983, 1984, 1985]
2025-11-19 09:10:37,265 - linien_server.autolock.utils - DEBUG - start_idx + time_scale//5: 1098
2025-11-19 09:10:37,267 - linien_server.autolock.utils - DEBUG - Considered zeros (forward): [1124, 1241, 1242, 1356, 1357, 1372, 1373, 1606, 1607, 1624, 1625, 1855, 1856, 1865, 1978, 1979, 1980, 1981, 1982, 1983, 1984, 1985]
2025-11-19 09:10:37,302 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [92, 93, 95, 96, 144, 145, 183, 184, 198, 249, 250, 307, 354, 395, 396, 413, 455, 493, 661, 722, 868, 930, 942, 1064, 1124, 1241, 1242, 1356, 1357, 1372, 1373, 1606, 1607, 1624, 1625, 1855, 1856, 1865, 1978, 1979, 1980, 1981, 1982, 1983, 1984, 1985]
2025-11-19 09:10:37,304 - linien_server.autolock.utils - DEBUG - start_idx - time_scale//5: 1038
2025-11-19 09:10:37,305 - linien_server.autolock.utils - DEBUG - Considered zeros (backward): [92, 93, 95, 96, 144, 145, 183, 184, 198, 249, 250, 307, 354, 395, 396, 413, 455, 493, 661, 722, 868, 930, 942]
2025-11-19 09:10:37,333 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [92, 93, 95, 96, 144, 145, 183, 184, 198, 249, 250, 307, 354, 395, 396, 413, 455, 493, 661, 722, 868, 930, 942, 1064, 1124, 1241, 1242, 1356, 1357, 1372, 1373, 1606, 1607, 1624, 1625, 1855, 1856, 1865, 1978, 1979, 1980, 1981, 1982, 1983, 1984, 1985]
2025-11-19 09:10:37,337 - linien_server.autolock.utils - DEBUG - start_idx + time_scale//5: 1098
2025-11-19 09:10:37,342 - linien_server.autolock.utils - DEBUG - Considered zeros (forward): [1124, 1241, 1242, 1356, 1357, 1372, 1373, 1606, 1607, 1624, 1625, 1855, 1856, 1865, 1978, 1979, 1980, 1981, 1982, 1983, 1984, 1985]
2025-11-19 09:10:37,378 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [92, 93, 95, 96, 144, 145, 183, 184, 198, 249, 250, 307, 354, 395, 396, 413, 455, 493, 661, 722, 868, 930, 942, 1064, 1124, 1241, 1242, 1356, 1357, 1372, 1373, 1606, 1607, 1624, 1625, 1855, 1856, 1865, 1978, 1979, 1980, 1981, 1982, 1983, 1984, 1985]
2025-11-19 09:10:37,379 - linien_server.autolock.utils - DEBUG - start_idx - time_scale//5: 1040
2025-11-19 09:10:37,381 - linien_server.autolock.utils - DEBUG - Considered zeros (backward): [92, 93, 95, 96, 144, 145, 183, 184, 198, 249, 250, 307, 354, 395, 396, 413, 455, 493, 661, 722, 868, 930, 942]
2025-11-19 09:10:37,413 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [92, 93, 95, 96, 144, 145, 183, 184, 198, 249, 250, 307, 354, 395, 396, 413, 455, 493, 661, 722, 868, 930, 942, 1064, 1124, 1241, 1242, 1356, 1357, 1372, 1373, 1606, 1607, 1624, 1625, 1855, 1856, 1865, 1978, 1979, 1980, 1981, 1982, 1983, 1984, 1985]
2025-11-19 09:10:37,416 - linien_server.autolock.utils - DEBUG - start_idx + time_scale//5: 1096
2025-11-19 09:10:37,421 - linien_server.autolock.utils - DEBUG - Considered zeros (forward): [1124, 1241, 1242, 1356, 1357, 1372, 1373, 1606, 1607, 1624, 1625, 1855, 1856, 1865, 1978, 1979, 1980, 1981, 1982, 1983, 1984, 1985]
2025-11-19 09:10:37,462 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [92, 93, 95, 96, 144, 145, 183, 184, 198, 249, 250, 307, 354, 395, 396, 413, 455, 493, 661, 722, 868, 930, 942, 1064, 1124, 1241, 1242, 1356, 1357, 1372, 1373, 1606, 1607, 1624, 1625, 1855, 1856, 1865, 1978, 1979, 1980, 1981, 1982, 1983, 1984, 1985]
2025-11-19 09:10:37,466 - linien_server.autolock.utils - DEBUG - start_idx - time_scale//5: 1043
2025-11-19 09:10:37,470 - linien_server.autolock.utils - DEBUG - Considered zeros (backward): [92, 93, 95, 96, 144, 145, 183, 184, 198, 249, 250, 307, 354, 395, 396, 413, 455, 493, 661, 722, 868, 930, 942]
2025-11-19 09:10:37,503 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [92, 93, 95, 96, 144, 145, 183, 184, 198, 249, 250, 307, 354, 395, 396, 413, 455, 493, 661, 722, 868, 930, 942, 1064, 1124, 1241, 1242, 1356, 1357, 1372, 1373, 1606, 1607, 1624, 1625, 1855, 1856, 1865, 1978, 1979, 1980, 1981, 1982, 1983, 1984, 1985]
2025-11-19 09:10:37,507 - linien_server.autolock.utils - DEBUG - start_idx + time_scale//5: 1098
2025-11-19 09:10:37,510 - linien_server.autolock.utils - DEBUG - Considered zeros (forward): [1124, 1241, 1242, 1356, 1357, 1372, 1373, 1606, 1607, 1624, 1625, 1855, 1856, 1865, 1978, 1979, 1980, 1981, 1982, 1983, 1984, 1985]
2025-11-19 09:10:37,546 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [92, 93, 95, 96, 144, 145, 183, 184, 198, 249, 250, 307, 354, 395, 396, 413, 455, 493, 661, 722, 868, 930, 942, 1064, 1124, 1241, 1242, 1356, 1357, 1372, 1373, 1606, 1607, 1624, 1625, 1855, 1856, 1865, 1978, 1979, 1980, 1981, 1982, 1983, 1984, 1985]
2025-11-19 09:10:37,547 - linien_server.autolock.utils - DEBUG - start_idx - time_scale//5: 1048
2025-11-19 09:10:37,548 - linien_server.autolock.utils - DEBUG - Considered zeros (backward): [92, 93, 95, 96, 144, 145, 183, 184, 198, 249, 250, 307, 354, 395, 396, 413, 455, 493, 661, 722, 868, 930, 942]
2025-11-19 09:10:37,577 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [92, 93, 95, 96, 144, 145, 183, 184, 198, 249, 250, 307, 354, 395, 396, 413, 455, 493, 661, 722, 868, 930, 942, 1064, 1124, 1241, 1242, 1356, 1357, 1372, 1373, 1606, 1607, 1624, 1625, 1855, 1856, 1865, 1978, 1979, 1980, 1981, 1982, 1983, 1984, 1985]
2025-11-19 09:10:37,579 - linien_server.autolock.utils - DEBUG - start_idx + time_scale//5: 1098
2025-11-19 09:10:37,582 - linien_server.autolock.utils - DEBUG - Considered zeros (forward): [1124, 1241, 1242, 1356, 1357, 1372, 1373, 1606, 1607, 1624, 1625, 1855, 1856, 1865, 1978, 1979, 1980, 1981, 1982, 1983, 1984, 1985]
2025-11-19 09:10:37,593 - linien_server.autolock.robust - DEBUG - Determined lock regions: [(1003, 1124), (1004, 1124), (1002, 1124), (1007, 1124), (1003, 1124)]
2025-11-19 09:10:37,595 - linien_server.autolock.robust - DEBUG - Try out tolerance 0.95
2025-11-19 09:10:37,596 - linien_server.autolock.robust - DEBUG - Original peaks: [(1067, 918.0), (874, -323.0), (720, 958.0), (665, -1957.0)]
2025-11-19 09:10:37,597 - linien_server.autolock.robust - DEBUG - Filtered peaks: [(1067, 872.0999999999999), (874, -306.84999999999997), (720, 910.0999999999999), (665, -1859.1499999999999)]
2025-11-19 09:10:37,599 - linien_server.autolock.robust - DEBUG - Discarded peaks: [(1067, 918.0), (874, -323.0), (720, 958.0), (665, -1957.0)]
2025-11-19 09:10:37,600 - linien_server.autolock.robust - DEBUG - Target peak index in prepared spectrum: 1067
2025-11-19 09:10:37,602 - linien_server.autolock.robust - DEBUG - final wait time is 7 samples
2025-11-19 09:10:37,603 - linien_server.autolock.robust - DEBUG - Generated description: [(598, -1859), (49, 910), (138, -306), (173, 872)]
2025-11-19 09:10:37,631 - linien_server.autolock.robust - DEBUG - Lock position found at index 1068 for current spectrum
2025-11-19 09:10:37,657 - linien_server.autolock.robust - DEBUG - Lock position found at index 1074 for current spectrum
2025-11-19 09:10:37,683 - linien_server.autolock.robust - DEBUG - Lock position found at index 1071 for current spectrum
2025-11-19 09:10:37,752 - linien_server.autolock.robust - DEBUG - Try out tolerance 0.9
2025-11-19 09:10:37,753 - linien_server.autolock.robust - DEBUG - Original peaks: [(1067, 918.0), (874, -323.0), (720, 958.0), (665, -1957.0)]
2025-11-19 09:10:37,755 - linien_server.autolock.robust - DEBUG - Filtered peaks: [(1067, 826.2), (874, -290.7), (720, 862.2), (665, -1761.3)]
2025-11-19 09:10:37,756 - linien_server.autolock.robust - DEBUG - Discarded peaks: [(1067, 918.0), (874, -323.0), (720, 958.0), (665, -1957.0)]
2025-11-19 09:10:37,758 - linien_server.autolock.robust - DEBUG - Target peak index in prepared spectrum: 1067
2025-11-19 09:10:37,759 - linien_server.autolock.robust - DEBUG - final wait time is 9 samples
2025-11-19 09:10:37,761 - linien_server.autolock.robust - DEBUG - Generated description: [(598, -1761), (49, 862), (138, -290), (173, 826)]
2025-11-19 09:10:37,789 - linien_server.autolock.robust - DEBUG - Lock position found at index 1068 for current spectrum
2025-11-19 09:10:37,815 - linien_server.autolock.robust - DEBUG - Lock position found at index 1071 for current spectrum
2025-11-19 09:10:37,841 - linien_server.autolock.robust - DEBUG - Lock position found at index 1069 for current spectrum
2025-11-19 09:10:37,867 - linien_server.autolock.robust - DEBUG - Lock position found at index 1071 for current spectrum
2025-11-19 09:10:37,893 - linien_server.autolock.robust - DEBUG - Lock position found at index 1075 for current spectrum
2025-11-19 09:10:37,895 - linien_server.autolock.robust - DEBUG - Description is [(598, -1761), (49, 862), (138, -290), (173, 826)]
2025-11-19 09:10:37,897 - linien_server.autolock.robust - DEBUG - Calculation of autolock description took 0.9558084011077881
2025-11-19 09:10:37,961 - linien_server.server - ERROR - incorrect data received for lock state, ignoring!
2025-11-19 09:10:43,019 - linien_server.autolock.robust - ERROR - Waited too long for autolock! Aborting
2025-11-19 09:13:53,570 - linien_server.cli - INFO - Stopping Linien server
2025-11-19 09:13:53,689 - linien_server.cli - INFO - Stopped Linien server
2025-11-19 09:13:57,073 - linien_server.cli - DEBUG - Copied linien-server.service to /etc/systemd/system
2025-11-19 09:13:57,075 - linien_server.cli - INFO - Starting Linien server
2025-11-19 09:13:57,148 - linien_server.cli - INFO - Started Linien server
2025-11-19 09:14:08,384 - linien_server.cli - DEBUG - Copied linien-server.service to /etc/systemd/system
2025-11-19 09:14:08,386 - linien_server.cli - INFO - Starting Linien server
2025-11-19 09:14:08,436 - linien_server.cli - INFO - Started Linien server
2025-11-19 09:14:16,217 - linien_server.parameters - INFO - Restoring parameters from /root/.local/share/linien/parameters.json
2025-11-19 09:14:16,222 - linien_server.parameters - INFO - Restored parameters from /root/.local/share/linien/parameters.json
2025-11-19 09:14:16,227 - linien_common.influxdb - INFO - Saved InfluxDB credentials to /root/.local/share/linien/influxdb_credentials.json
2025-11-19 09:14:16,450 - linien_server.acquisition - INFO - Using fpgautil to deploy gateware.
2025-11-19 09:14:16,692 - linien_server.server - DEBUG - Ping  1
2025-11-19 09:14:16,751 - linien_server.mdio_tool - INFO - Disabling ethernet blinking with mdio-tool at /usr/local/lib/python3.10/dist-packages/linien_server/mdio-tool
2025-11-19 09:14:16,791 - linien_server.server - INFO - Starting server.
2025-11-19 09:14:17,715 - linien_server.server - DEBUG - Ping  2
2025-11-19 09:14:18,749 - linien_server.server - DEBUG - Ping  3
2025-11-19 09:14:18,772 - linien_server.server - DEBUG - Further pings will be suppressed
2025-11-19 09:15:43,164 - linien_server.autolock.autolock - DEBUG - Initialize Autolock
2025-11-19 09:15:43,168 - linien_server.autolock.autolock - DEBUG - Start the autolock
2025-11-19 09:15:43,173 - linien_server.autolock.autolock - DEBUG - (x0, x1) = (978,1162)
2025-11-19 09:15:43,178 - linien_server.autolock.autolock - DEBUG - Start autolock with mode 1
2025-11-19 09:15:43,537 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-19 09:15:43,542 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-19 09:15:43,546 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-19 09:15:43,666 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-19 09:15:43,717 - linien_server.autolock.robust - ERROR - Not enough spectra collected:2 of 5
2025-11-19 09:15:43,942 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-19 09:15:43,944 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-19 09:15:43,947 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-19 09:15:44,048 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-19 09:15:44,076 - linien_server.autolock.robust - ERROR - Not enough spectra collected:3 of 5
2025-11-19 09:15:44,273 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-19 09:15:44,277 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-19 09:15:44,279 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-19 09:15:44,378 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-19 09:15:44,406 - linien_server.autolock.robust - ERROR - Not enough spectra collected:4 of 5
2025-11-19 09:15:44,666 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-19 09:15:44,668 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-19 09:15:44,671 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-19 09:15:44,770 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-19 09:15:44,799 - linien_server.autolock.robust - DEBUG - enough spectra!, calculate
2025-11-19 09:15:44,800 - linien_server.autolock.robust - DEBUG - Entered in calculate_autolock_instructions_v2
2025-11-19 09:15:44,806 - linien_server.autolock.robust - DEBUG - Saved new robust_spectra.npy and target_idxs.npy
2025-11-19 09:15:44,807 - linien_server.autolock.utils - DEBUG - Entered in crop_spectra_to_same_view
2025-11-19 09:15:44,902 - linien_server.autolock.utils - DEBUG - Shifts calculated for cropping: [1, 3, 3, 4, -1]
2025-11-19 09:15:44,909 - linien_server.autolock.robust - DEBUG - Saved new robust_spectra_cropped.npy
2025-11-19 09:15:44,911 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-19 09:15:44,912 - linien_server.autolock.utils - DEBUG - Spectrum length:2043
2025-11-19 09:15:44,916 - linien_server.autolock.utils - DEBUG - Spectrum: [1. 1. 1. 1. 1.]...[15. 16. 16. 16. 16.]
2025-11-19 09:15:44,918 - linien_server.autolock.utils - DEBUG - Target indices: [1084, 1129]
2025-11-19 09:15:44,919 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-19 09:15:44,920 - linien_server.autolock.utils - DEBUG - Spectrum length:2043
2025-11-19 09:15:44,923 - linien_server.autolock.utils - DEBUG - Spectrum: [2 2 2 2 2]...[17 16 16 16 17]
2025-11-19 09:15:44,924 - linien_server.autolock.utils - DEBUG - Target indices: [1084, 1129]
2025-11-19 09:15:44,925 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-19 09:15:44,927 - linien_server.autolock.utils - DEBUG - Spectrum length:2043
2025-11-19 09:15:44,929 - linien_server.autolock.utils - DEBUG - Spectrum: [2 2 2 2 2]...[17 17 17 16 17]
2025-11-19 09:15:44,931 - linien_server.autolock.utils - DEBUG - Target indices: [1084, 1129]
2025-11-19 09:15:44,932 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-19 09:15:44,933 - linien_server.autolock.utils - DEBUG - Spectrum length:2043
2025-11-19 09:15:44,936 - linien_server.autolock.utils - DEBUG - Spectrum: [2 2 2 2 1]...[17 16 16 16 16]
2025-11-19 09:15:44,937 - linien_server.autolock.utils - DEBUG - Target indices: [1084, 1129]
2025-11-19 09:15:44,939 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-19 09:15:44,940 - linien_server.autolock.utils - DEBUG - Spectrum length:2043
2025-11-19 09:15:44,943 - linien_server.autolock.utils - DEBUG - Spectrum: [-3  2  1  1  1]...[16 16 16 16 16]
2025-11-19 09:15:44,944 - linien_server.autolock.utils - DEBUG - Target indices: [1084, 1129]
2025-11-19 09:15:44,946 - linien_server.autolock.robust - DEBUG - x scale is 41
2025-11-19 09:15:44,984 - linien_server.autolock.robust - DEBUG - shift prepared spectrum by 19 samples to the left to match the original spectrum
2025-11-19 09:15:45,074 - linien_server.autolock.robust - DEBUG - Detected peaks with (position, height): [(1103, 1098.0), (870, -50.0), (744, 1247.0), (687, -1778.0), (262, 141.0)]
2025-11-19 09:15:45,102 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [44, 65, 73, 74, 75, 76, 127, 128, 161, 162, 177, 251, 308, 355, 356, 426, 427, 445, 446, 458, 459, 475, 509, 684, 747, 857, 899, 900, 915, 963, 964, 979, 1099, 1161, 1330, 1331, 1348, 1579, 1606, 1607, 1830, 1839, 1951, 1966, 2017]
2025-11-19 09:15:45,106 - linien_server.autolock.utils - DEBUG - start_idx - time_scale//5: 1076
2025-11-19 09:15:45,109 - linien_server.autolock.utils - DEBUG - Considered zeros (backward): [44, 65, 73, 74, 75, 76, 127, 128, 161, 162, 177, 251, 308, 355, 356, 426, 427, 445, 446, 458, 459, 475, 509, 684, 747, 857, 899, 900, 915, 963, 964, 979]
2025-11-19 09:15:45,141 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [44, 65, 73, 74, 75, 76, 127, 128, 161, 162, 177, 251, 308, 355, 356, 426, 427, 445, 446, 458, 459, 475, 509, 684, 747, 857, 899, 900, 915, 963, 964, 979, 1099, 1161, 1330, 1331, 1348, 1579, 1606, 1607, 1830, 1839, 1951, 1966, 2017]
2025-11-19 09:15:45,145 - linien_server.autolock.utils - DEBUG - start_idx + time_scale//5: 1136
2025-11-19 09:15:45,148 - linien_server.autolock.utils - DEBUG - Considered zeros (forward): [1161, 1330, 1331, 1348, 1579, 1606, 1607, 1830, 1839, 1951, 1966, 2017]
2025-11-19 09:15:45,183 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [44, 65, 73, 74, 75, 76, 127, 128, 161, 162, 177, 251, 308, 355, 356, 426, 427, 445, 446, 458, 459, 475, 509, 684, 747, 857, 899, 900, 915, 963, 964, 979, 1099, 1161, 1330, 1331, 1348, 1579, 1606, 1607, 1830, 1839, 1951, 1966, 2017]
2025-11-19 09:15:45,187 - linien_server.autolock.utils - DEBUG - start_idx - time_scale//5: 1078
2025-11-19 09:15:45,192 - linien_server.autolock.utils - DEBUG - Considered zeros (backward): [44, 65, 73, 74, 75, 76, 127, 128, 161, 162, 177, 251, 308, 355, 356, 426, 427, 445, 446, 458, 459, 475, 509, 684, 747, 857, 899, 900, 915, 963, 964, 979]
2025-11-19 09:15:45,224 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [44, 65, 73, 74, 75, 76, 127, 128, 161, 162, 177, 251, 308, 355, 356, 426, 427, 445, 446, 458, 459, 475, 509, 684, 747, 857, 899, 900, 915, 963, 964, 979, 1099, 1161, 1330, 1331, 1348, 1579, 1606, 1607, 1830, 1839, 1951, 1966, 2017]
2025-11-19 09:15:45,227 - linien_server.autolock.utils - DEBUG - start_idx + time_scale//5: 1134
2025-11-19 09:15:45,230 - linien_server.autolock.utils - DEBUG - Considered zeros (forward): [1161, 1330, 1331, 1348, 1579, 1606, 1607, 1830, 1839, 1951, 1966, 2017]
2025-11-19 09:15:45,260 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [44, 65, 73, 74, 75, 76, 127, 128, 161, 162, 177, 251, 308, 355, 356, 426, 427, 445, 446, 458, 459, 475, 509, 684, 747, 857, 899, 900, 915, 963, 964, 979, 1099, 1161, 1330, 1331, 1348, 1579, 1606, 1607, 1830, 1839, 1951, 1966, 2017]
2025-11-19 09:15:45,261 - linien_server.autolock.utils - DEBUG - start_idx - time_scale//5: 1081
2025-11-19 09:15:45,263 - linien_server.autolock.utils - DEBUG - Considered zeros (backward): [44, 65, 73, 74, 75, 76, 127, 128, 161, 162, 177, 251, 308, 355, 356, 426, 427, 445, 446, 458, 459, 475, 509, 684, 747, 857, 899, 900, 915, 963, 964, 979]
2025-11-19 09:15:45,292 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [44, 65, 73, 74, 75, 76, 127, 128, 161, 162, 177, 251, 308, 355, 356, 426, 427, 445, 446, 458, 459, 475, 509, 684, 747, 857, 899, 900, 915, 963, 964, 979, 1099, 1161, 1330, 1331, 1348, 1579, 1606, 1607, 1830, 1839, 1951, 1966, 2017]
2025-11-19 09:15:45,294 - linien_server.autolock.utils - DEBUG - start_idx + time_scale//5: 1136
2025-11-19 09:15:45,295 - linien_server.autolock.utils - DEBUG - Considered zeros (forward): [1161, 1330, 1331, 1348, 1579, 1606, 1607, 1830, 1839, 1951, 1966, 2017]
2025-11-19 09:15:45,324 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [44, 65, 73, 74, 75, 76, 127, 128, 161, 162, 177, 251, 308, 355, 356, 426, 427, 445, 446, 458, 459, 475, 509, 684, 747, 857, 899, 900, 915, 963, 964, 979, 1099, 1161, 1330, 1331, 1348, 1579, 1606, 1607, 1830, 1839, 1951, 1966, 2017]
2025-11-19 09:15:45,325 - linien_server.autolock.utils - DEBUG - start_idx - time_scale//5: 1081
2025-11-19 09:15:45,327 - linien_server.autolock.utils - DEBUG - Considered zeros (backward): [44, 65, 73, 74, 75, 76, 127, 128, 161, 162, 177, 251, 308, 355, 356, 426, 427, 445, 446, 458, 459, 475, 509, 684, 747, 857, 899, 900, 915, 963, 964, 979]
2025-11-19 09:15:45,357 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [44, 65, 73, 74, 75, 76, 127, 128, 161, 162, 177, 251, 308, 355, 356, 426, 427, 445, 446, 458, 459, 475, 509, 684, 747, 857, 899, 900, 915, 963, 964, 979, 1099, 1161, 1330, 1331, 1348, 1579, 1606, 1607, 1830, 1839, 1951, 1966, 2017]
2025-11-19 09:15:45,359 - linien_server.autolock.utils - DEBUG - start_idx + time_scale//5: 1133
2025-11-19 09:15:45,362 - linien_server.autolock.utils - DEBUG - Considered zeros (forward): [1161, 1330, 1331, 1348, 1579, 1606, 1607, 1830, 1839, 1951, 1966, 2017]
2025-11-19 09:15:45,392 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [44, 65, 73, 74, 75, 76, 127, 128, 161, 162, 177, 251, 308, 355, 356, 426, 427, 445, 446, 458, 459, 475, 509, 684, 747, 857, 899, 900, 915, 963, 964, 979, 1099, 1161, 1330, 1331, 1348, 1579, 1606, 1607, 1830, 1839, 1951, 1966, 2017]
2025-11-19 09:15:45,393 - linien_server.autolock.utils - DEBUG - start_idx - time_scale//5: 1076
2025-11-19 09:15:45,394 - linien_server.autolock.utils - DEBUG - Considered zeros (backward): [44, 65, 73, 74, 75, 76, 127, 128, 161, 162, 177, 251, 308, 355, 356, 426, 427, 445, 446, 458, 459, 475, 509, 684, 747, 857, 899, 900, 915, 963, 964, 979]
2025-11-19 09:15:45,424 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [44, 65, 73, 74, 75, 76, 127, 128, 161, 162, 177, 251, 308, 355, 356, 426, 427, 445, 446, 458, 459, 475, 509, 684, 747, 857, 899, 900, 915, 963, 964, 979, 1099, 1161, 1330, 1331, 1348, 1579, 1606, 1607, 1830, 1839, 1951, 1966, 2017]
2025-11-19 09:15:45,425 - linien_server.autolock.utils - DEBUG - start_idx + time_scale//5: 1136
2025-11-19 09:15:45,426 - linien_server.autolock.utils - DEBUG - Considered zeros (forward): [1161, 1330, 1331, 1348, 1579, 1606, 1607, 1830, 1839, 1951, 1966, 2017]
2025-11-19 09:15:45,430 - linien_server.autolock.robust - DEBUG - Determined lock regions: [(981, 1161), (979, 1161), (979, 1161), (979, 1161), (979, 1161)]
2025-11-19 09:15:45,431 - linien_server.autolock.robust - DEBUG - Try out tolerance 0.95
2025-11-19 09:15:45,433 - linien_server.autolock.robust - DEBUG - Original peaks: [(1103, 1098.0), (870, -50.0), (744, 1247.0), (687, -1778.0), (262, 141.0)]
2025-11-19 09:15:45,434 - linien_server.autolock.robust - DEBUG - Filtered peaks: [(1103, 1043.1), (744, 1184.6499999999999), (687, -1689.1), (262, 133.95)]
2025-11-19 09:15:45,435 - linien_server.autolock.robust - DEBUG - Discarded peaks: [(1103, 1098.0), (870, -50.0), (744, 1247.0), (687, -1778.0), (262, 141.0)]
2025-11-19 09:15:45,437 - linien_server.autolock.robust - DEBUG - Target peak index in prepared spectrum: 1103
2025-11-19 09:15:45,439 - linien_server.autolock.robust - DEBUG - final wait time is 7 samples
2025-11-19 09:15:45,440 - linien_server.autolock.robust - DEBUG - Generated description: [(235, 133), (382, -1689), (51, 1184), (323, 1043)]
2025-11-19 09:15:45,468 - linien_server.autolock.robust - DEBUG - Lock position found at index 1103 for current spectrum
2025-11-19 09:15:45,495 - linien_server.autolock.robust - DEBUG - Lock position found at index 1101 for current spectrum
2025-11-19 09:15:45,521 - linien_server.autolock.robust - DEBUG - Lock position found at index 1102 for current spectrum
2025-11-19 09:15:45,548 - linien_server.autolock.robust - DEBUG - Lock position found at index 1101 for current spectrum
2025-11-19 09:15:45,574 - linien_server.autolock.robust - DEBUG - Lock position found at index 1099 for current spectrum
2025-11-19 09:15:45,576 - linien_server.autolock.robust - DEBUG - Description is [(235, 133), (382, -1689), (51, 1184), (323, 1043)]
2025-11-19 09:15:45,577 - linien_server.autolock.robust - DEBUG - Calculation of autolock description took 0.7774574756622314
2025-11-19 09:15:45,638 - linien_server.server - ERROR - incorrect data received for lock state, ignoring!
2025-11-19 09:15:51,362 - linien_server.autolock.robust - ERROR - Waited too long for autolock! Aborting
2025-11-19 09:17:43,022 - linien_server.cli - INFO - Stopping Linien server
2025-11-19 09:17:43,139 - linien_server.cli - INFO - Stopped Linien server
2025-11-19 09:17:46,459 - linien_server.cli - DEBUG - Copied linien-server.service to /etc/systemd/system
2025-11-19 09:17:46,461 - linien_server.cli - INFO - Starting Linien server
2025-11-19 09:17:46,534 - linien_server.cli - INFO - Started Linien server
2025-11-19 09:17:52,664 - linien_server.cli - DEBUG - Copied linien-server.service to /etc/systemd/system
2025-11-19 09:17:52,665 - linien_server.cli - INFO - Starting Linien server
2025-11-19 09:17:52,715 - linien_server.cli - INFO - Started Linien server
2025-11-19 09:18:03,715 - linien_server.parameters - INFO - Restoring parameters from /root/.local/share/linien/parameters.json
2025-11-19 09:18:03,718 - linien_server.parameters - INFO - Restored parameters from /root/.local/share/linien/parameters.json
2025-11-19 09:18:03,721 - linien_common.influxdb - INFO - Saved InfluxDB credentials to /root/.local/share/linien/influxdb_credentials.json
2025-11-19 09:18:03,913 - linien_server.acquisition - INFO - Using fpgautil to deploy gateware.
2025-11-19 09:18:04,057 - linien_server.server - DEBUG - Ping  1
2025-11-19 09:18:04,083 - linien_server.mdio_tool - INFO - Disabling ethernet blinking with mdio-tool at /usr/local/lib/python3.10/dist-packages/linien_server/mdio-tool
2025-11-19 09:18:04,113 - linien_server.server - INFO - Starting server.
2025-11-19 09:18:05,090 - linien_server.server - DEBUG - Ping  2
2025-11-19 09:18:06,123 - linien_server.server - DEBUG - Ping  3
2025-11-19 09:18:06,130 - linien_server.server - DEBUG - Further pings will be suppressed
2025-11-19 09:19:04,502 - linien_server.autolock.autolock - DEBUG - Initialize Autolock
2025-11-19 09:19:04,506 - linien_server.autolock.autolock - DEBUG - Start the autolock
2025-11-19 09:19:04,508 - linien_server.autolock.autolock - DEBUG - (x0, x1) = (1300,1600)
2025-11-19 09:19:04,514 - linien_server.autolock.autolock - DEBUG - Start autolock with mode 1
2025-11-19 09:19:04,853 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-19 09:19:04,856 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-19 09:19:04,857 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-19 09:19:04,956 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-19 09:19:04,985 - linien_server.autolock.robust - ERROR - Not enough spectra collected:2 of 5
2025-11-19 09:19:05,227 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-19 09:19:05,229 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-19 09:19:05,231 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-19 09:19:05,330 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-19 09:19:05,358 - linien_server.autolock.robust - ERROR - Not enough spectra collected:3 of 5
2025-11-19 09:19:05,589 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-19 09:19:05,593 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-19 09:19:05,595 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-19 09:19:05,694 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-19 09:19:05,722 - linien_server.autolock.robust - ERROR - Not enough spectra collected:4 of 5
2025-11-19 09:19:05,968 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-19 09:19:05,970 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-19 09:19:05,972 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-19 09:19:06,071 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-19 09:19:06,100 - linien_server.autolock.robust - DEBUG - enough spectra!, calculate
2025-11-19 09:19:06,101 - linien_server.autolock.robust - DEBUG - Entered in calculate_autolock_instructions_v2
2025-11-19 09:19:06,107 - linien_server.autolock.robust - DEBUG - Saved new robust_spectra.npy and target_idxs.npy
2025-11-19 09:19:06,108 - linien_server.autolock.utils - DEBUG - Entered in crop_spectra_to_same_view
2025-11-19 09:19:06,240 - linien_server.autolock.utils - DEBUG - Shifts calculated for cropping: [1, 6, 5, 5, 5]
2025-11-19 09:19:06,244 - linien_server.autolock.robust - DEBUG - Saved new robust_spectra_cropped.npy
2025-11-19 09:19:06,246 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-19 09:19:06,247 - linien_server.autolock.utils - DEBUG - Spectrum length:2043
2025-11-19 09:19:06,250 - linien_server.autolock.utils - DEBUG - Spectrum: [60 64 63 63 63]...[68 69 69 69 68]
2025-11-19 09:19:06,251 - linien_server.autolock.utils - DEBUG - Target indices: [1403, 1443]
2025-11-19 09:19:06,252 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-19 09:19:06,253 - linien_server.autolock.utils - DEBUG - Spectrum length:2043
2025-11-19 09:19:06,256 - linien_server.autolock.utils - DEBUG - Spectrum: [63 63 63 63 63]...[69 69 69 69 69]
2025-11-19 09:19:06,257 - linien_server.autolock.utils - DEBUG - Target indices: [1403, 1443]
2025-11-19 09:19:06,259 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-19 09:19:06,260 - linien_server.autolock.utils - DEBUG - Spectrum length:2043
2025-11-19 09:19:06,262 - linien_server.autolock.utils - DEBUG - Spectrum: [63 63 63 63 63]...[69 69 69 69 69]
2025-11-19 09:19:06,264 - linien_server.autolock.utils - DEBUG - Target indices: [1403, 1443]
2025-11-19 09:19:06,265 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-19 09:19:06,266 - linien_server.autolock.utils - DEBUG - Spectrum length:2043
2025-11-19 09:19:06,269 - linien_server.autolock.utils - DEBUG - Spectrum: [63 62 62 62 62]...[67 67 67 67 67]
2025-11-19 09:19:06,270 - linien_server.autolock.utils - DEBUG - Target indices: [1403, 1443]
2025-11-19 09:19:06,271 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-19 09:19:06,272 - linien_server.autolock.utils - DEBUG - Spectrum length:2043
2025-11-19 09:19:06,275 - linien_server.autolock.utils - DEBUG - Spectrum: [63 63 63 62 62]...[68 68 68 68 68]
2025-11-19 09:19:06,276 - linien_server.autolock.utils - DEBUG - Target indices: [1403, 1443]
2025-11-19 09:19:06,278 - linien_server.autolock.robust - DEBUG - x scale is 30
2025-11-19 09:19:06,331 - linien_server.autolock.robust - DEBUG - shift prepared spectrum by 9 samples to the left to match the original spectrum
2025-11-19 09:19:06,429 - linien_server.autolock.robust - DEBUG - Detected peaks with (position, height): [(1418, 2562)]
2025-11-19 09:19:06,454 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [43, 55, 90, 98, 101, 102, 120, 123, 124, 210, 211, 249, 250, 303, 304, 316, 317, 347, 382, 383, 427, 428, 429, 434, 473, 504, 601, 602, 628, 664, 733, 774, 808, 853, 884, 885, 904, 905, 906, 924, 1065, 1113, 1217, 1295, 1296, 1320, 1416, 1465, 1563, 1564, 1587, 1623, 1624, 1638, 1687, 1688, 1700, 1701, 1752, 1753, 1758, 1759, 1813, 1832, 1833, 1880, 1881, 1884, 1885, 1892, 1940, 1941, 1955, 1956, 2000, 2001, 2021]
2025-11-19 09:19:06,456 - linien_server.autolock.utils - DEBUG - start_idx - time_scale//5: 1397
2025-11-19 09:19:06,457 - linien_server.autolock.utils - DEBUG - Considered zeros (backward): [43, 55, 90, 98, 101, 102, 120, 123, 124, 210, 211, 249, 250, 303, 304, 316, 317, 347, 382, 383, 427, 428, 429, 434, 473, 504, 601, 602, 628, 664, 733, 774, 808, 853, 884, 885, 904, 905, 906, 924, 1065, 1113, 1217, 1295, 1296, 1320]
2025-11-19 09:19:06,566 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [43, 55, 90, 98, 101, 102, 120, 123, 124, 210, 211, 249, 250, 303, 304, 316, 317, 347, 382, 383, 427, 428, 429, 434, 473, 504, 601, 602, 628, 664, 733, 774, 808, 853, 884, 885, 904, 905, 906, 924, 1065, 1113, 1217, 1295, 1296, 1320, 1416, 1465, 1563, 1564, 1587, 1623, 1624, 1638, 1687, 1688, 1700, 1701, 1752, 1753, 1758, 1759, 1813, 1832, 1833, 1880, 1881, 1884, 1885, 1892, 1940, 1941, 1955, 1956, 2000, 2001, 2021]
2025-11-19 09:19:06,567 - linien_server.autolock.utils - DEBUG - start_idx + time_scale//5: 1448
2025-11-19 09:19:06,569 - linien_server.autolock.utils - DEBUG - Considered zeros (forward): [1465, 1563, 1564, 1587, 1623, 1624, 1638, 1687, 1688, 1700, 1701, 1752, 1753, 1758, 1759, 1813, 1832, 1833, 1880, 1881, 1884, 1885, 1892, 1940, 1941, 1955, 1956, 2000, 2001, 2021]
2025-11-19 09:19:06,636 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [43, 55, 90, 98, 101, 102, 120, 123, 124, 210, 211, 249, 250, 303, 304, 316, 317, 347, 382, 383, 427, 428, 429, 434, 473, 504, 601, 602, 628, 664, 733, 774, 808, 853, 884, 885, 904, 905, 906, 924, 1065, 1113, 1217, 1295, 1296, 1320, 1416, 1465, 1563, 1564, 1587, 1623, 1624, 1638, 1687, 1688, 1700, 1701, 1752, 1753, 1758, 1759, 1813, 1832, 1833, 1880, 1881, 1884, 1885, 1892, 1940, 1941, 1955, 1956, 2000, 2001, 2021]
2025-11-19 09:19:06,637 - linien_server.autolock.utils - DEBUG - start_idx - time_scale//5: 1407
2025-11-19 09:19:06,639 - linien_server.autolock.utils - DEBUG - Considered zeros (backward): [43, 55, 90, 98, 101, 102, 120, 123, 124, 210, 211, 249, 250, 303, 304, 316, 317, 347, 382, 383, 427, 428, 429, 434, 473, 504, 601, 602, 628, 664, 733, 774, 808, 853, 884, 885, 904, 905, 906, 924, 1065, 1113, 1217, 1295, 1296, 1320]
2025-11-19 09:19:06,673 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [43, 55, 90, 98, 101, 102, 120, 123, 124, 210, 211, 249, 250, 303, 304, 316, 317, 347, 382, 383, 427, 428, 429, 434, 473, 504, 601, 602, 628, 664, 733, 774, 808, 853, 884, 885, 904, 905, 906, 924, 1065, 1113, 1217, 1295, 1296, 1320, 1416, 1465, 1563, 1564, 1587, 1623, 1624, 1638, 1687, 1688, 1700, 1701, 1752, 1753, 1758, 1759, 1813, 1832, 1833, 1880, 1881, 1884, 1885, 1892, 1940, 1941, 1955, 1956, 2000, 2001, 2021]
2025-11-19 09:19:06,676 - linien_server.autolock.utils - DEBUG - start_idx + time_scale//5: 1448
2025-11-19 09:19:06,678 - linien_server.autolock.utils - DEBUG - Considered zeros (forward): [1465, 1563, 1564, 1587, 1623, 1624, 1638, 1687, 1688, 1700, 1701, 1752, 1753, 1758, 1759, 1813, 1832, 1833, 1880, 1881, 1884, 1885, 1892, 1940, 1941, 1955, 1956, 2000, 2001, 2021]
2025-11-19 09:19:06,715 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [43, 55, 90, 98, 101, 102, 120, 123, 124, 210, 211, 249, 250, 303, 304, 316, 317, 347, 382, 383, 427, 428, 429, 434, 473, 504, 601, 602, 628, 664, 733, 774, 808, 853, 884, 885, 904, 905, 906, 924, 1065, 1113, 1217, 1295, 1296, 1320, 1416, 1465, 1563, 1564, 1587, 1623, 1624, 1638, 1687, 1688, 1700, 1701, 1752, 1753, 1758, 1759, 1813, 1832, 1833, 1880, 1881, 1884, 1885, 1892, 1940, 1941, 1955, 1956, 2000, 2001, 2021]
2025-11-19 09:19:06,717 - linien_server.autolock.utils - DEBUG - start_idx - time_scale//5: 1407
2025-11-19 09:19:06,718 - linien_server.autolock.utils - DEBUG - Considered zeros (backward): [43, 55, 90, 98, 101, 102, 120, 123, 124, 210, 211, 249, 250, 303, 304, 316, 317, 347, 382, 383, 427, 428, 429, 434, 473, 504, 601, 602, 628, 664, 733, 774, 808, 853, 884, 885, 904, 905, 906, 924, 1065, 1113, 1217, 1295, 1296, 1320]
2025-11-19 09:19:06,772 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [43, 55, 90, 98, 101, 102, 120, 123, 124, 210, 211, 249, 250, 303, 304, 316, 317, 347, 382, 383, 427, 428, 429, 434, 473, 504, 601, 602, 628, 664, 733, 774, 808, 853, 884, 885, 904, 905, 906, 924, 1065, 1113, 1217, 1295, 1296, 1320, 1416, 1465, 1563, 1564, 1587, 1623, 1624, 1638, 1687, 1688, 1700, 1701, 1752, 1753, 1758, 1759, 1813, 1832, 1833, 1880, 1881, 1884, 1885, 1892, 1940, 1941, 1955, 1956, 2000, 2001, 2021]
2025-11-19 09:19:06,774 - linien_server.autolock.utils - DEBUG - start_idx + time_scale//5: 1448
2025-11-19 09:19:06,775 - linien_server.autolock.utils - DEBUG - Considered zeros (forward): [1465, 1563, 1564, 1587, 1623, 1624, 1638, 1687, 1688, 1700, 1701, 1752, 1753, 1758, 1759, 1813, 1832, 1833, 1880, 1881, 1884, 1885, 1892, 1940, 1941, 1955, 1956, 2000, 2001, 2021]
2025-11-19 09:19:06,813 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [43, 55, 90, 98, 101, 102, 120, 123, 124, 210, 211, 249, 250, 303, 304, 316, 317, 347, 382, 383, 427, 428, 429, 434, 473, 504, 601, 602, 628, 664, 733, 774, 808, 853, 884, 885, 904, 905, 906, 924, 1065, 1113, 1217, 1295, 1296, 1320, 1416, 1465, 1563, 1564, 1587, 1623, 1624, 1638, 1687, 1688, 1700, 1701, 1752, 1753, 1758, 1759, 1813, 1832, 1833, 1880, 1881, 1884, 1885, 1892, 1940, 1941, 1955, 1956, 2000, 2001, 2021]
2025-11-19 09:19:06,814 - linien_server.autolock.utils - DEBUG - start_idx - time_scale//5: 1406
2025-11-19 09:19:06,816 - linien_server.autolock.utils - DEBUG - Considered zeros (backward): [43, 55, 90, 98, 101, 102, 120, 123, 124, 210, 211, 249, 250, 303, 304, 316, 317, 347, 382, 383, 427, 428, 429, 434, 473, 504, 601, 602, 628, 664, 733, 774, 808, 853, 884, 885, 904, 905, 906, 924, 1065, 1113, 1217, 1295, 1296, 1320]
2025-11-19 09:19:06,870 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [43, 55, 90, 98, 101, 102, 120, 123, 124, 210, 211, 249, 250, 303, 304, 316, 317, 347, 382, 383, 427, 428, 429, 434, 473, 504, 601, 602, 628, 664, 733, 774, 808, 853, 884, 885, 904, 905, 906, 924, 1065, 1113, 1217, 1295, 1296, 1320, 1416, 1465, 1563, 1564, 1587, 1623, 1624, 1638, 1687, 1688, 1700, 1701, 1752, 1753, 1758, 1759, 1813, 1832, 1833, 1880, 1881, 1884, 1885, 1892, 1940, 1941, 1955, 1956, 2000, 2001, 2021]
2025-11-19 09:19:06,871 - linien_server.autolock.utils - DEBUG - start_idx + time_scale//5: 1448
2025-11-19 09:19:06,873 - linien_server.autolock.utils - DEBUG - Considered zeros (forward): [1465, 1563, 1564, 1587, 1623, 1624, 1638, 1687, 1688, 1700, 1701, 1752, 1753, 1758, 1759, 1813, 1832, 1833, 1880, 1881, 1884, 1885, 1892, 1940, 1941, 1955, 1956, 2000, 2001, 2021]
2025-11-19 09:19:06,910 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [43, 55, 90, 98, 101, 102, 120, 123, 124, 210, 211, 249, 250, 303, 304, 316, 317, 347, 382, 383, 427, 428, 429, 434, 473, 504, 601, 602, 628, 664, 733, 774, 808, 853, 884, 885, 904, 905, 906, 924, 1065, 1113, 1217, 1295, 1296, 1320, 1416, 1465, 1563, 1564, 1587, 1623, 1624, 1638, 1687, 1688, 1700, 1701, 1752, 1753, 1758, 1759, 1813, 1832, 1833, 1880, 1881, 1884, 1885, 1892, 1940, 1941, 1955, 1956, 2000, 2001, 2021]
2025-11-19 09:19:06,912 - linien_server.autolock.utils - DEBUG - start_idx - time_scale//5: 1412
2025-11-19 09:19:06,913 - linien_server.autolock.utils - DEBUG - Considered zeros (backward): [43, 55, 90, 98, 101, 102, 120, 123, 124, 210, 211, 249, 250, 303, 304, 316, 317, 347, 382, 383, 427, 428, 429, 434, 473, 504, 601, 602, 628, 664, 733, 774, 808, 853, 884, 885, 904, 905, 906, 924, 1065, 1113, 1217, 1295, 1296, 1320]
2025-11-19 09:19:06,967 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [43, 55, 90, 98, 101, 102, 120, 123, 124, 210, 211, 249, 250, 303, 304, 316, 317, 347, 382, 383, 427, 428, 429, 434, 473, 504, 601, 602, 628, 664, 733, 774, 808, 853, 884, 885, 904, 905, 906, 924, 1065, 1113, 1217, 1295, 1296, 1320, 1416, 1465, 1563, 1564, 1587, 1623, 1624, 1638, 1687, 1688, 1700, 1701, 1752, 1753, 1758, 1759, 1813, 1832, 1833, 1880, 1881, 1884, 1885, 1892, 1940, 1941, 1955, 1956, 2000, 2001, 2021]
2025-11-19 09:19:06,968 - linien_server.autolock.utils - DEBUG - start_idx + time_scale//5: 1448
2025-11-19 09:19:06,970 - linien_server.autolock.utils - DEBUG - Considered zeros (forward): [1465, 1563, 1564, 1587, 1623, 1624, 1638, 1687, 1688, 1700, 1701, 1752, 1753, 1758, 1759, 1813, 1832, 1833, 1880, 1881, 1884, 1885, 1892, 1940, 1941, 1955, 1956, 2000, 2001, 2021]
2025-11-19 09:19:06,984 - linien_server.autolock.robust - DEBUG - Determined lock regions: [(1320, 1465), (1320, 1465), (1320, 1465), (1320, 1465), (1320, 1465)]
2025-11-19 09:19:06,985 - linien_server.autolock.robust - DEBUG - Try out tolerance 0.95
2025-11-19 09:19:06,987 - linien_server.autolock.robust - DEBUG - Original peaks: [(1418, 2562)]
2025-11-19 09:19:06,988 - linien_server.autolock.robust - DEBUG - Filtered peaks: [(1418, 2433.9)]
2025-11-19 09:19:06,989 - linien_server.autolock.robust - DEBUG - Discarded peaks: [(1418, 2562)]
2025-11-19 09:19:06,991 - linien_server.autolock.robust - DEBUG - Target peak index in prepared spectrum: 1418
2025-11-19 09:19:06,993 - linien_server.autolock.robust - DEBUG - final wait time is 10 samples
2025-11-19 09:19:06,994 - linien_server.autolock.robust - DEBUG - Generated description: [(1276, 2433)]
2025-11-19 09:19:07,029 - linien_server.autolock.robust - DEBUG - Lock position found at index 1419 for current spectrum
2025-11-19 09:19:07,062 - linien_server.autolock.robust - DEBUG - Lock position found at index 1429 for current spectrum
2025-11-19 09:19:07,093 - linien_server.autolock.robust - DEBUG - Lock position found at index 1425 for current spectrum
2025-11-19 09:19:07,124 - linien_server.autolock.robust - DEBUG - Lock position found at index 1427 for current spectrum
2025-11-19 09:19:07,154 - linien_server.autolock.robust - DEBUG - Lock position found at index 1426 for current spectrum
2025-11-19 09:19:07,156 - linien_server.autolock.robust - DEBUG - Description is [(1276, 2433)]
2025-11-19 09:19:07,157 - linien_server.autolock.robust - DEBUG - Calculation of autolock description took 1.0560221672058105
2025-11-19 09:19:07,217 - linien_server.server - ERROR - incorrect data received for lock state, ignoring!
2025-11-19 09:19:07,491 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-19 09:19:07,493 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-19 09:19:07,496 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-19 09:19:07,498 - linien_server.autolock.autolock - DEBUG - after lock
2025-11-19 09:56:58,003 - linien_server.cli - INFO - Stopping Linien server
2025-11-19 09:56:58,247 - linien_server.cli - INFO - Stopped Linien server
2025-11-19 09:57:01,603 - linien_server.cli - DEBUG - Copied linien-server.service to /etc/systemd/system
2025-11-19 09:57:01,605 - linien_server.cli - INFO - Starting Linien server
2025-11-19 09:57:01,676 - linien_server.cli - INFO - Started Linien server
2025-11-19 09:57:17,011 - linien_server.cli - DEBUG - Copied linien-server.service to /etc/systemd/system
2025-11-19 09:57:17,013 - linien_server.cli - INFO - Starting Linien server
2025-11-19 09:57:17,063 - linien_server.cli - INFO - Started Linien server
2025-11-19 09:57:19,840 - linien_server.parameters - INFO - Restoring parameters from /root/.local/share/linien/parameters.json
2025-11-19 09:57:19,844 - linien_server.parameters - INFO - Restored parameters from /root/.local/share/linien/parameters.json
2025-11-19 09:57:19,849 - linien_common.influxdb - INFO - Saved InfluxDB credentials to /root/.local/share/linien/influxdb_credentials.json
2025-11-19 09:57:20,075 - linien_server.acquisition - INFO - Using fpgautil to deploy gateware.
2025-11-19 09:57:20,306 - linien_server.server - DEBUG - Ping  1
2025-11-19 09:57:20,321 - linien_server.mdio_tool - INFO - Disabling ethernet blinking with mdio-tool at /usr/local/lib/python3.10/dist-packages/linien_server/mdio-tool
2025-11-19 09:57:20,374 - linien_server.server - INFO - Starting server.
2025-11-19 09:57:21,327 - linien_server.server - DEBUG - Ping  2
2025-11-19 09:57:22,354 - linien_server.server - DEBUG - Ping  3
2025-11-19 09:57:22,372 - linien_server.server - DEBUG - Further pings will be suppressed
2025-11-19 09:58:50,939 - linien_server.autolock.autolock - DEBUG - Initialize Autolock
2025-11-19 09:58:50,963 - linien_server.autolock.autolock - DEBUG - Start the autolock
2025-11-19 09:58:50,981 - linien_server.autolock.autolock - DEBUG - (x0, x1) = (815,999)
2025-11-19 09:58:50,988 - linien_server.autolock.autolock - DEBUG - Start autolock with mode 1
2025-11-19 09:58:51,349 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-19 09:58:51,353 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-19 09:58:51,355 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-19 09:58:51,456 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-19 09:58:51,485 - linien_server.autolock.robust - ERROR - Not enough spectra collected:2 of 5
2025-11-19 09:58:51,740 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-19 09:58:51,743 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-19 09:58:51,745 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-19 09:58:51,844 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-19 09:58:51,873 - linien_server.autolock.robust - ERROR - Not enough spectra collected:3 of 5
2025-11-19 09:58:52,030 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-19 09:58:52,034 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-19 09:58:52,036 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-19 09:58:52,136 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-19 09:58:52,165 - linien_server.autolock.robust - ERROR - Not enough spectra collected:4 of 5
2025-11-19 09:58:52,430 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-19 09:58:52,432 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-19 09:58:52,434 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-19 09:58:52,534 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-19 09:58:52,563 - linien_server.autolock.robust - DEBUG - enough spectra!, calculate
2025-11-19 09:58:52,564 - linien_server.autolock.robust - DEBUG - Entered in calculate_autolock_instructions_v2
2025-11-19 09:58:52,570 - linien_server.autolock.robust - DEBUG - Saved new robust_spectra.npy and target_idxs.npy
2025-11-19 09:58:52,572 - linien_server.autolock.utils - DEBUG - Entered in crop_spectra_to_same_view
2025-11-19 09:58:52,669 - linien_server.autolock.utils - DEBUG - Shifts calculated for cropping: [1, 1, -4, -7, -2]
2025-11-19 09:58:52,674 - linien_server.autolock.robust - DEBUG - Saved new robust_spectra_cropped.npy
2025-11-19 09:58:52,675 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-19 09:58:52,676 - linien_server.autolock.utils - DEBUG - Spectrum length:2040
2025-11-19 09:58:52,681 - linien_server.autolock.utils - DEBUG - Spectrum: [-1. -1. -2. -2. -2.]...[17. 17. 17. 17. 16.]
2025-11-19 09:58:52,682 - linien_server.autolock.utils - DEBUG - Target indices: [912, 952]
2025-11-19 09:58:52,684 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-19 09:58:52,685 - linien_server.autolock.utils - DEBUG - Spectrum length:2040
2025-11-19 09:58:52,688 - linien_server.autolock.utils - DEBUG - Spectrum: [ 0  0  0 -1 -1]...[17 17 17 17 17]
2025-11-19 09:58:52,689 - linien_server.autolock.utils - DEBUG - Target indices: [912, 952]
2025-11-19 09:58:52,690 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-19 09:58:52,691 - linien_server.autolock.utils - DEBUG - Spectrum length:2040
2025-11-19 09:58:52,694 - linien_server.autolock.utils - DEBUG - Spectrum: [ 0 -1 -1 -1 -1]...[17 17 17 17 17]
2025-11-19 09:58:52,695 - linien_server.autolock.utils - DEBUG - Target indices: [912, 952]
2025-11-19 09:58:52,697 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-19 09:58:52,698 - linien_server.autolock.utils - DEBUG - Spectrum length:2040
2025-11-19 09:58:52,701 - linien_server.autolock.utils - DEBUG - Spectrum: [-42  -2  -2  -2  -2]...[15 15 15 15 15]
2025-11-19 09:58:52,702 - linien_server.autolock.utils - DEBUG - Target indices: [912, 952]
2025-11-19 09:58:52,703 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-19 09:58:52,704 - linien_server.autolock.utils - DEBUG - Spectrum length:2040
2025-11-19 09:58:52,707 - linien_server.autolock.utils - DEBUG - Spectrum: [-2 -2 -2 -2 -2]...[15 16 15 15 15]
2025-11-19 09:58:52,709 - linien_server.autolock.utils - DEBUG - Target indices: [912, 952]
2025-11-19 09:58:52,710 - linien_server.autolock.robust - DEBUG - x scale is 37
2025-11-19 09:58:52,750 - linien_server.autolock.robust - DEBUG - shift prepared spectrum by 17 samples to the left to match the original spectrum
2025-11-19 09:58:52,819 - linien_server.autolock.robust - DEBUG - Detected peaks with (position, height): [(929, 1114.0), (667, -178.0), (572, 933.0), (517, -1864.0), (76, 28.0), (38, -59.0)]
2025-11-19 09:58:52,846 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [34, 72, 126, 172, 287, 319, 513, 574, 664, 692, 713, 714, 770, 771, 805, 806, 925, 981, 1054, 1093, 1319, 1333, 1437, 1438, 1450, 1565, 1632, 1633, 1688, 1697, 1813, 1826, 1827, 1856, 1857, 1887, 1888, 1933, 1960, 1961, 1991, 1992, 2018]
2025-11-19 09:58:52,847 - linien_server.autolock.utils - DEBUG - start_idx - time_scale//5: 905
2025-11-19 09:58:52,849 - linien_server.autolock.utils - DEBUG - Considered zeros (backward): [34, 72, 126, 172, 287, 319, 513, 574, 664, 692, 713, 714, 770, 771, 805, 806]
2025-11-19 09:58:52,877 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [34, 72, 126, 172, 287, 319, 513, 574, 664, 692, 713, 714, 770, 771, 805, 806, 925, 981, 1054, 1093, 1319, 1333, 1437, 1438, 1450, 1565, 1632, 1633, 1688, 1697, 1813, 1826, 1827, 1856, 1857, 1887, 1888, 1933, 1960, 1961, 1991, 1992, 2018]
2025-11-19 09:58:52,878 - linien_server.autolock.utils - DEBUG - start_idx + time_scale//5: 958
2025-11-19 09:58:52,880 - linien_server.autolock.utils - DEBUG - Considered zeros (forward): [981, 1054, 1093, 1319, 1333, 1437, 1438, 1450, 1565, 1632, 1633, 1688, 1697, 1813, 1826, 1827, 1856, 1857, 1887, 1888, 1933, 1960, 1961, 1991, 1992, 2018]
2025-11-19 09:58:52,911 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [34, 72, 126, 172, 287, 319, 513, 574, 664, 692, 713, 714, 770, 771, 805, 806, 925, 981, 1054, 1093, 1319, 1333, 1437, 1438, 1450, 1565, 1632, 1633, 1688, 1697, 1813, 1826, 1827, 1856, 1857, 1887, 1888, 1933, 1960, 1961, 1991, 1992, 2018]
2025-11-19 09:58:52,912 - linien_server.autolock.utils - DEBUG - start_idx - time_scale//5: 905
2025-11-19 09:58:52,914 - linien_server.autolock.utils - DEBUG - Considered zeros (backward): [34, 72, 126, 172, 287, 319, 513, 574, 664, 692, 713, 714, 770, 771, 805, 806]
2025-11-19 09:58:52,942 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [34, 72, 126, 172, 287, 319, 513, 574, 664, 692, 713, 714, 770, 771, 805, 806, 925, 981, 1054, 1093, 1319, 1333, 1437, 1438, 1450, 1565, 1632, 1633, 1688, 1697, 1813, 1826, 1827, 1856, 1857, 1887, 1888, 1933, 1960, 1961, 1991, 1992, 2018]
2025-11-19 09:58:52,943 - linien_server.autolock.utils - DEBUG - start_idx + time_scale//5: 955
2025-11-19 09:58:52,945 - linien_server.autolock.utils - DEBUG - Considered zeros (forward): [981, 1054, 1093, 1319, 1333, 1437, 1438, 1450, 1565, 1632, 1633, 1688, 1697, 1813, 1826, 1827, 1856, 1857, 1887, 1888, 1933, 1960, 1961, 1991, 1992, 2018]
2025-11-19 09:58:52,975 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [34, 72, 126, 172, 287, 319, 513, 574, 664, 692, 713, 714, 770, 771, 805, 806, 925, 981, 1054, 1093, 1319, 1333, 1437, 1438, 1450, 1565, 1632, 1633, 1688, 1697, 1813, 1826, 1827, 1856, 1857, 1887, 1888, 1933, 1960, 1961, 1991, 1992, 2018]
2025-11-19 09:58:52,977 - linien_server.autolock.utils - DEBUG - start_idx - time_scale//5: 910
2025-11-19 09:58:52,978 - linien_server.autolock.utils - DEBUG - Considered zeros (backward): [34, 72, 126, 172, 287, 319, 513, 574, 664, 692, 713, 714, 770, 771, 805, 806]
2025-11-19 09:58:53,007 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [34, 72, 126, 172, 287, 319, 513, 574, 664, 692, 713, 714, 770, 771, 805, 806, 925, 981, 1054, 1093, 1319, 1333, 1437, 1438, 1450, 1565, 1632, 1633, 1688, 1697, 1813, 1826, 1827, 1856, 1857, 1887, 1888, 1933, 1960, 1961, 1991, 1992, 2018]
2025-11-19 09:58:53,008 - linien_server.autolock.utils - DEBUG - start_idx + time_scale//5: 958
2025-11-19 09:58:53,009 - linien_server.autolock.utils - DEBUG - Considered zeros (forward): [981, 1054, 1093, 1319, 1333, 1437, 1438, 1450, 1565, 1632, 1633, 1688, 1697, 1813, 1826, 1827, 1856, 1857, 1887, 1888, 1933, 1960, 1961, 1991, 1992, 2018]
2025-11-19 09:58:53,038 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [34, 72, 126, 172, 287, 319, 513, 574, 664, 692, 713, 714, 770, 771, 805, 806, 925, 981, 1054, 1093, 1319, 1333, 1437, 1438, 1450, 1565, 1632, 1633, 1688, 1697, 1813, 1826, 1827, 1856, 1857, 1887, 1888, 1933, 1960, 1961, 1991, 1992, 2018]
2025-11-19 09:58:53,042 - linien_server.autolock.utils - DEBUG - start_idx - time_scale//5: 905
2025-11-19 09:58:53,044 - linien_server.autolock.utils - DEBUG - Considered zeros (backward): [34, 72, 126, 172, 287, 319, 513, 574, 664, 692, 713, 714, 770, 771, 805, 806]
2025-11-19 09:58:53,074 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [34, 72, 126, 172, 287, 319, 513, 574, 664, 692, 713, 714, 770, 771, 805, 806, 925, 981, 1054, 1093, 1319, 1333, 1437, 1438, 1450, 1565, 1632, 1633, 1688, 1697, 1813, 1826, 1827, 1856, 1857, 1887, 1888, 1933, 1960, 1961, 1991, 1992, 2018]
2025-11-19 09:58:53,075 - linien_server.autolock.utils - DEBUG - start_idx + time_scale//5: 958
2025-11-19 09:58:53,077 - linien_server.autolock.utils - DEBUG - Considered zeros (forward): [981, 1054, 1093, 1319, 1333, 1437, 1438, 1450, 1565, 1632, 1633, 1688, 1697, 1813, 1826, 1827, 1856, 1857, 1887, 1888, 1933, 1960, 1961, 1991, 1992, 2018]
2025-11-19 09:58:53,109 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [34, 72, 126, 172, 287, 319, 513, 574, 664, 692, 713, 714, 770, 771, 805, 806, 925, 981, 1054, 1093, 1319, 1333, 1437, 1438, 1450, 1565, 1632, 1633, 1688, 1697, 1813, 1826, 1827, 1856, 1857, 1887, 1888, 1933, 1960, 1961, 1991, 1992, 2018]
2025-11-19 09:58:53,111 - linien_server.autolock.utils - DEBUG - start_idx - time_scale//5: 905
2025-11-19 09:58:53,113 - linien_server.autolock.utils - DEBUG - Considered zeros (backward): [34, 72, 126, 172, 287, 319, 513, 574, 664, 692, 713, 714, 770, 771, 805, 806]
2025-11-19 09:58:53,143 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [34, 72, 126, 172, 287, 319, 513, 574, 664, 692, 713, 714, 770, 771, 805, 806, 925, 981, 1054, 1093, 1319, 1333, 1437, 1438, 1450, 1565, 1632, 1633, 1688, 1697, 1813, 1826, 1827, 1856, 1857, 1887, 1888, 1933, 1960, 1961, 1991, 1992, 2018]
2025-11-19 09:58:53,144 - linien_server.autolock.utils - DEBUG - start_idx + time_scale//5: 955
2025-11-19 09:58:53,146 - linien_server.autolock.utils - DEBUG - Considered zeros (forward): [981, 1054, 1093, 1319, 1333, 1437, 1438, 1450, 1565, 1632, 1633, 1688, 1697, 1813, 1826, 1827, 1856, 1857, 1887, 1888, 1933, 1960, 1961, 1991, 1992, 2018]
2025-11-19 09:58:53,152 - linien_server.autolock.robust - DEBUG - Determined lock regions: [(846, 981), (836, 981), (839, 981), (842, 981), (850, 981)]
2025-11-19 09:58:53,153 - linien_server.autolock.robust - DEBUG - Try out tolerance 0.95
2025-11-19 09:58:53,155 - linien_server.autolock.robust - DEBUG - Original peaks: [(929, 1114.0), (667, -178.0), (572, 933.0), (517, -1864.0), (76, 28.0), (38, -59.0)]
2025-11-19 09:58:53,156 - linien_server.autolock.robust - DEBUG - Filtered peaks: [(929, 1058.3), (667, -169.1), (572, 886.3499999999999), (517, -1770.8), (38, -56.05)]
2025-11-19 09:58:53,157 - linien_server.autolock.robust - DEBUG - Discarded peaks: [(929, 1114.0), (667, -178.0), (572, 933.0), (517, -1864.0), (76, 28.0), (38, -59.0)]
2025-11-19 09:58:53,159 - linien_server.autolock.robust - DEBUG - Target peak index in prepared spectrum: 929
2025-11-19 09:58:53,161 - linien_server.autolock.robust - DEBUG - final wait time is 9 samples
2025-11-19 09:58:53,162 - linien_server.autolock.robust - DEBUG - Generated description: [(34, -56), (431, -1770), (49, 886), (85, -169), (235, 1058)]
2025-11-19 09:58:53,187 - linien_server.autolock.robust - DEBUG - Lock position found at index 930 for current spectrum
2025-11-19 09:58:53,276 - linien_server.autolock.robust - DEBUG - Lock position found at index 930 for current spectrum
2025-11-19 09:58:53,309 - linien_server.autolock.robust - DEBUG - Try out tolerance 0.9
2025-11-19 09:58:53,311 - linien_server.autolock.robust - DEBUG - Original peaks: [(929, 1114.0), (667, -178.0), (572, 933.0), (517, -1864.0), (76, 28.0), (38, -59.0)]
2025-11-19 09:58:53,313 - linien_server.autolock.robust - DEBUG - Filtered peaks: [(929, 1002.6), (667, -160.20000000000002), (572, 839.7), (517, -1677.6000000000001)]
2025-11-19 09:58:53,314 - linien_server.autolock.robust - DEBUG - Discarded peaks: [(929, 1114.0), (667, -178.0), (572, 933.0), (517, -1864.0), (76, 28.0), (38, -59.0)]
2025-11-19 09:58:53,316 - linien_server.autolock.robust - DEBUG - Target peak index in prepared spectrum: 929
2025-11-19 09:58:53,317 - linien_server.autolock.robust - DEBUG - final wait time is 12 samples
2025-11-19 09:58:53,319 - linien_server.autolock.robust - DEBUG - Generated description: [(465, -1677), (49, 839), (85, -160), (235, 1002)]
2025-11-19 09:58:53,344 - linien_server.autolock.robust - DEBUG - Lock position found at index 930 for current spectrum
2025-11-19 09:58:53,438 - linien_server.autolock.robust - DEBUG - Lock position found at index 930 for current spectrum
2025-11-19 09:58:53,474 - linien_server.autolock.robust - DEBUG - Try out tolerance 0.85
2025-11-19 09:58:53,475 - linien_server.autolock.robust - DEBUG - Original peaks: [(929, 1114.0), (667, -178.0), (572, 933.0), (517, -1864.0), (76, 28.0), (38, -59.0)]
2025-11-19 09:58:53,477 - linien_server.autolock.robust - DEBUG - Filtered peaks: [(929, 946.9), (572, 793.05), (517, -1584.3999999999999)]
2025-11-19 09:58:53,478 - linien_server.autolock.robust - DEBUG - Discarded peaks: [(929, 1114.0), (667, -178.0), (572, 933.0), (517, -1864.0), (76, 28.0), (38, -59.0)]
2025-11-19 09:58:53,480 - linien_server.autolock.robust - DEBUG - Target peak index in prepared spectrum: 929
2025-11-19 09:58:53,482 - linien_server.autolock.robust - DEBUG - final wait time is 14 samples
2025-11-19 09:58:53,483 - linien_server.autolock.robust - DEBUG - Generated description: [(465, -1584), (49, 793), (321, 946)]
2025-11-19 09:58:53,510 - linien_server.autolock.robust - DEBUG - Lock position found at index 930 for current spectrum
2025-11-19 09:58:53,536 - linien_server.autolock.robust - DEBUG - Lock position found at index 924 for current spectrum
2025-11-19 09:58:53,560 - linien_server.autolock.robust - DEBUG - Lock position found at index 931 for current spectrum
2025-11-19 09:58:53,584 - linien_server.autolock.robust - DEBUG - Lock position found at index 930 for current spectrum
2025-11-19 09:58:53,608 - linien_server.autolock.robust - DEBUG - Lock position found at index 928 for current spectrum
2025-11-19 09:58:53,609 - linien_server.autolock.robust - DEBUG - Description is [(465, -1584), (49, 793), (321, 946)]
2025-11-19 09:58:53,611 - linien_server.autolock.robust - DEBUG - Calculation of autolock description took 1.0464651584625244
2025-11-19 09:58:53,671 - linien_server.server - ERROR - incorrect data received for lock state, ignoring!
2025-11-19 09:58:58,884 - linien_server.autolock.robust - ERROR - Waited too long for autolock! Aborting
2025-11-19 10:59:29,495 - linien_server.cli - INFO - Stopping Linien server
2025-11-19 10:59:29,603 - linien_server.cli - INFO - Stopped Linien server
2025-11-19 10:59:32,764 - linien_server.cli - DEBUG - Copied linien-server.service to /etc/systemd/system
2025-11-19 10:59:32,765 - linien_server.cli - INFO - Starting Linien server
2025-11-19 10:59:32,833 - linien_server.cli - INFO - Started Linien server
2025-11-19 10:59:43,762 - linien_server.cli - DEBUG - Copied linien-server.service to /etc/systemd/system
2025-11-19 10:59:43,763 - linien_server.cli - INFO - Starting Linien server
2025-11-19 10:59:43,815 - linien_server.cli - INFO - Started Linien server
2025-11-19 10:59:50,575 - linien_server.parameters - INFO - Restoring parameters from /root/.local/share/linien/parameters.json
2025-11-19 10:59:50,578 - linien_server.parameters - INFO - Restored parameters from /root/.local/share/linien/parameters.json
2025-11-19 10:59:50,582 - linien_common.influxdb - INFO - Saved InfluxDB credentials to /root/.local/share/linien/influxdb_credentials.json
2025-11-19 10:59:50,779 - linien_server.acquisition - INFO - Using fpgautil to deploy gateware.
2025-11-19 10:59:50,917 - linien_server.server - DEBUG - Ping  1
2025-11-19 10:59:50,960 - linien_server.mdio_tool - INFO - Disabling ethernet blinking with mdio-tool at /usr/local/lib/python3.10/dist-packages/linien_server/mdio-tool
2025-11-19 10:59:51,001 - linien_server.server - INFO - Starting server.
2025-11-19 10:59:51,952 - linien_server.server - DEBUG - Ping  2
2025-11-19 10:59:52,980 - linien_server.server - DEBUG - Ping  3
2025-11-19 10:59:53,002 - linien_server.server - DEBUG - Further pings will be suppressed
2025-11-19 11:00:37,919 - linien_server.autolock.autolock - DEBUG - Initialize Autolock
2025-11-19 11:00:37,944 - linien_server.autolock.autolock - DEBUG - Start the autolock
2025-11-19 11:00:37,961 - linien_server.autolock.autolock - DEBUG - (x0, x1) = (1400,1750)
2025-11-19 11:00:37,997 - linien_server.autolock.autolock - DEBUG - Start autolock with mode 1
2025-11-19 11:00:38,175 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-19 11:00:38,178 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-19 11:00:38,180 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-19 11:00:38,282 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-19 11:00:38,312 - linien_server.autolock.robust - ERROR - Not enough spectra collected:2 of 5
2025-11-19 11:00:38,556 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-19 11:00:38,559 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-19 11:00:38,561 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-19 11:00:38,662 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-19 11:00:38,691 - linien_server.autolock.robust - ERROR - Not enough spectra collected:3 of 5
2025-11-19 11:00:38,937 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-19 11:00:38,941 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-19 11:00:38,943 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-19 11:00:39,045 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-19 11:00:39,073 - linien_server.autolock.robust - ERROR - Not enough spectra collected:4 of 5
2025-11-19 11:00:39,325 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-19 11:00:39,327 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-19 11:00:39,328 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-19 11:00:39,430 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-19 11:00:39,458 - linien_server.autolock.robust - DEBUG - enough spectra!, calculate
2025-11-19 11:00:39,459 - linien_server.autolock.robust - DEBUG - Entered in calculate_autolock_instructions_v2
2025-11-19 11:00:39,465 - linien_server.autolock.robust - DEBUG - Saved new robust_spectra.npy and target_idxs.npy
2025-11-19 11:00:39,466 - linien_server.autolock.utils - DEBUG - Entered in crop_spectra_to_same_view
2025-11-19 11:00:39,598 - linien_server.autolock.utils - DEBUG - Shifts calculated for cropping: [1, 1, 0, -1, -2]
2025-11-19 11:00:39,602 - linien_server.autolock.robust - DEBUG - Saved new robust_spectra_cropped.npy
2025-11-19 11:00:39,604 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-19 11:00:39,605 - linien_server.autolock.utils - DEBUG - Spectrum length:2045
2025-11-19 11:00:39,609 - linien_server.autolock.utils - DEBUG - Spectrum: [73 74 73 73 73]...[73 72 72 72 71]
2025-11-19 11:00:39,610 - linien_server.autolock.utils - DEBUG - Target indices: [1574, 1618]
2025-11-19 11:00:39,612 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-19 11:00:39,613 - linien_server.autolock.utils - DEBUG - Spectrum length:2045
2025-11-19 11:00:39,615 - linien_server.autolock.utils - DEBUG - Spectrum: [74 74 74 74 74]...[73 73 73 73 73]
2025-11-19 11:00:39,617 - linien_server.autolock.utils - DEBUG - Target indices: [1574, 1618]
2025-11-19 11:00:39,618 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-19 11:00:39,619 - linien_server.autolock.utils - DEBUG - Spectrum length:2045
2025-11-19 11:00:39,622 - linien_server.autolock.utils - DEBUG - Spectrum: [74 74 74 75 75]...[73 74 74 74 74]
2025-11-19 11:00:39,623 - linien_server.autolock.utils - DEBUG - Target indices: [1574, 1618]
2025-11-19 11:00:39,624 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-19 11:00:39,625 - linien_server.autolock.utils - DEBUG - Spectrum length:2045
2025-11-19 11:00:39,628 - linien_server.autolock.utils - DEBUG - Spectrum: [74 73 73 73 73]...[74 74 73 73 73]
2025-11-19 11:00:39,629 - linien_server.autolock.utils - DEBUG - Target indices: [1574, 1618]
2025-11-19 11:00:39,631 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-19 11:00:39,632 - linien_server.autolock.utils - DEBUG - Spectrum length:2045
2025-11-19 11:00:39,635 - linien_server.autolock.utils - DEBUG - Spectrum: [69 74 73 73 73]...[72 73 73 73 73]
2025-11-19 11:00:39,636 - linien_server.autolock.utils - DEBUG - Target indices: [1574, 1618]
2025-11-19 11:00:39,637 - linien_server.autolock.robust - DEBUG - x scale is 32
2025-11-19 11:00:39,692 - linien_server.autolock.robust - DEBUG - shift prepared spectrum by 9 samples to the left to match the original spectrum
2025-11-19 11:00:39,804 - linien_server.autolock.robust - DEBUG - Detected peaks with (position, height): [(1587, 3104)]
2025-11-19 11:00:39,829 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [62, 63, 64, 65, 66, 74, 75, 117, 118, 160, 161, 177, 209, 243, 294, 295, 296, 297, 298, 299, 300, 301, 336, 370, 409, 427, 463, 495, 591, 592, 615, 616, 659, 682, 704, 759, 760, 815, 856, 908, 909, 925, 926, 963, 1001, 1173, 1174, 1229, 1332, 1349, 1350, 1383, 1434, 1435, 1458, 1585, 1639, 1745, 1746, 1757, 1811, 1823, 1858, 1880]
2025-11-19 11:00:39,830 - linien_server.autolock.utils - DEBUG - start_idx - time_scale//5: 1568
2025-11-19 11:00:39,832 - linien_server.autolock.utils - DEBUG - Considered zeros (backward): [62, 63, 64, 65, 66, 74, 75, 117, 118, 160, 161, 177, 209, 243, 294, 295, 296, 297, 298, 299, 300, 301, 336, 370, 409, 427, 463, 495, 591, 592, 615, 616, 659, 682, 704, 759, 760, 815, 856, 908, 909, 925, 926, 963, 1001, 1173, 1174, 1229, 1332, 1349, 1350, 1383, 1434, 1435, 1458]
2025-11-19 11:00:39,951 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [62, 63, 64, 65, 66, 74, 75, 117, 118, 160, 161, 177, 209, 243, 294, 295, 296, 297, 298, 299, 300, 301, 336, 370, 409, 427, 463, 495, 591, 592, 615, 616, 659, 682, 704, 759, 760, 815, 856, 908, 909, 925, 926, 963, 1001, 1173, 1174, 1229, 1332, 1349, 1350, 1383, 1434, 1435, 1458, 1585, 1639, 1745, 1746, 1757, 1811, 1823, 1858, 1880]
2025-11-19 11:00:39,952 - linien_server.autolock.utils - DEBUG - start_idx + time_scale//5: 1621
2025-11-19 11:00:39,954 - linien_server.autolock.utils - DEBUG - Considered zeros (forward): [1639, 1745, 1746, 1757, 1811, 1823, 1858, 1880]
2025-11-19 11:00:40,007 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [62, 63, 64, 65, 66, 74, 75, 117, 118, 160, 161, 177, 209, 243, 294, 295, 296, 297, 298, 299, 300, 301, 336, 370, 409, 427, 463, 495, 591, 592, 615, 616, 659, 682, 704, 759, 760, 815, 856, 908, 909, 925, 926, 963, 1001, 1173, 1174, 1229, 1332, 1349, 1350, 1383, 1434, 1435, 1458, 1585, 1639, 1745, 1746, 1757, 1811, 1823, 1858, 1880]
2025-11-19 11:00:40,009 - linien_server.autolock.utils - DEBUG - start_idx - time_scale//5: 1568
2025-11-19 11:00:40,011 - linien_server.autolock.utils - DEBUG - Considered zeros (backward): [62, 63, 64, 65, 66, 74, 75, 117, 118, 160, 161, 177, 209, 243, 294, 295, 296, 297, 298, 299, 300, 301, 336, 370, 409, 427, 463, 495, 591, 592, 615, 616, 659, 682, 704, 759, 760, 815, 856, 908, 909, 925, 926, 963, 1001, 1173, 1174, 1229, 1332, 1349, 1350, 1383, 1434, 1435, 1458]
2025-11-19 11:00:40,067 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [62, 63, 64, 65, 66, 74, 75, 117, 118, 160, 161, 177, 209, 243, 294, 295, 296, 297, 298, 299, 300, 301, 336, 370, 409, 427, 463, 495, 591, 592, 615, 616, 659, 682, 704, 759, 760, 815, 856, 908, 909, 925, 926, 963, 1001, 1173, 1174, 1229, 1332, 1349, 1350, 1383, 1434, 1435, 1458, 1585, 1639, 1745, 1746, 1757, 1811, 1823, 1858, 1880]
2025-11-19 11:00:40,068 - linien_server.autolock.utils - DEBUG - start_idx + time_scale//5: 1614
2025-11-19 11:00:40,070 - linien_server.autolock.utils - DEBUG - Considered zeros (forward): [1639, 1745, 1746, 1757, 1811, 1823, 1858, 1880]
2025-11-19 11:00:40,104 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [62, 63, 64, 65, 66, 74, 75, 117, 118, 160, 161, 177, 209, 243, 294, 295, 296, 297, 298, 299, 300, 301, 336, 370, 409, 427, 463, 495, 591, 592, 615, 616, 659, 682, 704, 759, 760, 815, 856, 908, 909, 925, 926, 963, 1001, 1173, 1174, 1229, 1332, 1349, 1350, 1383, 1434, 1435, 1458, 1585, 1639, 1745, 1746, 1757, 1811, 1823, 1858, 1880]
2025-11-19 11:00:40,108 - linien_server.autolock.utils - DEBUG - start_idx - time_scale//5: 1568
2025-11-19 11:00:40,110 - linien_server.autolock.utils - DEBUG - Considered zeros (backward): [62, 63, 64, 65, 66, 74, 75, 117, 118, 160, 161, 177, 209, 243, 294, 295, 296, 297, 298, 299, 300, 301, 336, 370, 409, 427, 463, 495, 591, 592, 615, 616, 659, 682, 704, 759, 760, 815, 856, 908, 909, 925, 926, 963, 1001, 1173, 1174, 1229, 1332, 1349, 1350, 1383, 1434, 1435, 1458]
2025-11-19 11:00:40,169 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [62, 63, 64, 65, 66, 74, 75, 117, 118, 160, 161, 177, 209, 243, 294, 295, 296, 297, 298, 299, 300, 301, 336, 370, 409, 427, 463, 495, 591, 592, 615, 616, 659, 682, 704, 759, 760, 815, 856, 908, 909, 925, 926, 963, 1001, 1173, 1174, 1229, 1332, 1349, 1350, 1383, 1434, 1435, 1458, 1585, 1639, 1745, 1746, 1757, 1811, 1823, 1858, 1880]
2025-11-19 11:00:40,170 - linien_server.autolock.utils - DEBUG - start_idx + time_scale//5: 1607
2025-11-19 11:00:40,172 - linien_server.autolock.utils - DEBUG - Considered zeros (forward): [1639, 1745, 1746, 1757, 1811, 1823, 1858, 1880]
2025-11-19 11:00:40,206 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [62, 63, 64, 65, 66, 74, 75, 117, 118, 160, 161, 177, 209, 243, 294, 295, 296, 297, 298, 299, 300, 301, 336, 370, 409, 427, 463, 495, 591, 592, 615, 616, 659, 682, 704, 759, 760, 815, 856, 908, 909, 925, 926, 963, 1001, 1173, 1174, 1229, 1332, 1349, 1350, 1383, 1434, 1435, 1458, 1585, 1639, 1745, 1746, 1757, 1811, 1823, 1858, 1880]
2025-11-19 11:00:40,207 - linien_server.autolock.utils - DEBUG - start_idx - time_scale//5: 1568
2025-11-19 11:00:40,209 - linien_server.autolock.utils - DEBUG - Considered zeros (backward): [62, 63, 64, 65, 66, 74, 75, 117, 118, 160, 161, 177, 209, 243, 294, 295, 296, 297, 298, 299, 300, 301, 336, 370, 409, 427, 463, 495, 591, 592, 615, 616, 659, 682, 704, 759, 760, 815, 856, 908, 909, 925, 926, 963, 1001, 1173, 1174, 1229, 1332, 1349, 1350, 1383, 1434, 1435, 1458]
2025-11-19 11:00:40,266 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [62, 63, 64, 65, 66, 74, 75, 117, 118, 160, 161, 177, 209, 243, 294, 295, 296, 297, 298, 299, 300, 301, 336, 370, 409, 427, 463, 495, 591, 592, 615, 616, 659, 682, 704, 759, 760, 815, 856, 908, 909, 925, 926, 963, 1001, 1173, 1174, 1229, 1332, 1349, 1350, 1383, 1434, 1435, 1458, 1585, 1639, 1745, 1746, 1757, 1811, 1823, 1858, 1880]
2025-11-19 11:00:40,267 - linien_server.autolock.utils - DEBUG - start_idx + time_scale//5: 1607
2025-11-19 11:00:40,268 - linien_server.autolock.utils - DEBUG - Considered zeros (forward): [1639, 1745, 1746, 1757, 1811, 1823, 1858, 1880]
2025-11-19 11:00:40,302 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [62, 63, 64, 65, 66, 74, 75, 117, 118, 160, 161, 177, 209, 243, 294, 295, 296, 297, 298, 299, 300, 301, 336, 370, 409, 427, 463, 495, 591, 592, 615, 616, 659, 682, 704, 759, 760, 815, 856, 908, 909, 925, 926, 963, 1001, 1173, 1174, 1229, 1332, 1349, 1350, 1383, 1434, 1435, 1458, 1585, 1639, 1745, 1746, 1757, 1811, 1823, 1858, 1880]
2025-11-19 11:00:40,304 - linien_server.autolock.utils - DEBUG - start_idx - time_scale//5: 1568
2025-11-19 11:00:40,305 - linien_server.autolock.utils - DEBUG - Considered zeros (backward): [62, 63, 64, 65, 66, 74, 75, 117, 118, 160, 161, 177, 209, 243, 294, 295, 296, 297, 298, 299, 300, 301, 336, 370, 409, 427, 463, 495, 591, 592, 615, 616, 659, 682, 704, 759, 760, 815, 856, 908, 909, 925, 926, 963, 1001, 1173, 1174, 1229, 1332, 1349, 1350, 1383, 1434, 1435, 1458]
2025-11-19 11:00:40,365 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [62, 63, 64, 65, 66, 74, 75, 117, 118, 160, 161, 177, 209, 243, 294, 295, 296, 297, 298, 299, 300, 301, 336, 370, 409, 427, 463, 495, 591, 592, 615, 616, 659, 682, 704, 759, 760, 815, 856, 908, 909, 925, 926, 963, 1001, 1173, 1174, 1229, 1332, 1349, 1350, 1383, 1434, 1435, 1458, 1585, 1639, 1745, 1746, 1757, 1811, 1823, 1858, 1880]
2025-11-19 11:00:40,366 - linien_server.autolock.utils - DEBUG - start_idx + time_scale//5: 1609
2025-11-19 11:00:40,368 - linien_server.autolock.utils - DEBUG - Considered zeros (forward): [1639, 1745, 1746, 1757, 1811, 1823, 1858, 1880]
2025-11-19 11:00:40,378 - linien_server.autolock.robust - DEBUG - Determined lock regions: [(1458, 1639), (1458, 1639), (1458, 1639), (1458, 1639), (1458, 1639)]
2025-11-19 11:00:40,380 - linien_server.autolock.robust - DEBUG - Try out tolerance 0.95
2025-11-19 11:00:40,381 - linien_server.autolock.robust - DEBUG - Original peaks: [(1587, 3104)]
2025-11-19 11:00:40,382 - linien_server.autolock.robust - DEBUG - Filtered peaks: [(1587, 2948.7999999999997)]
2025-11-19 11:00:40,383 - linien_server.autolock.robust - DEBUG - Discarded peaks: [(1587, 3104)]
2025-11-19 11:00:40,385 - linien_server.autolock.robust - DEBUG - Target peak index in prepared spectrum: 1587
2025-11-19 11:00:40,387 - linien_server.autolock.robust - DEBUG - final wait time is 12 samples
2025-11-19 11:00:40,389 - linien_server.autolock.robust - DEBUG - Generated description: [(1428, 2948)]
2025-11-19 11:00:40,426 - linien_server.autolock.robust - DEBUG - Lock position found at index 1588 for current spectrum
2025-11-19 11:00:40,458 - linien_server.autolock.robust - DEBUG - Lock position found at index 1576 for current spectrum
2025-11-19 11:00:40,490 - linien_server.autolock.robust - DEBUG - Lock position found at index 1574 for current spectrum
2025-11-19 11:00:40,523 - linien_server.autolock.robust - DEBUG - Lock position found at index 1573 for current spectrum
2025-11-19 11:00:40,555 - linien_server.autolock.robust - DEBUG - Lock position found at index 1571 for current spectrum
2025-11-19 11:00:40,556 - linien_server.autolock.robust - DEBUG - Description is [(1428, 2948)]
2025-11-19 11:00:40,558 - linien_server.autolock.robust - DEBUG - Calculation of autolock description took 1.098573923110962
2025-11-19 11:00:40,618 - linien_server.server - ERROR - incorrect data received for lock state, ignoring!
2025-11-19 11:00:40,791 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-19 11:00:40,793 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-19 11:00:40,796 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-19 11:00:40,798 - linien_server.autolock.autolock - DEBUG - after lock
2025-11-19 11:03:15,317 - linien_server.autolock.autolock - DEBUG - Initialize Autolock
2025-11-19 11:03:15,338 - linien_server.autolock.autolock - DEBUG - Start the autolock
2025-11-19 11:03:15,341 - linien_server.autolock.autolock - DEBUG - (x0, x1) = (1250,1700)
2025-11-19 11:03:15,347 - linien_server.autolock.autolock - DEBUG - Start autolock with mode 1
2025-11-19 11:03:15,745 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-19 11:03:15,747 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-19 11:03:15,750 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-19 11:03:15,853 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-19 11:03:15,881 - linien_server.autolock.robust - ERROR - Not enough spectra collected:2 of 5
2025-11-19 11:03:16,142 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-19 11:03:16,144 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-19 11:03:16,146 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-19 11:03:16,249 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-19 11:03:16,277 - linien_server.autolock.robust - ERROR - Not enough spectra collected:3 of 5
2025-11-19 11:03:16,558 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-19 11:03:16,562 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-19 11:03:16,564 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-19 11:03:16,666 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-19 11:03:16,694 - linien_server.autolock.robust - ERROR - Not enough spectra collected:4 of 5
2025-11-19 11:03:16,961 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-19 11:03:16,963 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-19 11:03:16,966 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-19 11:03:17,068 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-19 11:03:17,097 - linien_server.autolock.robust - DEBUG - enough spectra!, calculate
2025-11-19 11:03:17,098 - linien_server.autolock.robust - DEBUG - Entered in calculate_autolock_instructions_v2
2025-11-19 11:03:17,103 - linien_server.autolock.robust - DEBUG - Saved new robust_spectra.npy and target_idxs.npy
2025-11-19 11:03:17,104 - linien_server.autolock.utils - DEBUG - Entered in crop_spectra_to_same_view
2025-11-19 11:03:17,237 - linien_server.autolock.utils - DEBUG - Shifts calculated for cropping: [1, -12, -16, -15, -11]
2025-11-19 11:03:17,241 - linien_server.autolock.robust - DEBUG - Saved new robust_spectra_cropped.npy
2025-11-19 11:03:17,242 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-19 11:03:17,243 - linien_server.autolock.utils - DEBUG - Spectrum length:2031
2025-11-19 11:03:17,246 - linien_server.autolock.utils - DEBUG - Spectrum: [3 3 3 3 3]...[6 6 6 6 6]
2025-11-19 11:03:17,247 - linien_server.autolock.utils - DEBUG - Target indices: [1446, 1491]
2025-11-19 11:03:17,249 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-19 11:03:17,250 - linien_server.autolock.utils - DEBUG - Spectrum length:2031
2025-11-19 11:03:17,253 - linien_server.autolock.utils - DEBUG - Spectrum: [2 2 2 2 2]...[4 4 4 4 4]
2025-11-19 11:03:17,254 - linien_server.autolock.utils - DEBUG - Target indices: [1446, 1491]
2025-11-19 11:03:17,255 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-19 11:03:17,256 - linien_server.autolock.utils - DEBUG - Spectrum length:2031
2025-11-19 11:03:17,259 - linien_server.autolock.utils - DEBUG - Spectrum: [-1  2  2  3  3]...[4 4 4 4 4]
2025-11-19 11:03:17,260 - linien_server.autolock.utils - DEBUG - Target indices: [1446, 1491]
2025-11-19 11:03:17,262 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-19 11:03:17,263 - linien_server.autolock.utils - DEBUG - Spectrum length:2031
2025-11-19 11:03:17,266 - linien_server.autolock.utils - DEBUG - Spectrum: [3 3 3 3 3]...[4 5 5 5 5]
2025-11-19 11:03:17,267 - linien_server.autolock.utils - DEBUG - Target indices: [1446, 1491]
2025-11-19 11:03:17,268 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-19 11:03:17,269 - linien_server.autolock.utils - DEBUG - Spectrum length:2031
2025-11-19 11:03:17,272 - linien_server.autolock.utils - DEBUG - Spectrum: [3 3 3 3 3]...[4 4 4 4 4]
2025-11-19 11:03:17,273 - linien_server.autolock.utils - DEBUG - Target indices: [1446, 1491]
2025-11-19 11:03:17,275 - linien_server.autolock.robust - DEBUG - x scale is 41
2025-11-19 11:03:17,327 - linien_server.autolock.robust - DEBUG - shift prepared spectrum by 19 samples to the left to match the original spectrum
2025-11-19 11:03:17,429 - linien_server.autolock.robust - DEBUG - Detected peaks with (position, height): [(1465, 981), (1217, -349), (1118, 771), (1065, -2092), (666, 2), (587, -99), (128, 144)]
2025-11-19 11:03:17,457 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [122, 207, 241, 301, 302, 330, 331, 345, 346, 347, 356, 460, 461, 490, 582, 654, 655, 712, 755, 841, 842, 877, 1060, 1122, 1217, 1314, 1315, 1339, 1340, 1461, 1520, 1816, 1817, 1818, 1863, 1864, 1876]
2025-11-19 11:03:17,460 - linien_server.autolock.utils - DEBUG - start_idx - time_scale//5: 1438
2025-11-19 11:03:17,462 - linien_server.autolock.utils - DEBUG - Considered zeros (backward): [122, 207, 241, 301, 302, 330, 331, 345, 346, 347, 356, 460, 461, 490, 582, 654, 655, 712, 755, 841, 842, 877, 1060, 1122, 1217, 1314, 1315, 1339, 1340]
2025-11-19 11:03:17,490 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [122, 207, 241, 301, 302, 330, 331, 345, 346, 347, 356, 460, 461, 490, 582, 654, 655, 712, 755, 841, 842, 877, 1060, 1122, 1217, 1314, 1315, 1339, 1340, 1461, 1520, 1816, 1817, 1818, 1863, 1864, 1876]
2025-11-19 11:03:17,491 - linien_server.autolock.utils - DEBUG - start_idx + time_scale//5: 1498
2025-11-19 11:03:17,493 - linien_server.autolock.utils - DEBUG - Considered zeros (forward): [1520, 1816, 1817, 1818, 1863, 1864, 1876]
2025-11-19 11:03:17,535 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [122, 207, 241, 301, 302, 330, 331, 345, 346, 347, 356, 460, 461, 490, 582, 654, 655, 712, 755, 841, 842, 877, 1060, 1122, 1217, 1314, 1315, 1339, 1340, 1461, 1520, 1816, 1817, 1818, 1863, 1864, 1876]
2025-11-19 11:03:17,537 - linien_server.autolock.utils - DEBUG - start_idx - time_scale//5: 1441
2025-11-19 11:03:17,538 - linien_server.autolock.utils - DEBUG - Considered zeros (backward): [122, 207, 241, 301, 302, 330, 331, 345, 346, 347, 356, 460, 461, 490, 582, 654, 655, 712, 755, 841, 842, 877, 1060, 1122, 1217, 1314, 1315, 1339, 1340]
2025-11-19 11:03:17,564 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [122, 207, 241, 301, 302, 330, 331, 345, 346, 347, 356, 460, 461, 490, 582, 654, 655, 712, 755, 841, 842, 877, 1060, 1122, 1217, 1314, 1315, 1339, 1340, 1461, 1520, 1816, 1817, 1818, 1863, 1864, 1876]
2025-11-19 11:03:17,566 - linien_server.autolock.utils - DEBUG - start_idx + time_scale//5: 1497
2025-11-19 11:03:17,567 - linien_server.autolock.utils - DEBUG - Considered zeros (forward): [1520, 1816, 1817, 1818, 1863, 1864, 1876]
2025-11-19 11:03:17,599 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [122, 207, 241, 301, 302, 330, 331, 345, 346, 347, 356, 460, 461, 490, 582, 654, 655, 712, 755, 841, 842, 877, 1060, 1122, 1217, 1314, 1315, 1339, 1340, 1461, 1520, 1816, 1817, 1818, 1863, 1864, 1876]
2025-11-19 11:03:17,600 - linien_server.autolock.utils - DEBUG - start_idx - time_scale//5: 1443
2025-11-19 11:03:17,602 - linien_server.autolock.utils - DEBUG - Considered zeros (backward): [122, 207, 241, 301, 302, 330, 331, 345, 346, 347, 356, 460, 461, 490, 582, 654, 655, 712, 755, 841, 842, 877, 1060, 1122, 1217, 1314, 1315, 1339, 1340]
2025-11-19 11:03:17,628 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [122, 207, 241, 301, 302, 330, 331, 345, 346, 347, 356, 460, 461, 490, 582, 654, 655, 712, 755, 841, 842, 877, 1060, 1122, 1217, 1314, 1315, 1339, 1340, 1461, 1520, 1816, 1817, 1818, 1863, 1864, 1876]
2025-11-19 11:03:17,629 - linien_server.autolock.utils - DEBUG - start_idx + time_scale//5: 1498
2025-11-19 11:03:17,631 - linien_server.autolock.utils - DEBUG - Considered zeros (forward): [1520, 1816, 1817, 1818, 1863, 1864, 1876]
2025-11-19 11:03:17,662 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [122, 207, 241, 301, 302, 330, 331, 345, 346, 347, 356, 460, 461, 490, 582, 654, 655, 712, 755, 841, 842, 877, 1060, 1122, 1217, 1314, 1315, 1339, 1340, 1461, 1520, 1816, 1817, 1818, 1863, 1864, 1876]
2025-11-19 11:03:17,663 - linien_server.autolock.utils - DEBUG - start_idx - time_scale//5: 1438
2025-11-19 11:03:17,665 - linien_server.autolock.utils - DEBUG - Considered zeros (backward): [122, 207, 241, 301, 302, 330, 331, 345, 346, 347, 356, 460, 461, 490, 582, 654, 655, 712, 755, 841, 842, 877, 1060, 1122, 1217, 1314, 1315, 1339, 1340]
2025-11-19 11:03:17,691 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [122, 207, 241, 301, 302, 330, 331, 345, 346, 347, 356, 460, 461, 490, 582, 654, 655, 712, 755, 841, 842, 877, 1060, 1122, 1217, 1314, 1315, 1339, 1340, 1461, 1520, 1816, 1817, 1818, 1863, 1864, 1876]
2025-11-19 11:03:17,693 - linien_server.autolock.utils - DEBUG - start_idx + time_scale//5: 1498
2025-11-19 11:03:17,695 - linien_server.autolock.utils - DEBUG - Considered zeros (forward): [1520, 1816, 1817, 1818, 1863, 1864, 1876]
2025-11-19 11:03:17,728 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [122, 207, 241, 301, 302, 330, 331, 345, 346, 347, 356, 460, 461, 490, 582, 654, 655, 712, 755, 841, 842, 877, 1060, 1122, 1217, 1314, 1315, 1339, 1340, 1461, 1520, 1816, 1817, 1818, 1863, 1864, 1876]
2025-11-19 11:03:17,730 - linien_server.autolock.utils - DEBUG - start_idx - time_scale//5: 1440
2025-11-19 11:03:17,731 - linien_server.autolock.utils - DEBUG - Considered zeros (backward): [122, 207, 241, 301, 302, 330, 331, 345, 346, 347, 356, 460, 461, 490, 582, 654, 655, 712, 755, 841, 842, 877, 1060, 1122, 1217, 1314, 1315, 1339, 1340]
2025-11-19 11:03:17,757 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [122, 207, 241, 301, 302, 330, 331, 345, 346, 347, 356, 460, 461, 490, 582, 654, 655, 712, 755, 841, 842, 877, 1060, 1122, 1217, 1314, 1315, 1339, 1340, 1461, 1520, 1816, 1817, 1818, 1863, 1864, 1876]
2025-11-19 11:03:17,758 - linien_server.autolock.utils - DEBUG - start_idx + time_scale//5: 1496
2025-11-19 11:03:17,760 - linien_server.autolock.utils - DEBUG - Considered zeros (forward): [1520, 1816, 1817, 1818, 1863, 1864, 1876]
2025-11-19 11:03:17,767 - linien_server.autolock.robust - DEBUG - Determined lock regions: [(1400, 1520), (1395, 1520), (1405, 1520), (1403, 1520), (1400, 1520)]
2025-11-19 11:03:17,769 - linien_server.autolock.robust - DEBUG - Try out tolerance 0.95
2025-11-19 11:03:17,771 - linien_server.autolock.robust - DEBUG - Original peaks: [(1465, 981), (1217, -349), (1118, 771), (1065, -2092), (666, 2), (587, -99), (128, 144)]
2025-11-19 11:03:17,772 - linien_server.autolock.robust - DEBUG - Filtered peaks: [(1465, 931.9499999999999), (1217, -331.55), (1118, 732.4499999999999), (1065, -1987.3999999999999), (587, -94.05), (128, 136.79999999999998)]
2025-11-19 11:03:17,774 - linien_server.autolock.robust - DEBUG - Discarded peaks: [(1465, 981), (1217, -349), (1118, 771), (1065, -2092), (666, 2), (587, -99), (128, 144)]
2025-11-19 11:03:17,775 - linien_server.autolock.robust - DEBUG - Target peak index in prepared spectrum: 1465
2025-11-19 11:03:17,777 - linien_server.autolock.robust - DEBUG - final wait time is 8 samples
2025-11-19 11:03:17,779 - linien_server.autolock.robust - DEBUG - Generated description: [(115, 136), (413, -94), (430, -1987), (47, 732), (89, -331), (223, 931)]
2025-11-19 11:03:17,812 - linien_server.autolock.robust - DEBUG - Lock position found at index 1466 for current spectrum
2025-11-19 11:03:17,944 - linien_server.autolock.robust - DEBUG - Try out tolerance 0.9
2025-11-19 11:03:17,947 - linien_server.autolock.robust - DEBUG - Original peaks: [(1465, 981), (1217, -349), (1118, 771), (1065, -2092), (666, 2), (587, -99), (128, 144)]
2025-11-19 11:03:17,948 - linien_server.autolock.robust - DEBUG - Filtered peaks: [(1465, 882.9), (1217, -314.1), (1118, 693.9), (1065, -1882.8), (128, 129.6)]
2025-11-19 11:03:17,949 - linien_server.autolock.robust - DEBUG - Discarded peaks: [(1465, 981), (1217, -349), (1118, 771), (1065, -2092), (666, 2), (587, -99), (128, 144)]
2025-11-19 11:03:17,951 - linien_server.autolock.robust - DEBUG - Target peak index in prepared spectrum: 1465
2025-11-19 11:03:17,954 - linien_server.autolock.robust - DEBUG - final wait time is 10 samples
2025-11-19 11:03:17,955 - linien_server.autolock.robust - DEBUG - Generated description: [(115, 129), (843, -1882), (47, 693), (89, -314), (223, 882)]
2025-11-19 11:03:17,987 - linien_server.autolock.robust - DEBUG - Lock position found at index 1466 for current spectrum
2025-11-19 11:03:18,016 - linien_server.autolock.robust - DEBUG - Lock position found at index 1465 for current spectrum
2025-11-19 11:03:18,112 - linien_server.autolock.robust - DEBUG - Lock position found at index 1464 for current spectrum
2025-11-19 11:03:18,113 - linien_server.autolock.robust - DEBUG - Try out tolerance 0.85
2025-11-19 11:03:18,116 - linien_server.autolock.robust - DEBUG - Original peaks: [(1465, 981), (1217, -349), (1118, 771), (1065, -2092), (666, 2), (587, -99), (128, 144)]
2025-11-19 11:03:18,117 - linien_server.autolock.robust - DEBUG - Filtered peaks: [(1465, 833.85), (1217, -296.65), (1118, 655.35), (1065, -1778.2)]
2025-11-19 11:03:18,119 - linien_server.autolock.robust - DEBUG - Discarded peaks: [(1465, 981), (1217, -349), (1118, 771), (1065, -2092), (666, 2), (587, -99), (128, 144)]
2025-11-19 11:03:18,121 - linien_server.autolock.robust - DEBUG - Target peak index in prepared spectrum: 1465
2025-11-19 11:03:18,123 - linien_server.autolock.robust - DEBUG - final wait time is 13 samples
2025-11-19 11:03:18,125 - linien_server.autolock.robust - DEBUG - Generated description: [(958, -1778), (47, 655), (89, -296), (223, 833)]
2025-11-19 11:03:18,157 - linien_server.autolock.robust - DEBUG - Lock position found at index 1466 for current spectrum
2025-11-19 11:03:18,185 - linien_server.autolock.robust - DEBUG - Lock position found at index 1466 for current spectrum
2025-11-19 11:03:18,213 - linien_server.autolock.robust - DEBUG - Lock position found at index 1468 for current spectrum
2025-11-19 11:03:18,241 - linien_server.autolock.robust - DEBUG - Lock position found at index 1466 for current spectrum
2025-11-19 11:03:18,268 - linien_server.autolock.robust - DEBUG - Lock position found at index 1465 for current spectrum
2025-11-19 11:03:18,270 - linien_server.autolock.robust - DEBUG - Description is [(958, -1778), (47, 655), (89, -296), (223, 833)]
2025-11-19 11:03:18,271 - linien_server.autolock.robust - DEBUG - Calculation of autolock description took 1.1731879711151123
2025-11-19 11:03:18,332 - linien_server.server - ERROR - incorrect data received for lock state, ignoring!
2025-11-19 11:03:18,541 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-19 11:03:18,544 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-19 11:03:18,546 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-19 11:03:18,549 - linien_server.autolock.autolock - DEBUG - after lock
2025-11-19 11:04:40,176 - linien_server.cli - INFO - Stopping Linien server
2025-11-19 11:04:40,327 - linien_server.cli - INFO - Stopped Linien server
2025-11-19 11:04:43,447 - linien_server.cli - DEBUG - Copied linien-server.service to /etc/systemd/system
2025-11-19 11:04:43,449 - linien_server.cli - INFO - Starting Linien server
2025-11-19 11:04:43,515 - linien_server.cli - INFO - Started Linien server
2025-11-19 11:04:50,348 - linien_server.cli - DEBUG - Copied linien-server.service to /etc/systemd/system
2025-11-19 11:04:50,350 - linien_server.cli - INFO - Starting Linien server
2025-11-19 11:04:50,400 - linien_server.cli - INFO - Started Linien server
2025-11-19 11:05:00,542 - linien_server.parameters - INFO - Restoring parameters from /root/.local/share/linien/parameters.json
2025-11-19 11:05:00,545 - linien_server.parameters - INFO - Restored parameters from /root/.local/share/linien/parameters.json
2025-11-19 11:05:00,549 - linien_common.influxdb - INFO - Saved InfluxDB credentials to /root/.local/share/linien/influxdb_credentials.json
2025-11-19 11:05:00,748 - linien_server.acquisition - INFO - Using fpgautil to deploy gateware.
2025-11-19 11:05:00,903 - linien_server.server - DEBUG - Ping  1
2025-11-19 11:05:00,950 - linien_server.mdio_tool - INFO - Disabling ethernet blinking with mdio-tool at /usr/local/lib/python3.10/dist-packages/linien_server/mdio-tool
2025-11-19 11:05:01,000 - linien_server.server - INFO - Starting server.
2025-11-19 11:05:01,919 - linien_server.server - DEBUG - Ping  2
2025-11-19 11:05:02,928 - linien_server.server - DEBUG - Ping  3
2025-11-19 11:05:02,934 - linien_server.server - DEBUG - Further pings will be suppressed
2025-11-19 11:06:49,745 - linien_server.autolock.autolock - DEBUG - Initialize Autolock
2025-11-19 11:06:49,770 - linien_server.autolock.autolock - DEBUG - Start the autolock
2025-11-19 11:06:49,831 - linien_server.autolock.autolock - DEBUG - (x0, x1) = (948,1132)
2025-11-19 11:06:49,863 - linien_server.autolock.autolock - DEBUG - Start autolock with mode 1
2025-11-19 11:06:49,877 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-19 11:06:49,882 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-19 11:06:49,886 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-19 11:06:49,993 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-19 11:06:50,023 - linien_server.autolock.robust - ERROR - Not enough spectra collected:2 of 5
2025-11-19 11:06:50,268 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-19 11:06:50,270 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-19 11:06:50,273 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-19 11:06:50,375 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-19 11:06:50,404 - linien_server.autolock.robust - ERROR - Not enough spectra collected:3 of 5
2025-11-19 11:06:50,664 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-19 11:06:50,667 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-19 11:06:50,669 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-19 11:06:50,771 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-19 11:06:50,799 - linien_server.autolock.robust - ERROR - Not enough spectra collected:4 of 5
2025-11-19 11:06:51,021 - linien_server.autolock.autolock - DEBUG - entered in react_new_spectrum
2025-11-19 11:06:51,023 - linien_server.autolock.autolock - DEBUG - pause_acquisition: False
2025-11-19 11:06:51,025 - linien_server.autolock.autolock - DEBUG - check_plot_data: True
2025-11-19 11:06:51,127 - linien_server.autolock.robust - DEBUG - handle new spectrum
2025-11-19 11:06:51,155 - linien_server.autolock.robust - DEBUG - enough spectra!, calculate
2025-11-19 11:06:51,157 - linien_server.autolock.robust - DEBUG - Entered in calculate_autolock_instructions_v2
2025-11-19 11:06:51,163 - linien_server.autolock.robust - DEBUG - Saved new robust_spectra.npy and target_idxs.npy
2025-11-19 11:06:51,164 - linien_server.autolock.utils - DEBUG - Entered in crop_spectra_to_same_view
2025-11-19 11:06:51,258 - linien_server.autolock.utils - DEBUG - Shifts calculated for cropping: [1, -6, -8, -11, -13]
2025-11-19 11:06:51,262 - linien_server.autolock.robust - DEBUG - Saved new robust_spectra_cropped.npy
2025-11-19 11:06:51,264 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-19 11:06:51,265 - linien_server.autolock.utils - DEBUG - Spectrum length:2034
2025-11-19 11:06:51,269 - linien_server.autolock.utils - DEBUG - Spectrum: [3. 3. 3. 3. 3.]...[17. 17. 17. 17. 17.]
2025-11-19 11:06:51,270 - linien_server.autolock.utils - DEBUG - Target indices: [1034, 1084]
2025-11-19 11:06:51,272 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-19 11:06:51,273 - linien_server.autolock.utils - DEBUG - Spectrum length:2034
2025-11-19 11:06:51,276 - linien_server.autolock.utils - DEBUG - Spectrum: [3 3 3 3 3]...[17 17 17 17 17]
2025-11-19 11:06:51,277 - linien_server.autolock.utils - DEBUG - Target indices: [1034, 1084]
2025-11-19 11:06:51,279 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-19 11:06:51,280 - linien_server.autolock.utils - DEBUG - Spectrum length:2034
2025-11-19 11:06:51,283 - linien_server.autolock.utils - DEBUG - Spectrum: [3 3 4 4 4]...[17 17 17 17 17]
2025-11-19 11:06:51,284 - linien_server.autolock.utils - DEBUG - Target indices: [1034, 1084]
2025-11-19 11:06:51,285 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-19 11:06:51,287 - linien_server.autolock.utils - DEBUG - Spectrum length:2034
2025-11-19 11:06:51,289 - linien_server.autolock.utils - DEBUG - Spectrum: [3 3 2 3 3]...[17 17 17 17 17]
2025-11-19 11:06:51,291 - linien_server.autolock.utils - DEBUG - Target indices: [1034, 1084]
2025-11-19 11:06:51,292 - linien_server.autolock.utils - DEBUG - Entered in get_time_scale
2025-11-19 11:06:51,293 - linien_server.autolock.utils - DEBUG - Spectrum length:2034
2025-11-19 11:06:51,296 - linien_server.autolock.utils - DEBUG - Spectrum: [-6  2  2  1  1]...[17 16 16 16 16]
2025-11-19 11:06:51,297 - linien_server.autolock.utils - DEBUG - Target indices: [1034, 1084]
2025-11-19 11:06:51,299 - linien_server.autolock.robust - DEBUG - x scale is 43
2025-11-19 11:06:51,337 - linien_server.autolock.robust - DEBUG - shift prepared spectrum by 20 samples to the left to match the original spectrum
2025-11-19 11:06:51,415 - linien_server.autolock.robust - DEBUG - Detected peaks with (position, height): [(1055, 1270.0), (944, -1.0), (936, 2.0), (925, -1.0), (908, 13.0), (825, -85.0), (704, 1142.0), (646, -1991.0), (315, 16.0), (274, -251.0), (225, 226.0)]
2025-11-19 11:06:51,444 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [48, 72, 73, 98, 130, 220, 277, 324, 444, 470, 642, 707, 837, 920, 930, 1052, 1115, 1415, 1416, 1417, 1418, 1578, 1613, 1835, 1836, 1855]
2025-11-19 11:06:51,445 - linien_server.autolock.utils - DEBUG - start_idx - time_scale//5: 1026
2025-11-19 11:06:51,447 - linien_server.autolock.utils - DEBUG - Considered zeros (backward): [48, 72, 73, 98, 130, 220, 277, 324, 444, 470, 642, 707, 837, 920, 930]
2025-11-19 11:06:51,475 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [48, 72, 73, 98, 130, 220, 277, 324, 444, 470, 642, 707, 837, 920, 930, 1052, 1115, 1415, 1416, 1417, 1418, 1578, 1613, 1835, 1836, 1855]
2025-11-19 11:06:51,477 - linien_server.autolock.utils - DEBUG - start_idx + time_scale//5: 1087
2025-11-19 11:06:51,478 - linien_server.autolock.utils - DEBUG - Considered zeros (forward): [1115, 1415, 1416, 1417, 1418, 1578, 1613, 1835, 1836, 1855]
2025-11-19 11:06:51,508 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [48, 72, 73, 98, 130, 220, 277, 324, 444, 470, 642, 707, 837, 920, 930, 1052, 1115, 1415, 1416, 1417, 1418, 1578, 1613, 1835, 1836, 1855]
2025-11-19 11:06:51,509 - linien_server.autolock.utils - DEBUG - start_idx - time_scale//5: 1031
2025-11-19 11:06:51,510 - linien_server.autolock.utils - DEBUG - Considered zeros (backward): [48, 72, 73, 98, 130, 220, 277, 324, 444, 470, 642, 707, 837, 920, 930]
2025-11-19 11:06:51,539 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [48, 72, 73, 98, 130, 220, 277, 324, 444, 470, 642, 707, 837, 920, 930, 1052, 1115, 1415, 1416, 1417, 1418, 1578, 1613, 1835, 1836, 1855]
2025-11-19 11:06:51,540 - linien_server.autolock.utils - DEBUG - start_idx + time_scale//5: 1087
2025-11-19 11:06:51,542 - linien_server.autolock.utils - DEBUG - Considered zeros (forward): [1115, 1415, 1416, 1417, 1418, 1578, 1613, 1835, 1836, 1855]
2025-11-19 11:06:51,571 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [48, 72, 73, 98, 130, 220, 277, 324, 444, 470, 642, 707, 837, 920, 930, 1052, 1115, 1415, 1416, 1417, 1418, 1578, 1613, 1835, 1836, 1855]
2025-11-19 11:06:51,572 - linien_server.autolock.utils - DEBUG - start_idx - time_scale//5: 1031
2025-11-19 11:06:51,573 - linien_server.autolock.utils - DEBUG - Considered zeros (backward): [48, 72, 73, 98, 130, 220, 277, 324, 444, 470, 642, 707, 837, 920, 930]
2025-11-19 11:06:51,601 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [48, 72, 73, 98, 130, 220, 277, 324, 444, 470, 642, 707, 837, 920, 930, 1052, 1115, 1415, 1416, 1417, 1418, 1578, 1613, 1835, 1836, 1855]
2025-11-19 11:06:51,603 - linien_server.autolock.utils - DEBUG - start_idx + time_scale//5: 1088
2025-11-19 11:06:51,604 - linien_server.autolock.utils - DEBUG - Considered zeros (forward): [1115, 1415, 1416, 1417, 1418, 1578, 1613, 1835, 1836, 1855]
2025-11-19 11:06:51,634 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [48, 72, 73, 98, 130, 220, 277, 324, 444, 470, 642, 707, 837, 920, 930, 1052, 1115, 1415, 1416, 1417, 1418, 1578, 1613, 1835, 1836, 1855]
2025-11-19 11:06:51,635 - linien_server.autolock.utils - DEBUG - start_idx - time_scale//5: 1029
2025-11-19 11:06:51,637 - linien_server.autolock.utils - DEBUG - Considered zeros (backward): [48, 72, 73, 98, 130, 220, 277, 324, 444, 470, 642, 707, 837, 920, 930]
2025-11-19 11:06:51,665 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [48, 72, 73, 98, 130, 220, 277, 324, 444, 470, 642, 707, 837, 920, 930, 1052, 1115, 1415, 1416, 1417, 1418, 1578, 1613, 1835, 1836, 1855]
2025-11-19 11:06:51,666 - linien_server.autolock.utils - DEBUG - start_idx + time_scale//5: 1089
2025-11-19 11:06:51,668 - linien_server.autolock.utils - DEBUG - Considered zeros (forward): [1115, 1415, 1416, 1417, 1418, 1578, 1613, 1835, 1836, 1855]
2025-11-19 11:06:51,697 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [48, 72, 73, 98, 130, 220, 277, 324, 444, 470, 642, 707, 837, 920, 930, 1052, 1115, 1415, 1416, 1417, 1418, 1578, 1613, 1835, 1836, 1855]
2025-11-19 11:06:51,699 - linien_server.autolock.utils - DEBUG - start_idx - time_scale//5: 1030
2025-11-19 11:06:51,700 - linien_server.autolock.utils - DEBUG - Considered zeros (backward): [48, 72, 73, 98, 130, 220, 277, 324, 444, 470, 642, 707, 837, 920, 930]
2025-11-19 11:06:51,728 - linien_server.autolock.utils - DEBUG - Zero crossings of smoothed derivative: [48, 72, 73, 98, 130, 220, 277, 324, 444, 470, 642, 707, 837, 920, 930, 1052, 1115, 1415, 1416, 1417, 1418, 1578, 1613, 1835, 1836, 1855]
2025-11-19 11:06:51,730 - linien_server.autolock.utils - DEBUG - start_idx + time_scale//5: 1091
2025-11-19 11:06:51,731 - linien_server.autolock.utils - DEBUG - Considered zeros (forward): [1115, 1415, 1416, 1417, 1418, 1578, 1613, 1835, 1836, 1855]
2025-11-19 11:06:51,736 - linien_server.autolock.robust - DEBUG - Determined lock regions: [(930, 1115), (930, 1115), (953, 1115), (947, 1115), (942, 1115)]
2025-11-19 11:06:51,737 - linien_server.autolock.robust - DEBUG - Try out tolerance 0.95
2025-11-19 11:06:51,739 - linien_server.autolock.robust - DEBUG - Original peaks: [(1055, 1270.0), (944, -1.0), (936, 2.0), (925, -1.0), (908, 13.0), (825, -85.0), (704, 1142.0), (646, -1991.0), (315, 16.0), (274, -251.0), (225, 226.0)]
2025-11-19 11:06:51,740 - linien_server.autolock.robust - DEBUG - Filtered peaks: [(1055, 1206.5), (825, -80.75), (704, 1084.8999999999999), (646, -1891.4499999999998), (274, -238.45), (225, 214.7)]
2025-11-19 11:06:51,742 - linien_server.autolock.robust - DEBUG - Discarded peaks: [(1055, 1270.0), (944, -1.0), (936, 2.0), (925, -1.0), (908, 13.0), (825, -85.0), (704, 1142.0), (646, -1991.0), (315, 16.0), (274, -251.0), (225, 226.0)]
2025-11-19 11:06:51,744 - linien_server.autolock.robust - DEBUG - Target peak index in prepared spectrum: 1055
2025-11-19 11:06:51,745 - linien_server.autolock.robust - DEBUG - final wait time is 8 samples
2025-11-19 11:06:51,747 - linien_server.autolock.robust - DEBUG - Generated description: [(202, 214), (44, -238), (334, -1891), (52, 1084), (108, -80), (207, 1206)]
2025-11-19 11:06:51,774 - linien_server.autolock.robust - DEBUG - Lock position found at index 1056 for current spectrum
2025-11-19 11:06:51,902 - linien_server.autolock.robust - DEBUG - Try out tolerance 0.9
2025-11-19 11:06:51,904 - linien_server.autolock.robust - DEBUG - Original peaks: [(1055, 1270.0), (944, -1.0), (936, 2.0), (925, -1.0), (908, 13.0), (825, -85.0), (704, 1142.0), (646, -1991.0), (315, 16.0), (274, -251.0), (225, 226.0)]
2025-11-19 11:06:51,905 - linien_server.autolock.robust - DEBUG - Filtered peaks: [(1055, 1143.0), (704, 1027.8), (646, -1791.9), (274, -225.9), (225, 203.4)]
2025-11-19 11:06:51,907 - linien_server.autolock.robust - DEBUG - Discarded peaks: [(1055, 1270.0), (944, -1.0), (936, 2.0), (925, -1.0), (908, 13.0), (825, -85.0), (704, 1142.0), (646, -1991.0), (315, 16.0), (274, -251.0), (225, 226.0)]
2025-11-19 11:06:51,909 - linien_server.autolock.robust - DEBUG - Target peak index in prepared spectrum: 1055
2025-11-19 11:06:51,910 - linien_server.autolock.robust - DEBUG - final wait time is 12 samples
2025-11-19 11:06:51,912 - linien_server.autolock.robust - DEBUG - Generated description: [(202, 203), (44, -225), (334, -1791), (52, 1027), (315, 1143)]
2025-11-19 11:06:51,939 - linien_server.autolock.robust - DEBUG - Lock position found at index 1056 for current spectrum
2025-11-19 11:06:51,965 - linien_server.autolock.robust - DEBUG - Lock position found at index 1056 for current spectrum
2025-11-19 11:06:51,994 - linien_server.autolock.robust - DEBUG - Lock position found at index 1057 for current spectrum
2025-11-19 11:06:52,060 - linien_server.autolock.robust - DEBUG - Try out tolerance 0.85
2025-11-19 11:06:52,061 - linien_server.autolock.robust - DEBUG - Original peaks: [(1055, 1270.0), (944, -1.0), (936, 2.0), (925, -1.0), (908, 13.0), (825, -85.0), (704, 1142.0), (646, -1991.0), (315, 16.0), (274, -251.0), (225, 226.0)]
2025-11-19 11:06:52,063 - linien_server.autolock.robust - DEBUG - Filtered peaks: [(1055, 1079.5), (704, 970.6999999999999), (646, -1692.35), (274, -213.35), (225, 192.1)]
2025-11-19 11:06:52,064 - linien_server.autolock.robust - DEBUG - Discarded peaks: [(1055, 1270.0), (944, -1.0), (936, 2.0), (925, -1.0), (908, 13.0), (825, -85.0), (704, 1142.0), (646, -1991.0), (315, 16.0), (274, -251.0), (225, 226.0)]
2025-11-19 11:06:52,066 - linien_server.autolock.robust - DEBUG - Target peak index in prepared spectrum: 1055
2025-11-19 11:06:52,068 - linien_server.autolock.robust - DEBUG - final wait time is 14 samples
2025-11-19 11:06:52,070 - linien_server.autolock.robust - DEBUG - Generated description: [(202, 192), (44, -213), (334, -1692), (52, 970), (315, 1079)]
2025-11-19 11:06:52,097 - linien_server.autolock.robust - DEBUG - Lock position found at index 1056 for current spectrum
2025-11-19 11:06:52,123 - linien_server.autolock.robust - DEBUG - Lock position found at index 1055 for current spectrum
2025-11-19 11:06:52,148 - linien_server.autolock.robust - DEBUG - Lock position found at index 1057 for current spectrum
2025-11-19 11:06:52,211 - linien_server.autolock.robust - DEBUG - Try out tolerance 0.8
2025-11-19 11:06:52,212 - linien_server.autolock.robust - DEBUG - Original peaks: [(1055, 1270.0), (944, -1.0), (936, 2.0), (925, -1.0), (908, 13.0), (825, -85.0), (704, 1142.0), (646, -1991.0), (315, 16.0), (274, -251.0), (225, 226.0)]
2025-11-19 11:06:52,214 - linien_server.autolock.robust - DEBUG - Filtered peaks: [(1055, 1016.0), (704, 913.6), (646, -1592.8000000000002)]
2025-11-19 11:06:52,215 - linien_server.autolock.robust - DEBUG - Discarded peaks: [(1055, 1270.0), (944, -1.0), (936, 2.0), (925, -1.0), (908, 13.0), (825, -85.0), (704, 1142.0), (646, -1991.0), (315, 16.0), (274, -251.0), (225, 226.0)]
2025-11-19 11:06:52,217 - linien_server.autolock.robust - DEBUG - Target peak index in prepared spectrum: 1055
2025-11-19 11:06:52,219 - linien_server.autolock.robust - DEBUG - final wait time is 17 samples
2025-11-19 11:06:52,221 - linien_server.autolock.robust - DEBUG - Generated description: [(581, -1592), (52, 913), (315, 1016)]
2025-11-19 11:06:52,248 - linien_server.autolock.robust - DEBUG - Lock position found at index 1056 for current spectrum
2025-11-19 11:06:52,274 - linien_server.autolock.robust - DEBUG - Lock position found at index 1056 for current spectrum
2025-11-19 11:06:52,301 - linien_server.autolock.robust - DEBUG - Lock position found at index 1057 for current spectrum
2025-11-19 11:06:52,326 - linien_server.autolock.robust - DEBUG - Lock position found at index 1056 for current spectrum
2025-11-19 11:06:52,350 - linien_server.autolock.robust - DEBUG - Lock position found at index 1058 for current spectrum
2025-11-19 11:06:52,351 - linien_server.autolock.robust - DEBUG - Description is [(581, -1592), (52, 913), (315, 1016)]
2025-11-19 11:06:52,353 - linien_server.autolock.robust - DEBUG - Calculation of autolock description took 1.1960134506225586
2025-11-19 11:06:52,414 - linien_server.server - ERROR - incorrect data received for lock state, ignoring!
2025-11-19 11:06:57,490 - linien_server.autolock.robust - ERROR - Waited too long for autolock! Aborting
